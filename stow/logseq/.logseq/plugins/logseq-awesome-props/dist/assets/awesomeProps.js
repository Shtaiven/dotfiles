(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const B of document.querySelectorAll('link[rel="modulepreload"]'))H(B);new MutationObserver(B=>{for(const ue of B)if(ue.type==="childList")for(const R of ue.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&H(R)}).observe(document,{childList:!0,subtree:!0});function A(B){const ue={};return B.integrity&&(ue.integrity=B.integrity),B.referrerPolicy&&(ue.referrerPolicy=B.referrerPolicy),B.crossOrigin==="use-credentials"?ue.credentials="include":B.crossOrigin==="anonymous"?ue.credentials="omit":ue.credentials="same-origin",ue}function H(B){if(B.ep)return;B.ep=!0;const ue=A(B);fetch(B.href,ue)}})();var Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={},vi={get exports(){return cn},set exports(d){cn=d}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(d,y){(function(A,H){d.exports=H()})(self,()=>(()=>{var A={227:(R,f,O)=>{var M=O(155);f.formatArgs=function(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+R.exports.humanize(this.diff),!this.useColors)return;const ee="color: "+this.color;N.splice(1,0,ee,"color: inherit");let v=0,h=0;N[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(v++,w==="%c"&&(h=v))}),N.splice(h,0,ee)},f.save=function(N){try{N?f.storage.setItem("debug",N):f.storage.removeItem("debug")}catch{}},f.load=function(){let N;try{N=f.storage.getItem("debug")}catch{}return!N&&M!==void 0&&"env"in M&&(N=M.env.DEBUG),N},f.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},f.storage=function(){try{return localStorage}catch{}}(),f.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],f.log=console.debug||console.log||(()=>{}),R.exports=O(447)(f);const{formatters:P}=R.exports;P.j=function(N){try{return JSON.stringify(N)}catch(ee){return"[UnexpectedJSONParseError]: "+ee.message}}},447:(R,f,O)=>{R.exports=function(M){function P(v){let h,w,_,q=null;function F(...z){if(!F.enabled)return;const J=F,I=Number(new Date),$=I-(h||I);J.diff=$,J.prev=h,J.curr=I,h=I,z[0]=P.coerce(z[0]),typeof z[0]!="string"&&z.unshift("%O");let s=0;z[0]=z[0].replace(/%([a-zA-Z%])/g,(c,m)=>{if(c==="%%")return"%";s++;const x=P.formatters[m];if(typeof x=="function"){const Z=z[s];c=x.call(J,Z),z.splice(s,1),s--}return c}),P.formatArgs.call(J,z),(J.log||P.log).apply(J,z)}return F.namespace=v,F.useColors=P.useColors(),F.color=P.selectColor(v),F.extend=N,F.destroy=P.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>q!==null?q:(w!==P.namespaces&&(w=P.namespaces,_=P.enabled(v)),_),set:z=>{q=z}}),typeof P.init=="function"&&P.init(F),F}function N(v,h){const w=P(this.namespace+(h===void 0?":":h)+v);return w.log=this.log,w}function ee(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}return P.debug=P,P.default=P,P.coerce=function(v){return v instanceof Error?v.stack||v.message:v},P.disable=function(){const v=[...P.names.map(ee),...P.skips.map(ee).map(h=>"-"+h)].join(",");return P.enable(""),v},P.enable=function(v){let h;P.save(v),P.namespaces=v,P.names=[],P.skips=[];const w=(typeof v=="string"?v:"").split(/[\s,]+/),_=w.length;for(h=0;h<_;h++)w[h]&&((v=w[h].replace(/\*/g,".*?"))[0]==="-"?P.skips.push(new RegExp("^"+v.slice(1)+"$")):P.names.push(new RegExp("^"+v+"$")))},P.enabled=function(v){if(v[v.length-1]==="*")return!0;let h,w;for(h=0,w=P.skips.length;h<w;h++)if(P.skips[h].test(v))return!1;for(h=0,w=P.names.length;h<w;h++)if(P.names[h].test(v))return!0;return!1},P.humanize=O(824),P.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(M).forEach(v=>{P[v]=M[v]}),P.names=[],P.skips=[],P.formatters={},P.selectColor=function(v){let h=0;for(let w=0;w<v.length;w++)h=(h<<5)-h+v.charCodeAt(w),h|=0;return P.colors[Math.abs(h)%P.colors.length]},P.enable(P.load()),P}},856:function(R){R.exports=function(){function f(C){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},f(C)}function O(C,j){return O=Object.setPrototypeOf||function(W,Q){return W.__proto__=Q,W},O(C,j)}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(C,j,W){return P=M()?Reflect.construct:function(Q,ce,Ne){var Qe=[null];Qe.push.apply(Qe,ce);var $e=new(Function.bind.apply(Q,Qe));return Ne&&O($e,Ne.prototype),$e},P.apply(null,arguments)}function N(C){return ee(C)||v(C)||h(C)||_()}function ee(C){if(Array.isArray(C))return w(C)}function v(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}function h(C,j){if(C){if(typeof C=="string")return w(C,j);var W=Object.prototype.toString.call(C).slice(8,-1);return W==="Object"&&C.constructor&&(W=C.constructor.name),W==="Map"||W==="Set"?Array.from(C):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?w(C,j):void 0}}function w(C,j){(j==null||j>C.length)&&(j=C.length);for(var W=0,Q=new Array(j);W<j;W++)Q[W]=C[W];return Q}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q=Object.hasOwnProperty,F=Object.setPrototypeOf,z=Object.isFrozen,J=Object.getPrototypeOf,I=Object.getOwnPropertyDescriptor,$=Object.freeze,s=Object.seal,c=Object.create,m=typeof Reflect<"u"&&Reflect,x=m.apply,Z=m.construct;x||(x=function(C,j,W){return C.apply(j,W)}),$||($=function(C){return C}),s||(s=function(C){return C}),Z||(Z=function(C,j){return P(C,N(j))});var te=ne(Array.prototype.forEach),ae=ne(Array.prototype.pop),be=ne(Array.prototype.push),Se=ne(String.prototype.toLowerCase),xe=ne(String.prototype.match),ge=ne(String.prototype.replace),Me=ne(String.prototype.indexOf),p=ne(String.prototype.trim),b=ne(RegExp.prototype.test),D=Pe(TypeError);function ne(C){return function(j){for(var W=arguments.length,Q=new Array(W>1?W-1:0),ce=1;ce<W;ce++)Q[ce-1]=arguments[ce];return x(C,j,Q)}}function Pe(C){return function(){for(var j=arguments.length,W=new Array(j),Q=0;Q<j;Q++)W[Q]=arguments[Q];return Z(C,W)}}function U(C,j){F&&F(C,null);for(var W=j.length;W--;){var Q=j[W];if(typeof Q=="string"){var ce=Se(Q);ce!==Q&&(z(j)||(j[W]=ce),Q=ce)}C[Q]=!0}return C}function K(C){var j,W=c(null);for(j in C)x(q,C,[j])&&(W[j]=C[j]);return W}function pe(C,j){for(;C!==null;){var W=I(C,j);if(W){if(W.get)return ne(W.get);if(typeof W.value=="function")return ne(W.value)}C=J(C)}function Q(ce){return console.warn("fallback value for",ce),null}return Q}var Ie=$(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Oe=$(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Be=$(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nt=$(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),me=$(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),de=$(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),je=$(["#text"]),Ae=$(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Le=$(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fe=$(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),De=$(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Mt=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ct=s(/<%[\w\W]*|[\w\W]*%>/gm),Fr=s(/^data-[\-\w.\u00B7-\uFFFF]/),Nr=s(/^aria-[\-\w]+$/),$r=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Rr=s(/^(?:\w+script|data):/i),ot=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cr=s(/^html$/i),Dr=function(){return typeof window>"u"?null:window},Ur=function(C,j){if(f(C)!=="object"||typeof C.createPolicy!="function")return null;var W=null,Q="data-tt-policy-suffix";j.currentScript&&j.currentScript.hasAttribute(Q)&&(W=j.currentScript.getAttribute(Q));var ce="dompurify"+(W?"#"+W:"");try{return C.createPolicy(ce,{createHTML:function(Ne){return Ne}})}catch{return console.warn("TrustedTypes policy "+ce+" could not be created."),null}};function dt(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dr(),j=function(o){return dt(o)};if(j.version="2.3.8",j.removed=[],!C||!C.document||C.document.nodeType!==9)return j.isSupported=!1,j;var W=C.document,Q=C.document,ce=C.DocumentFragment,Ne=C.HTMLTemplateElement,Qe=C.Node,$e=C.Element,Xe=C.NodeFilter,ft=C.NamedNodeMap,St=ft===void 0?C.NamedNodeMap||C.MozNamedAttrMap:ft,Ft=C.HTMLFormElement,lr=C.DOMParser,ur=C.trustedTypes,ht=$e.prototype,pr=pe(ht,"cloneNode"),dr=pe(ht,"nextSibling"),qr=pe(ht,"childNodes"),it=pe(ht,"parentNode");if(typeof Ne=="function"){var Nt=Q.createElement("template");Nt.content&&Nt.content.ownerDocument&&(Q=Nt.content.ownerDocument)}var Ge=Ur(ur,W),fr=Ge?Ge.createHTML(""):"",gt=Q,$t=gt.implementation,hr=gt.createNodeIterator,gr=gt.createDocumentFragment,zr=gt.getElementsByTagName,Rt=W.importNode,mr={};try{mr=K(Q).documentMode?Q.documentMode:{}}catch{}var _e={};j.isSupported=typeof it=="function"&&$t&&$t.createHTMLDocument!==void 0&&mr!==9;var st,We,Dt=Mt,Ut=Ct,xt=Fr,Te=Nr,qt=Rr,mt=ot,zt=$r,ve=null,Ht=U({},[].concat(N(Ie),N(Oe),N(Be),N(me),N(je))),we=null,Bt=U({},[].concat(N(Ae),N(Le),N(Fe),N(De))),le=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,Gt=null,Wt=!0,Vt=!0,yr=!1,at=!1,re=!1,Jt=!1,Zt=!1,et=!1,Ve=!1,ct=!1,Kt=!0,Pt=!0,tt=!1,Je={},lt=null,br=U({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vr=null,wr=U({},["audio","video","img","source","image","track"]),Yt=null,Ot=U({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",At=Ze,_r=!1,kr=["application/xhtml+xml","text/html"],Hr="text/html",ut=null,Br=Q.createElement("form"),It=function(o){return o instanceof RegExp||o instanceof Function},Xt=function(o){ut&&ut===o||(o&&f(o)==="object"||(o={}),o=K(o),ve="ALLOWED_TAGS"in o?U({},o.ALLOWED_TAGS):Ht,we="ALLOWED_ATTR"in o?U({},o.ALLOWED_ATTR):Bt,Yt="ADD_URI_SAFE_ATTR"in o?U(K(Ot),o.ADD_URI_SAFE_ATTR):Ot,vr="ADD_DATA_URI_TAGS"in o?U(K(wr),o.ADD_DATA_URI_TAGS):wr,lt="FORBID_CONTENTS"in o?U({},o.FORBID_CONTENTS):br,yt="FORBID_TAGS"in o?U({},o.FORBID_TAGS):{},Gt="FORBID_ATTR"in o?U({},o.FORBID_ATTR):{},Je="USE_PROFILES"in o&&o.USE_PROFILES,Wt=o.ALLOW_ARIA_ATTR!==!1,Vt=o.ALLOW_DATA_ATTR!==!1,yr=o.ALLOW_UNKNOWN_PROTOCOLS||!1,at=o.SAFE_FOR_TEMPLATES||!1,re=o.WHOLE_DOCUMENT||!1,et=o.RETURN_DOM||!1,Ve=o.RETURN_DOM_FRAGMENT||!1,ct=o.RETURN_TRUSTED_TYPE||!1,Zt=o.FORCE_BODY||!1,Kt=o.SANITIZE_DOM!==!1,Pt=o.KEEP_CONTENT!==!1,tt=o.IN_PLACE||!1,zt=o.ALLOWED_URI_REGEXP||zt,At=o.NAMESPACE||Ze,o.CUSTOM_ELEMENT_HANDLING&&It(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&It(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),st=st=kr.indexOf(o.PARSER_MEDIA_TYPE)===-1?Hr:o.PARSER_MEDIA_TYPE,We=st==="application/xhtml+xml"?function(S){return S}:Se,at&&(Vt=!1),Ve&&(et=!0),Je&&(ve=U({},N(je)),we=[],Je.html===!0&&(U(ve,Ie),U(we,Ae)),Je.svg===!0&&(U(ve,Oe),U(we,Le),U(we,De)),Je.svgFilters===!0&&(U(ve,Be),U(we,Le),U(we,De)),Je.mathMl===!0&&(U(ve,me),U(we,Fe),U(we,De))),o.ADD_TAGS&&(ve===Ht&&(ve=K(ve)),U(ve,o.ADD_TAGS)),o.ADD_ATTR&&(we===Bt&&(we=K(we)),U(we,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&U(Yt,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(lt===br&&(lt=K(lt)),U(lt,o.FORBID_CONTENTS)),Pt&&(ve["#text"]=!0),re&&U(ve,["html","head","body"]),ve.table&&(U(ve,["tbody"]),delete yt.tbody),$&&$(o),ut=o)},er=U({},["mi","mo","mn","ms","mtext"]),Cr=U({},["foreignobject","desc","title","annotation-xml"]),Gr=U({},["title","style","font","a","script"]),Et=U({},Oe);U(Et,Be),U(Et,nt);var tr=U({},me);U(tr,de);var Wr=function(o){var S=it(o);S&&S.tagName||(S={namespaceURI:Ze,tagName:"template"});var k=Se(o.tagName),ie=Se(S.tagName);return o.namespaceURI===jt?S.namespaceURI===Ze?k==="svg":S.namespaceURI===Qt?k==="svg"&&(ie==="annotation-xml"||er[ie]):Boolean(Et[k]):o.namespaceURI===Qt?S.namespaceURI===Ze?k==="math":S.namespaceURI===jt?k==="math"&&Cr[ie]:Boolean(tr[k]):o.namespaceURI===Ze&&!(S.namespaceURI===jt&&!Cr[ie])&&!(S.namespaceURI===Qt&&!er[ie])&&!tr[k]&&(Gr[k]||!Et[k])},Ue=function(o){be(j.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=fr}catch{o.remove()}}},Sr=function(o,S){try{be(j.removed,{attribute:S.getAttributeNode(o),from:S})}catch{be(j.removed,{attribute:null,from:S})}if(S.removeAttribute(o),o==="is"&&!we[o])if(et||Ve)try{Ue(S)}catch{}else try{S.setAttribute(o,"")}catch{}},xr=function(o){var S,k;if(Zt)o="<remove></remove>"+o;else{var ie=xe(o,/^[\r\n\t ]+/);k=ie&&ie[0]}st==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var he=Ge?Ge.createHTML(o):o;if(At===Ze)try{S=new lr().parseFromString(he,st)}catch{}if(!S||!S.documentElement){S=$t.createDocument(At,"template",null);try{S.documentElement.innerHTML=_r?"":he}catch{}}var ke=S.body||S.documentElement;return o&&k&&ke.insertBefore(Q.createTextNode(k),ke.childNodes[0]||null),At===Ze?zr.call(S,re?"html":"body")[0]:re?S.documentElement:ke},bt=function(o){return hr.call(o.ownerDocument||o,o,Xe.SHOW_ELEMENT|Xe.SHOW_COMMENT|Xe.SHOW_TEXT,null,!1)},Vr=function(o){return o instanceof Ft&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof St)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},vt=function(o){return f(Qe)==="object"?o instanceof Qe:o&&f(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},qe=function(o,S,k){_e[o]&&te(_e[o],function(ie){ie.call(j,S,k,ut)})},rr=function(o){var S;if(qe("beforeSanitizeElements",o,null),Vr(o)||b(/[\u0080-\uFFFF]/,o.nodeName))return Ue(o),!0;var k=We(o.nodeName);if(qe("uponSanitizeElement",o,{tagName:k,allowedTags:ve}),o.hasChildNodes()&&!vt(o.firstElementChild)&&(!vt(o.content)||!vt(o.content.firstElementChild))&&b(/<[/\w]/g,o.innerHTML)&&b(/<[/\w]/g,o.textContent)||k==="select"&&b(/<template/i,o.innerHTML))return Ue(o),!0;if(!ve[k]||yt[k]){if(!yt[k]&&nr(k)&&(le.tagNameCheck instanceof RegExp&&b(le.tagNameCheck,k)||le.tagNameCheck instanceof Function&&le.tagNameCheck(k)))return!1;if(Pt&&!lt[k]){var ie=it(o)||o.parentNode,he=qr(o)||o.childNodes;if(he&&ie)for(var ke=he.length-1;ke>=0;--ke)ie.insertBefore(pr(he[ke],!0),dr(o))}return Ue(o),!0}return o instanceof $e&&!Wr(o)?(Ue(o),!0):k!=="noscript"&&k!=="noembed"||!b(/<\/no(script|embed)/i,o.innerHTML)?(at&&o.nodeType===3&&(S=o.textContent,S=ge(S,Dt," "),S=ge(S,Ut," "),o.textContent!==S&&(be(j.removed,{element:o.cloneNode()}),o.textContent=S)),qe("afterSanitizeElements",o,null),!1):(Ue(o),!0)},Pr=function(o,S,k){if(Kt&&(S==="id"||S==="name")&&(k in Q||k in Br))return!1;if(!(Vt&&!Gt[S]&&b(xt,S))){if(!(Wt&&b(Te,S))){if(!we[S]||Gt[S]){if(!(nr(o)&&(le.tagNameCheck instanceof RegExp&&b(le.tagNameCheck,o)||le.tagNameCheck instanceof Function&&le.tagNameCheck(o))&&(le.attributeNameCheck instanceof RegExp&&b(le.attributeNameCheck,S)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(S))||S==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&b(le.tagNameCheck,k)||le.tagNameCheck instanceof Function&&le.tagNameCheck(k))))return!1}else if(!Yt[S]){if(!b(zt,ge(k,mt,""))){if((S!=="src"&&S!=="xlink:href"&&S!=="href"||o==="script"||Me(k,"data:")!==0||!vr[o])&&!(yr&&!b(qt,ge(k,mt,"")))){if(k)return!1}}}}}return!0},nr=function(o){return o.indexOf("-")>0},wt=function(o){var S,k,ie,he;qe("beforeSanitizeAttributes",o,null);var ke=o.attributes;if(ke){var Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(he=ke.length;he--;){var _t=S=ke[he],ze=_t.name,X=_t.namespaceURI;if(k=ze==="value"?S.value:p(S.value),ie=We(ze),Ce.attrName=ie,Ce.attrValue=k,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,qe("uponSanitizeAttribute",o,Ce),k=Ce.attrValue,!Ce.forceKeepAttr&&(Sr(ze,o),Ce.keepAttr))if(b(/\/>/i,k))Sr(ze,o);else{at&&(k=ge(k,Dt," "),k=ge(k,Ut," "));var rt=We(o.nodeName);if(Pr(rt,ie,k))try{X?o.setAttributeNS(X,ze,k):o.setAttribute(ze,k),ae(j.removed)}catch{}}}qe("afterSanitizeAttributes",o,null)}},or=function o(S){var k,ie=bt(S);for(qe("beforeSanitizeShadowDOM",S,null);k=ie.nextNode();)qe("uponSanitizeShadowNode",k,null),rr(k)||(k.content instanceof ce&&o(k.content),wt(k));qe("afterSanitizeShadowDOM",S,null)};return j.sanitize=function(o,S){var k,ie,he,ke,Ce;if((_r=!o)&&(o="<!-->"),typeof o!="string"&&!vt(o)){if(typeof o.toString!="function")throw D("toString is not a function");if(typeof(o=o.toString())!="string")throw D("dirty is not a string, aborting")}if(!j.isSupported){if(f(C.toStaticHTML)==="object"||typeof C.toStaticHTML=="function"){if(typeof o=="string")return C.toStaticHTML(o);if(vt(o))return C.toStaticHTML(o.outerHTML)}return o}if(Jt||Xt(S),j.removed=[],typeof o=="string"&&(tt=!1),tt){if(o.nodeName){var _t=We(o.nodeName);if(!ve[_t]||yt[_t])throw D("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof Qe)(ie=(k=xr("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&ie.nodeName==="BODY"||ie.nodeName==="HTML"?k=ie:k.appendChild(ie);else{if(!et&&!at&&!re&&o.indexOf("<")===-1)return Ge&&ct?Ge.createHTML(o):o;if(!(k=xr(o)))return et?null:ct?fr:""}k&&Zt&&Ue(k.firstChild);for(var ze=bt(tt?o:k);he=ze.nextNode();)he.nodeType===3&&he===ke||rr(he)||(he.content instanceof ce&&or(he.content),wt(he),ke=he);if(ke=null,tt)return o;if(et){if(Ve)for(Ce=gr.call(k.ownerDocument);k.firstChild;)Ce.appendChild(k.firstChild);else Ce=k;return we.shadowroot&&(Ce=Rt.call(W,Ce,!0)),Ce}var X=re?k.outerHTML:k.innerHTML;return re&&ve["!doctype"]&&k.ownerDocument&&k.ownerDocument.doctype&&k.ownerDocument.doctype.name&&b(cr,k.ownerDocument.doctype.name)&&(X="<!DOCTYPE "+k.ownerDocument.doctype.name+`>
`+X),at&&(X=ge(X,Dt," "),X=ge(X,Ut," ")),Ge&&ct?Ge.createHTML(X):X},j.setConfig=function(o){Xt(o),Jt=!0},j.clearConfig=function(){ut=null,Jt=!1},j.isValidAttribute=function(o,S,k){ut||Xt({});var ie=We(o),he=We(S);return Pr(ie,he,k)},j.addHook=function(o,S){typeof S=="function"&&(_e[o]=_e[o]||[],be(_e[o],S))},j.removeHook=function(o){if(_e[o])return ae(_e[o])},j.removeHooks=function(o){_e[o]&&(_e[o]=[])},j.removeAllHooks=function(){_e={}},j}return dt()}()},729:R=>{var f=Object.prototype.hasOwnProperty,O="~";function M(){}function P(h,w,_){this.fn=h,this.context=w,this.once=_||!1}function N(h,w,_,q,F){if(typeof _!="function")throw new TypeError("The listener must be a function");var z=new P(_,q||h,F),J=O?O+w:w;return h._events[J]?h._events[J].fn?h._events[J]=[h._events[J],z]:h._events[J].push(z):(h._events[J]=z,h._eventsCount++),h}function ee(h,w){--h._eventsCount==0?h._events=new M:delete h._events[w]}function v(){this._events=new M,this._eventsCount=0}Object.create&&(M.prototype=Object.create(null),new M().__proto__||(O=!1)),v.prototype.eventNames=function(){var h,w,_=[];if(this._eventsCount===0)return _;for(w in h=this._events)f.call(h,w)&&_.push(O?w.slice(1):w);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(h)):_},v.prototype.listeners=function(h){var w=O?O+h:h,_=this._events[w];if(!_)return[];if(_.fn)return[_.fn];for(var q=0,F=_.length,z=new Array(F);q<F;q++)z[q]=_[q].fn;return z},v.prototype.listenerCount=function(h){var w=O?O+h:h,_=this._events[w];return _?_.fn?1:_.length:0},v.prototype.emit=function(h,w,_,q,F,z){var J=O?O+h:h;if(!this._events[J])return!1;var I,$,s=this._events[J],c=arguments.length;if(s.fn){switch(s.once&&this.removeListener(h,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,w),!0;case 3:return s.fn.call(s.context,w,_),!0;case 4:return s.fn.call(s.context,w,_,q),!0;case 5:return s.fn.call(s.context,w,_,q,F),!0;case 6:return s.fn.call(s.context,w,_,q,F,z),!0}for($=1,I=new Array(c-1);$<c;$++)I[$-1]=arguments[$];s.fn.apply(s.context,I)}else{var m,x=s.length;for($=0;$<x;$++)switch(s[$].once&&this.removeListener(h,s[$].fn,void 0,!0),c){case 1:s[$].fn.call(s[$].context);break;case 2:s[$].fn.call(s[$].context,w);break;case 3:s[$].fn.call(s[$].context,w,_);break;case 4:s[$].fn.call(s[$].context,w,_,q);break;default:if(!I)for(m=1,I=new Array(c-1);m<c;m++)I[m-1]=arguments[m];s[$].fn.apply(s[$].context,I)}}return!0},v.prototype.on=function(h,w,_){return N(this,h,w,_,!1)},v.prototype.once=function(h,w,_){return N(this,h,w,_,!0)},v.prototype.removeListener=function(h,w,_,q){var F=O?O+h:h;if(!this._events[F])return this;if(!w)return ee(this,F),this;var z=this._events[F];if(z.fn)z.fn!==w||q&&!z.once||_&&z.context!==_||ee(this,F);else{for(var J=0,I=[],$=z.length;J<$;J++)(z[J].fn!==w||q&&!z[J].once||_&&z[J].context!==_)&&I.push(z[J]);I.length?this._events[F]=I.length===1?I[0]:I:ee(this,F)}return this},v.prototype.removeAllListeners=function(h){var w;return h?(w=O?O+h:h,this._events[w]&&ee(this,w)):(this._events=new M,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=O,v.EventEmitter=v,R.exports=v},717:R=>{typeof Object.create=="function"?R.exports=function(f,O){f.super_=O,f.prototype=Object.create(O.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:R.exports=function(f,O){f.super_=O;var M=function(){};M.prototype=O.prototype,f.prototype=new M,f.prototype.constructor=f}},824:R=>{var f=1e3,O=60*f,M=60*O,P=24*M,N=7*P,ee=365.25*P;function v(h,w,_,q){var F=w>=1.5*_;return Math.round(h/_)+" "+q+(F?"s":"")}R.exports=function(h,w){w=w||{};var _=typeof h;if(_==="string"&&h.length>0)return function(q){if(!((q=String(q)).length>100)){var F=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(q);if(F){var z=parseFloat(F[1]);switch((F[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return z*ee;case"weeks":case"week":case"w":return z*N;case"days":case"day":case"d":return z*P;case"hours":case"hour":case"hrs":case"hr":case"h":return z*M;case"minutes":case"minute":case"mins":case"min":case"m":return z*O;case"seconds":case"second":case"secs":case"sec":case"s":return z*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return z;default:return}}}}(h);if(_==="number"&&isFinite(h))return w.long?function(q){var F=Math.abs(q);return F>=P?v(q,F,P,"day"):F>=M?v(q,F,M,"hour"):F>=O?v(q,F,O,"minute"):F>=f?v(q,F,f,"second"):q+" ms"}(h):function(q){var F=Math.abs(q);return F>=P?Math.round(q/P)+"d":F>=M?Math.round(q/M)+"h":F>=O?Math.round(q/O)+"m":F>=f?Math.round(q/f)+"s":q+"ms"}(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},520:(R,f,O)=>{var M=O(155),P=M.platform==="win32",N=O(539);function ee(s,c){for(var m=[],x=0;x<s.length;x++){var Z=s[x];Z&&Z!=="."&&(Z===".."?m.length&&m[m.length-1]!==".."?m.pop():c&&m.push(".."):m.push(Z))}return m}function v(s){for(var c=s.length-1,m=0;m<=c&&!s[m];m++);for(var x=c;x>=0&&!s[x];x--);return m===0&&x===c?s:m>x?[]:s.slice(m,x+1)}var h=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,w=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,_={};function q(s){var c=h.exec(s),m=(c[1]||"")+(c[2]||""),x=c[3]||"",Z=w.exec(x);return[m,Z[1],Z[2],Z[3]]}function F(s){var c=h.exec(s),m=c[1]||"",x=!!m&&m[1]!==":";return{device:m,isUnc:x,isAbsolute:x||!!c[2],tail:c[3]}}function z(s){return"\\\\"+s.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}_.resolve=function(){for(var s="",c="",m=!1,x=arguments.length-1;x>=-1;x--){var Z;if(x>=0?Z=arguments[x]:s?(Z=M.env["="+s])&&Z.substr(0,3).toLowerCase()===s.toLowerCase()+"\\"||(Z=s+"\\"):Z=M.cwd(),!N.isString(Z))throw new TypeError("Arguments to path.resolve must be strings");if(Z){var te=F(Z),ae=te.device,be=te.isUnc,Se=te.isAbsolute,xe=te.tail;if((!ae||!s||ae.toLowerCase()===s.toLowerCase())&&(s||(s=ae),m||(c=xe+"\\"+c,m=Se),s&&m))break}}return be&&(s=z(s)),s+(m?"\\":"")+(c=ee(c.split(/[\\\/]+/),!m).join("\\"))||"."},_.normalize=function(s){var c=F(s),m=c.device,x=c.isUnc,Z=c.isAbsolute,te=c.tail,ae=/[\\\/]$/.test(te);return(te=ee(te.split(/[\\\/]+/),!Z).join("\\"))||Z||(te="."),te&&ae&&(te+="\\"),x&&(m=z(m)),m+(Z?"\\":"")+te},_.isAbsolute=function(s){return F(s).isAbsolute},_.join=function(){for(var s=[],c=0;c<arguments.length;c++){var m=arguments[c];if(!N.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&s.push(m)}var x=s.join("\\");return/^[\\\/]{2}[^\\\/]/.test(s[0])||(x=x.replace(/^[\\\/]{2,}/,"\\")),_.normalize(x)},_.relative=function(s,c){s=_.resolve(s),c=_.resolve(c);for(var m=s.toLowerCase(),x=c.toLowerCase(),Z=v(c.split("\\")),te=v(m.split("\\")),ae=v(x.split("\\")),be=Math.min(te.length,ae.length),Se=be,xe=0;xe<be;xe++)if(te[xe]!==ae[xe]){Se=xe;break}if(Se==0)return c;var ge=[];for(xe=Se;xe<te.length;xe++)ge.push("..");return(ge=ge.concat(Z.slice(Se))).join("\\")},_._makeLong=function(s){if(!N.isString(s))return s;if(!s)return"";var c=_.resolve(s);return/^[a-zA-Z]\:\\/.test(c)?"\\\\?\\"+c:/^\\\\[^?.]/.test(c)?"\\\\?\\UNC\\"+c.substring(2):s},_.dirname=function(s){var c=q(s),m=c[0],x=c[1];return m||x?(x&&(x=x.substr(0,x.length-1)),m+x):"."},_.basename=function(s,c){var m=q(s)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},_.extname=function(s){return q(s)[3]},_.format=function(s){if(!N.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var c=s.root||"";if(!N.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);var m=s.dir,x=s.base||"";return m?m[m.length-1]===_.sep?m+x:m+_.sep+x:x},_.parse=function(s){if(!N.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var c=q(s);if(!c||c.length!==4)throw new TypeError("Invalid path '"+s+"'");return{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},_.sep="\\",_.delimiter=";";var J=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,I={};function $(s){return J.exec(s).slice(1)}I.resolve=function(){for(var s="",c=!1,m=arguments.length-1;m>=-1&&!c;m--){var x=m>=0?arguments[m]:M.cwd();if(!N.isString(x))throw new TypeError("Arguments to path.resolve must be strings");x&&(s=x+"/"+s,c=x[0]==="/")}return(c?"/":"")+(s=ee(s.split("/"),!c).join("/"))||"."},I.normalize=function(s){var c=I.isAbsolute(s),m=s&&s[s.length-1]==="/";return(s=ee(s.split("/"),!c).join("/"))||c||(s="."),s&&m&&(s+="/"),(c?"/":"")+s},I.isAbsolute=function(s){return s.charAt(0)==="/"},I.join=function(){for(var s="",c=0;c<arguments.length;c++){var m=arguments[c];if(!N.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(s+=s?"/"+m:m)}return I.normalize(s)},I.relative=function(s,c){s=I.resolve(s).substr(1),c=I.resolve(c).substr(1);for(var m=v(s.split("/")),x=v(c.split("/")),Z=Math.min(m.length,x.length),te=Z,ae=0;ae<Z;ae++)if(m[ae]!==x[ae]){te=ae;break}var be=[];for(ae=te;ae<m.length;ae++)be.push("..");return(be=be.concat(x.slice(te))).join("/")},I._makeLong=function(s){return s},I.dirname=function(s){var c=$(s),m=c[0],x=c[1];return m||x?(x&&(x=x.substr(0,x.length-1)),m+x):"."},I.basename=function(s,c){var m=$(s)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},I.extname=function(s){return $(s)[3]},I.format=function(s){if(!N.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var c=s.root||"";if(!N.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+I.sep:"")+(s.base||"")},I.parse=function(s){if(!N.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var c=$(s);if(!c||c.length!==4)throw new TypeError("Invalid path '"+s+"'");return c[1]=c[1]||"",c[2]=c[2]||"",c[3]=c[3]||"",{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},I.sep="/",I.delimiter=":",R.exports=P?_:I,R.exports.posix=I,R.exports.win32=_},155:R=>{var f,O,M=R.exports={};function P(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}function ee(I){if(f===setTimeout)return setTimeout(I,0);if((f===P||!f)&&setTimeout)return f=setTimeout,setTimeout(I,0);try{return f(I,0)}catch{try{return f.call(null,I,0)}catch{return f.call(this,I,0)}}}(function(){try{f=typeof setTimeout=="function"?setTimeout:P}catch{f=P}try{O=typeof clearTimeout=="function"?clearTimeout:N}catch{O=N}})();var v,h=[],w=!1,_=-1;function q(){w&&v&&(w=!1,v.length?h=v.concat(h):_=-1,h.length&&F())}function F(){if(!w){var I=ee(q);w=!0;for(var $=h.length;$;){for(v=h,h=[];++_<$;)v&&v[_].run();_=-1,$=h.length}v=null,w=!1,function(s){if(O===clearTimeout)return clearTimeout(s);if((O===N||!O)&&clearTimeout)return O=clearTimeout,clearTimeout(s);try{O(s)}catch{try{return O.call(null,s)}catch{return O.call(this,s)}}}(I)}}function z(I,$){this.fun=I,this.array=$}function J(){}M.nextTick=function(I){var $=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)$[s-1]=arguments[s];h.push(new z(I,$)),h.length!==1||w||ee(F)},z.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=J,M.addListener=J,M.once=J,M.off=J,M.removeListener=J,M.removeAllListeners=J,M.emit=J,M.prependListener=J,M.prependOnceListener=J,M.listeners=function(I){return[]},M.binding=function(I){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(I){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},384:R=>{R.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},539:(R,f,O)=>{var M=O(155),P=/%[sdj%]/g;f.format=function(p){if(!s(p)){for(var b=[],D=0;D<arguments.length;D++)b.push(v(arguments[D]));return b.join(" ")}D=1;for(var ne=arguments,Pe=ne.length,U=String(p).replace(P,function(pe){if(pe==="%%")return"%";if(D>=Pe)return pe;switch(pe){case"%s":return String(ne[D++]);case"%d":return Number(ne[D++]);case"%j":try{return JSON.stringify(ne[D++])}catch{return"[Circular]"}default:return pe}}),K=ne[D];D<Pe;K=ne[++D])I(K)||!x(K)?U+=" "+K:U+=" "+v(K);return U},f.deprecate=function(p,b){if(c(O.g.process))return function(){return f.deprecate(p,b).apply(this,arguments)};if(M.noDeprecation===!0)return p;var D=!1;return function(){if(!D){if(M.throwDeprecation)throw new Error(b);M.traceDeprecation?console.trace(b):console.error(b),D=!0}return p.apply(this,arguments)}};var N,ee={};function v(p,b){var D={seen:[],stylize:w};return arguments.length>=3&&(D.depth=arguments[2]),arguments.length>=4&&(D.colors=arguments[3]),J(b)?D.showHidden=b:b&&f._extend(D,b),c(D.showHidden)&&(D.showHidden=!1),c(D.depth)&&(D.depth=2),c(D.colors)&&(D.colors=!1),c(D.customInspect)&&(D.customInspect=!0),D.colors&&(D.stylize=h),_(D,p,D.depth)}function h(p,b){var D=v.styles[b];return D?"\x1B["+v.colors[D][0]+"m"+p+"\x1B["+v.colors[D][1]+"m":p}function w(p,b){return p}function _(p,b,D){if(p.customInspect&&b&&ae(b.inspect)&&b.inspect!==f.inspect&&(!b.constructor||b.constructor.prototype!==b)){var ne=b.inspect(D,p);return s(ne)||(ne=_(p,ne,D)),ne}var Pe=function(me,de){if(c(de))return me.stylize("undefined","undefined");if(s(de)){var je="'"+JSON.stringify(de).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return me.stylize(je,"string")}if($(de))return me.stylize(""+de,"number");if(J(de))return me.stylize(""+de,"boolean");if(I(de))return me.stylize("null","null")}(p,b);if(Pe)return Pe;var U=Object.keys(b),K=function(me){var de={};return me.forEach(function(je,Ae){de[je]=!0}),de}(U);if(p.showHidden&&(U=Object.getOwnPropertyNames(b)),te(b)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return q(b);if(U.length===0){if(ae(b)){var pe=b.name?": "+b.name:"";return p.stylize("[Function"+pe+"]","special")}if(m(b))return p.stylize(RegExp.prototype.toString.call(b),"regexp");if(Z(b))return p.stylize(Date.prototype.toString.call(b),"date");if(te(b))return q(b)}var Ie,Oe="",Be=!1,nt=["{","}"];return z(b)&&(Be=!0,nt=["[","]"]),ae(b)&&(Oe=" [Function"+(b.name?": "+b.name:"")+"]"),m(b)&&(Oe=" "+RegExp.prototype.toString.call(b)),Z(b)&&(Oe=" "+Date.prototype.toUTCString.call(b)),te(b)&&(Oe=" "+q(b)),U.length!==0||Be&&b.length!=0?D<0?m(b)?p.stylize(RegExp.prototype.toString.call(b),"regexp"):p.stylize("[Object]","special"):(p.seen.push(b),Ie=Be?function(me,de,je,Ae,Le){for(var Fe=[],De=0,Mt=de.length;De<Mt;++De)Me(de,String(De))?Fe.push(F(me,de,je,Ae,String(De),!0)):Fe.push("");return Le.forEach(function(Ct){Ct.match(/^\d+$/)||Fe.push(F(me,de,je,Ae,Ct,!0))}),Fe}(p,b,D,K,U):U.map(function(me){return F(p,b,D,K,me,Be)}),p.seen.pop(),function(me,de,je){return me.reduce(function(Ae,Le){return Le.indexOf(`
`)>=0,Ae+Le.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?je[0]+(de===""?"":de+`
 `)+" "+me.join(`,
  `)+" "+je[1]:je[0]+de+" "+me.join(", ")+" "+je[1]}(Ie,Oe,nt)):nt[0]+Oe+nt[1]}function q(p){return"["+Error.prototype.toString.call(p)+"]"}function F(p,b,D,ne,Pe,U){var K,pe,Ie;if((Ie=Object.getOwnPropertyDescriptor(b,Pe)||{value:b[Pe]}).get?pe=Ie.set?p.stylize("[Getter/Setter]","special"):p.stylize("[Getter]","special"):Ie.set&&(pe=p.stylize("[Setter]","special")),Me(ne,Pe)||(K="["+Pe+"]"),pe||(p.seen.indexOf(Ie.value)<0?(pe=I(D)?_(p,Ie.value,null):_(p,Ie.value,D-1)).indexOf(`
`)>-1&&(pe=U?pe.split(`
`).map(function(Oe){return"  "+Oe}).join(`
`).substr(2):`
`+pe.split(`
`).map(function(Oe){return"   "+Oe}).join(`
`)):pe=p.stylize("[Circular]","special")),c(K)){if(U&&Pe.match(/^\d+$/))return pe;(K=JSON.stringify(""+Pe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(K=K.substr(1,K.length-2),K=p.stylize(K,"name")):(K=K.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),K=p.stylize(K,"string"))}return K+": "+pe}function z(p){return Array.isArray(p)}function J(p){return typeof p=="boolean"}function I(p){return p===null}function $(p){return typeof p=="number"}function s(p){return typeof p=="string"}function c(p){return p===void 0}function m(p){return x(p)&&be(p)==="[object RegExp]"}function x(p){return typeof p=="object"&&p!==null}function Z(p){return x(p)&&be(p)==="[object Date]"}function te(p){return x(p)&&(be(p)==="[object Error]"||p instanceof Error)}function ae(p){return typeof p=="function"}function be(p){return Object.prototype.toString.call(p)}function Se(p){return p<10?"0"+p.toString(10):p.toString(10)}f.debuglog=function(p){if(c(N)&&(N=M.env.NODE_DEBUG||""),p=p.toUpperCase(),!ee[p])if(new RegExp("\\b"+p+"\\b","i").test(N)){var b=M.pid;ee[p]=function(){var D=f.format.apply(f,arguments);console.error("%s %d: %s",p,b,D)}}else ee[p]=function(){};return ee[p]},f.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},f.isArray=z,f.isBoolean=J,f.isNull=I,f.isNullOrUndefined=function(p){return p==null},f.isNumber=$,f.isString=s,f.isSymbol=function(p){return typeof p=="symbol"},f.isUndefined=c,f.isRegExp=m,f.isObject=x,f.isDate=Z,f.isError=te,f.isFunction=ae,f.isPrimitive=function(p){return p===null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||typeof p=="symbol"||p===void 0},f.isBuffer=O(384);var xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ge(){var p=new Date,b=[Se(p.getHours()),Se(p.getMinutes()),Se(p.getSeconds())].join(":");return[p.getDate(),xe[p.getMonth()],b].join(" ")}function Me(p,b){return Object.prototype.hasOwnProperty.call(p,b)}f.log=function(){console.log("%s - %s",ge(),f.format.apply(f,arguments))},f.inherits=O(717),f._extend=function(p,b){if(!b||!x(b))return p;for(var D=Object.keys(b),ne=D.length;ne--;)p[D[ne]]=b[D[ne]];return p}}},H={};function B(R){var f=H[R];if(f!==void 0)return f.exports;var O=H[R]={exports:{}};return A[R].call(O.exports,O,O.exports,B),O.exports}B.n=R=>{var f=R&&R.__esModule?()=>R.default:()=>R;return B.d(f,{a:f}),f},B.d=(R,f)=>{for(var O in f)B.o(f,O)&&!B.o(R,O)&&Object.defineProperty(R,O,{enumerable:!0,get:f[O]})},B.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),B.o=(R,f)=>Object.prototype.hasOwnProperty.call(R,f),B.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var ue={};return(()=>{B.r(ue),B.d(ue,{LSPluginUser:()=>an,setupPluginUserInstance:()=>Bn});var R=B(520);B(856);const f=function(){this.__data__=[],this.size=0},O=function(t,e){return t===e||t!=t&&e!=e},M=function(t,e){for(var r=t.length;r--;)if(O(t[r][0],e))return r;return-1};var P=Array.prototype.splice;const N=function(t){var e=this.__data__,r=M(e,t);return!(r<0)&&(r==e.length-1?e.pop():P.call(e,r,1),--this.size,!0)},ee=function(t){var e=this.__data__,r=M(e,t);return r<0?void 0:e[r][1]},v=function(t){return M(this.__data__,t)>-1},h=function(t,e){var r=this.__data__,n=M(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function w(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}w.prototype.clear=f,w.prototype.delete=N,w.prototype.get=ee,w.prototype.has=v,w.prototype.set=h;const _=w,q=function(){this.__data__=new _,this.size=0},F=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},z=function(t){return this.__data__.get(t)},J=function(t){return this.__data__.has(t)},I=typeof Tr=="object"&&Tr&&Tr.Object===Object&&Tr;var $=typeof self=="object"&&self&&self.Object===Object&&self;const s=I||$||Function("return this")(),c=s.Symbol;var m=Object.prototype,x=m.hasOwnProperty,Z=m.toString,te=c?c.toStringTag:void 0;const ae=function(t){var e=x.call(t,te),r=t[te];try{t[te]=void 0;var n=!0}catch{}var i=Z.call(t);return n&&(e?t[te]=r:delete t[te]),i};var be=Object.prototype.toString;const Se=function(t){return be.call(t)};var xe=c?c.toStringTag:void 0;const ge=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":xe&&xe in Object(t)?ae(t):Se(t)},Me=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},p=function(t){if(!Me(t))return!1;var e=ge(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},b=s["__core-js_shared__"];var D,ne=(D=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"";const Pe=function(t){return!!ne&&ne in t};var U=Function.prototype.toString;const K=function(t){if(t!=null){try{return U.call(t)}catch{}try{return t+""}catch{}}return""};var pe=/^\[object .+?Constructor\]$/,Ie=Function.prototype,Oe=Object.prototype,Be=Ie.toString,nt=Oe.hasOwnProperty,me=RegExp("^"+Be.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const de=function(t){return!(!Me(t)||Pe(t))&&(p(t)?me:pe).test(K(t))},je=function(t,e){return t?.[e]},Ae=function(t,e){var r=je(t,e);return de(r)?r:void 0},Le=Ae(s,"Map"),Fe=Ae(Object,"create"),De=function(){this.__data__=Fe?Fe(null):{},this.size=0},Mt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Ct=Object.prototype.hasOwnProperty;const Fr=function(t){var e=this.__data__;if(Fe){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return Ct.call(e,t)?e[t]:void 0};var Nr=Object.prototype.hasOwnProperty;const $r=function(t){var e=this.__data__;return Fe?e[t]!==void 0:Nr.call(e,t)},Rr=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Fe&&e===void 0?"__lodash_hash_undefined__":e,this};function ot(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ot.prototype.clear=De,ot.prototype.delete=Mt,ot.prototype.get=Fr,ot.prototype.has=$r,ot.prototype.set=Rr;const cr=ot,Dr=function(){this.size=0,this.__data__={hash:new cr,map:new(Le||_),string:new cr}},Ur=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},dt=function(t,e){var r=t.__data__;return Ur(e)?r[typeof e=="string"?"string":"hash"]:r.map},C=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},j=function(t){return dt(this,t).get(t)},W=function(t){return dt(this,t).has(t)},Q=function(t,e){var r=dt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ce(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ce.prototype.clear=Dr,ce.prototype.delete=C,ce.prototype.get=j,ce.prototype.has=W,ce.prototype.set=Q;const Ne=ce,Qe=function(t,e){var r=this.__data__;if(r instanceof _){var n=r.__data__;if(!Le||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ne(n)}return r.set(t,e),this.size=r.size,this};function $e(t){var e=this.__data__=new _(t);this.size=e.size}$e.prototype.clear=q,$e.prototype.delete=F,$e.prototype.get=z,$e.prototype.has=J,$e.prototype.set=Qe;const Xe=$e,ft=function(){try{var t=Ae(Object,"defineProperty");return t({},"",{}),t}catch{}}(),St=function(t,e,r){e=="__proto__"&&ft?ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Ft=function(t,e,r){(r!==void 0&&!O(t[e],r)||r===void 0&&!(e in t))&&St(t,e,r)},lr=function(t){return function(e,r,n){for(var i=-1,a=Object(e),l=n(e),u=l.length;u--;){var g=l[t?u:++i];if(r(a[g],g,a)===!1)break}return e}}();var ur=y&&!y.nodeType&&y,ht=ur&&!0&&d&&!d.nodeType&&d,pr=ht&&ht.exports===ur?s.Buffer:void 0,dr=pr?pr.allocUnsafe:void 0;const qr=function(t,e){if(e)return t.slice();var r=t.length,n=dr?dr(r):new t.constructor(r);return t.copy(n),n},it=s.Uint8Array,Nt=function(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e},Ge=function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},fr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var gt=Object.create;const $t=function(){function t(){}return function(e){if(!Me(e))return{};if(gt)return gt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),hr=function(t,e){return function(r){return t(e(r))}},gr=hr(Object.getPrototypeOf,Object);var zr=Object.prototype;const Rt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||zr)},mr=function(t){return typeof t.constructor!="function"||Rt(t)?{}:$t(gr(t))},_e=function(t){return t!=null&&typeof t=="object"},st=function(t){return _e(t)&&ge(t)=="[object Arguments]"};var We=Object.prototype,Dt=We.hasOwnProperty,Ut=We.propertyIsEnumerable;const xt=st(function(){return arguments}())?st:function(t){return _e(t)&&Dt.call(t,"callee")&&!Ut.call(t,"callee")},Te=Array.isArray,qt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},mt=function(t){return t!=null&&qt(t.length)&&!p(t)},zt=function(t){return _e(t)&&mt(t)},ve=function(){return!1};var Ht=y&&!y.nodeType&&y,we=Ht&&!0&&d&&!d.nodeType&&d,Bt=we&&we.exports===Ht?s.Buffer:void 0;const le=(Bt?Bt.isBuffer:void 0)||ve;var yt=Function.prototype,Gt=Object.prototype,Wt=yt.toString,Vt=Gt.hasOwnProperty,yr=Wt.call(Object);const at=function(t){if(!_e(t)||ge(t)!="[object Object]")return!1;var e=gr(t);if(e===null)return!0;var r=Vt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Wt.call(r)==yr};var re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Arguments]"]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;const Jt=function(t){return _e(t)&&qt(t.length)&&!!re[ge(t)]},Zt=function(t){return function(e){return t(e)}};var et=y&&!y.nodeType&&y,Ve=et&&!0&&d&&!d.nodeType&&d,ct=Ve&&Ve.exports===et&&I.process,Kt=function(){try{var t=Ve&&Ve.require&&Ve.require("util").types;return t||ct&&ct.binding&&ct.binding("util")}catch{}}(),Pt=Kt&&Kt.isTypedArray;const tt=Pt?Zt(Pt):Jt,Je=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var lt=Object.prototype.hasOwnProperty;const br=function(t,e,r){var n=t[e];lt.call(t,e)&&O(n,r)&&(r!==void 0||e in t)||St(t,e,r)},vr=function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,l=e.length;++a<l;){var u=e[a],g=n?n(r[u],t[u],u,r,t):void 0;g===void 0&&(g=t[u]),i?St(r,u,g):br(r,u,g)}return r},wr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Yt=/^(?:0|[1-9]\d*)$/;const Ot=function(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&(r=="number"||r!="symbol"&&Yt.test(t))&&t>-1&&t%1==0&&t<e};var Qt=Object.prototype.hasOwnProperty;const jt=function(t,e){var r=Te(t),n=!r&&xt(t),i=!r&&!n&&le(t),a=!r&&!n&&!i&&tt(t),l=r||n||i||a,u=l?wr(t.length,String):[],g=u.length;for(var E in t)!e&&!Qt.call(t,E)||l&&(E=="length"||i&&(E=="offset"||E=="parent")||a&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||Ot(E,g))||u.push(E);return u},Ze=function(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e};var At=Object.prototype.hasOwnProperty;const _r=function(t){if(!Me(t))return Ze(t);var e=Rt(t),r=[];for(var n in t)(n!="constructor"||!e&&At.call(t,n))&&r.push(n);return r},kr=function(t){return mt(t)?jt(t,!0):_r(t)},Hr=function(t){return vr(t,kr(t))},ut=function(t,e,r,n,i,a,l){var u=Je(t,r),g=Je(e,r),E=l.get(g);if(E)Ft(t,r,E);else{var L=a?a(u,g,r+"",t,e,l):void 0,T=L===void 0;if(T){var G=Te(g),Y=!G&&le(g),V=!G&&!Y&&tt(g);L=g,G||Y||V?Te(u)?L=u:zt(u)?L=fr(u):Y?(T=!1,L=qr(g,!0)):V?(T=!1,L=Ge(g,!0)):L=[]:at(g)||xt(g)?(L=u,xt(u)?L=Hr(u):Me(u)&&!p(u)||(L=mr(g))):T=!1}T&&(l.set(g,L),i(L,g,n,a,l),l.delete(g)),Ft(t,r,L)}},Br=function t(e,r,n,i,a){e!==r&&lr(r,function(l,u){if(a||(a=new Xe),Me(l))ut(e,r,u,n,t,i,a);else{var g=i?i(Je(e,u),l,u+"",e,r,a):void 0;g===void 0&&(g=l),Ft(e,u,g)}},kr)},It=function(t){return t},Xt=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)};var er=Math.max;const Cr=function(t,e,r){return e=er(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=er(n.length-e,0),l=Array(a);++i<a;)l[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=r(l),Xt(t,this,u)}},Gr=function(t){return function(){return t}},Et=ft?function(t,e){return ft(t,"toString",{configurable:!0,enumerable:!1,value:Gr(e),writable:!0})}:It;var tr=Date.now;const Wr=function(t){var e=0,r=0;return function(){var n=tr(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Et),Ue=function(t,e){return Wr(Cr(t,e,It),t+"")},Sr=function(t,e,r){if(!Me(r))return!1;var n=typeof e;return!!(n=="number"?mt(r)&&Ot(e,r.length):n=="string"&&e in r)&&O(r[e],t)},xr=function(t){return Ue(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,l=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,l&&Sr(r[0],r[1],l)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var u=r[n];u&&t(e,u,n,a)}return e})}(function(t,e,r){Br(t,e,r)});var bt=function(){return bt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bt.apply(this,arguments)};function Vr(t){return t.toLowerCase()}var vt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],qe=/[^A-Z0-9]+/gi;function rr(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,i){return n.replace(i,r)},t)}function Pr(t,e){return e===void 0&&(e={}),function(r,n){n===void 0&&(n={});for(var i=n.splitRegexp,a=i===void 0?vt:i,l=n.stripRegexp,u=l===void 0?qe:l,g=n.transform,E=g===void 0?Vr:g,L=n.delimiter,T=L===void 0?" ":L,G=rr(rr(r,a,"$1\0$2"),u,"\0"),Y=0,V=G.length;G.charAt(Y)==="\0";)Y++;for(;G.charAt(V-1)==="\0";)V--;return G.slice(Y,V).split("\0").map(E).join(T)}(t,bt({delimiter:"."},e))}var nr=B(729),wt=B.n(nr);function or(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const o=navigator.platform.toLowerCase()==="win32"?R.win32:R.posix,S=function(t,e){return e===void 0&&(e={}),Pr(t,bt({delimiter:"_"},e))},k=xr;class ie extends wt(){constructor(e,r){super(),or(this,"_tag",void 0),or(this,"_opts",void 0),or(this,"_logs",[]),this._tag=e,this._opts=r}write(e,r,n){var i;r!=null&&r.length&&r[r.length-1]===!0&&(n=!0,r.pop());const a=r.reduce((u,g)=>(g&&g instanceof Error?u+=`${g.message} ${g.stack}`:u+=g.toString(),u),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var l;this._logs.push([e,a]),(n||(i=this._opts)!==null&&i!==void 0&&i.console)&&((l=console)===null||l===void 0||l[e==="ERROR"?"error":"debug"](`${e}: ${a}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function he(t,...e){try{const r=new URL(t);if(!r.origin)throw new Error(null);const n=o.join(t.substr(r.origin.length),...e);return r.origin+n}catch{return o.join(t,...e)}}function ke(t,e){let r,n,i=!1;const a=u=>g=>{t&&clearTimeout(t),u(g),i=!0},l=new Promise((u,g)=>{r=a(u),n=a(g),t&&(t=setTimeout(()=>n(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:u=>e=u,resolve:r,reject:n,promise:l,get settled(){return i}}}const Ce=new Map;window.__injectedUIEffects=Ce;var _t=B(227),ze=B.n(_t);function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const rt="application/x-postmate-v1+json";let hn=0;const no={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},Jr=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===rt&&!!no[t.data.postmate];class oo{constructor(e){X(this,"parent",void 0),X(this,"frame",void 0),X(this,"child",void 0),X(this,"events",{}),X(this,"childOrigin",void 0),X(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=r=>{if(!Jr(r,this.childOrigin))return!1;const{data:n,name:i}=((r||{}).data||{}).value||{};r.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(a=>{a.call(this,n)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...r){return new Promise(n=>{const i=++hn,a=l=>{l.data.uid===i&&l.data.postmate==="reply"&&(this.parent.removeEventListener("message",a,!1),n(l.data.value))};this.parent.addEventListener("message",a,!1),this.child.postMessage({postmate:"request",type:rt,property:e,args:r,uid:i},this.childOrigin)})}call(e,r){this.child.postMessage({postmate:"call",type:rt,property:e,data:r},this.childOrigin)}on(e,r){this.events[e]||(this.events[e]=[]),this.events[e].push(r)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class io{constructor(e){X(this,"model",void 0),X(this,"parent",void 0),X(this,"parentOrigin",void 0),X(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",r=>{if(!Jr(r,this.parentOrigin))return;const{property:n,uid:i,data:a,args:l}=r.data;r.data.postmate!=="call"?((u,g,E)=>{const L=typeof u[g]=="function"?u[g].apply(null,E):u[g];return Promise.resolve(L)})(this.model,n,l).then(u=>{r.source.postMessage({property:n,postmate:"reply",type:rt,uid:i,value:u},r.origin)}):n in this.model&&typeof this.model[n]=="function"&&this.model[n](a)})}emit(e,r){this.parent.postMessage({postmate:"emit",type:rt,value:{name:e,data:r}},this.parentOrigin)}}class Zr{constructor(e){X(this,"container",void 0),X(this,"parent",void 0),X(this,"frame",void 0),X(this,"child",void 0),X(this,"childOrigin",void 0),X(this,"url",void 0),X(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const r=(a=>{const l=document.createElement("a");l.href=a;const u=l.protocol.length>4?l.protocol:window.location.protocol,g=l.host.length?l.port==="80"||l.port==="443"?l.hostname:l.host:window.location.host;return l.origin||`${u}//${g}`})(e=e||this.url);let n,i=0;return new Promise((a,l)=>{const u=E=>!!Jr(E,r)&&(E.data.postmate==="handshake-reply"?(clearInterval(n),this.parent.removeEventListener("message",u,!1),this.childOrigin=E.origin,a(new oo(this))):l("Failed handshake"));this.parent.addEventListener("message",u,!1);const g=()=>{i++,this.child.postMessage({postmate:"handshake",type:rt,model:this.model},r),i===5&&clearInterval(n)};this.frame.addEventListener("load",()=>{g(),n=setInterval(g,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}X(Zr,"debug",!1),X(Zr,"Model",void 0);class so{constructor(e){X(this,"child",void 0),X(this,"model",void 0),X(this,"parent",void 0),X(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,r)=>{const n=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",n,!1),i.source.postMessage({postmate:"handshake-reply",type:rt},i.origin),this.parentOrigin=i.origin;const a=i.data.model;return a&&Object.keys(a).forEach(l=>{this.model[l]=a[l]}),e(new io(this))}return r("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)})}}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const{importHTML:ao,createSandboxContainer:co}=window.QSandbox||{};function lo(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(r,n)=>{try{const i=await window.apis.doAction(["readFile",t]);r({text:()=>i})}catch(i){console.error(i),n(i)}}))}class uo extends wt(){constructor(e){super(),ir(this,"_pluginLocal",void 0),ir(this,"_frame",void 0),ir(this,"_root",void 0),ir(this,"_loaded",!1),ir(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:r}=this._pluginLocal.options;if(this.loaded||!r)return;const{template:n,execScripts:i}=await ao(r,{fetch:lo});this._mount(n,document.body);const a=co(e,{elementGetter:()=>{var u;return(u=this._root)===null||u===void 0?void 0:u.firstChild}}).instance.proxy;a.__shadow_mode__=!0,a.LSPluginLocal=this._pluginLocal,a.LSPluginShadow=this,a.LSPluginUser=a.logseq=new an(this._pluginLocal.toJSON(),this._pluginLocal.caller);const l=await i(a,!0);this._unmountFns.push(l.unmount),this._loaded=!0}_mount(e,r){const n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,r.appendChild(n),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){var e,r;(e=this.frame)===null||e===void 0||(r=e.parentNode)===null||r===void 0||r.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function Ke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const pt=ze()("LSPlugin:caller"),sr="#await#response#",po="#lspmsg#",gn="#lspmsg#error#",Or=t=>`#lspmsg#${t}`;class fo extends wt(){constructor(e){super(),Ke(this,"_pluginLocal",void 0),Ke(this,"_connected",!1),Ke(this,"_parent",void 0),Ke(this,"_child",void 0),Ke(this,"_shadow",void 0),Ke(this,"_status",void 0),Ke(this,"_userModel",{}),Ke(this,"_call",void 0),Ke(this,"_callUserModel",void 0),Ke(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const r=this,n=this._pluginLocal!=null;let i=0;const a=new Map,l=ke(6e4),u=this._extendUserModel({"#lspmsg#ready#":async L=>{u[Or(L?.pid)]=({type:T,payload:G})=>{pt(`[host (_call) -> *user] ${this._debugTag}`,T,G),r.emit(T,G)},await l.resolve()},"#lspmsg#beforeunload#":async L=>{const T=ke(1e4);r.emit("beforeunload",Object.assign({actor:T},L)),await T.promise},"#lspmsg#settings#":async({type:L,payload:T})=>{r.emit("settings:changed",T)},[po]:async({ns:L,type:T,payload:G})=>{pt(`[host (async) -> *user] ${this._debugTag} ns=${L} type=${T}`,G),L&&L.startsWith("hook")?r.emit(`${L}:${T}`,G):r.emit(T,G)},"#lspmsg#reply#":({_sync:L,result:T})=>{if(pt(`[sync host -> *user] #${L}`,T),a.has(L)){const G=a.get(L);G&&(T!=null&&T.hasOwnProperty(gn)?G.reject(T[gn]):G.resolve(T),a.delete(L))}},...e});var g;if(n)return await l.promise,JSON.parse(JSON.stringify((g=this._pluginLocal)===null||g===void 0?void 0:g.toJSON()));const E=new so(u).sendHandshakeReply();return this._status="pending",await E.then(L=>{this._child=L,this._connected=!0,this._call=async(T,G={},Y)=>{if(Y){const V=++i;a.set(V,Y),G._sync=V,Y.setTag(`async call #${V}`),pt(`async call #${V}`)}return L.emit(Or(u.baseInfo.id),{type:T,payload:G}),Y?.promise},this._callUserModel=async(T,G)=>{try{u[T](G)}catch{pt(`[model method] #${T} not existed`)}},setInterval(()=>{if(a.size>100)for(const[T,G]of a)G.settled&&a.delete(T)},18e5)}).finally(()=>{this._status=void 0}),await l.promise,u.baseInfo}async call(e,r={}){var n;return(n=this._call)===null||n===void 0?void 0:n.call(this,e,r)}async callAsync(e,r={}){var n;const i=ke(1e4);return(n=this._call)===null||n===void 0?void 0:n.call(this,e,r,i)}async callUserModel(e,...r){var n;return(n=this._callUserModel)===null||n===void 0?void 0:n.apply(this,[e,...r])}async callUserModelAsync(e,...r){var n;return e=`${sr}${e}`,(n=this._callUserModel)===null||n===void 0?void 0:n.apply(this,[e,...r])}async _setupIframeSandbox(){const e=this._pluginLocal,r=e.id,n=`${r}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);const a=document.querySelector(`#${n}`);a&&a.parentElement.removeChild(a);const l=document.createElement("div");l.classList.add("lsp-iframe-sandbox-container"),l.id=n,l.dataset.pid=r;try{var u;const T=(u=await this._pluginLocal._loadLayoutsData())===null||u===void 0?void 0:u.$$0;if(T){l.dataset.inited_layout="true";let{width:G,height:Y,left:V,top:se,vw:ye,vh:Ee}=T;V=Math.max(V,0),V=typeof ye=="number"?`${Math.min(100*V/ye,99)}%`:`${V}px`,se=Math.max(se,45),se=typeof Ee=="number"?`${Math.min(100*se/Ee,99)}%`:`${se}px`,Object.assign(l.style,{width:G+"px",height:Y+"px",left:V,top:se})}}catch(T){console.error("[Restore Layout Error]",T)}document.body.appendChild(l);const g=new Zr({id:r+"_iframe",container:l,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let E,L=g.sendHandshake();return this._status="pending",new Promise((T,G)=>{E=setTimeout(()=>{G(new Error("handshake Timeout")),g.destroy()},4e3),L.then(Y=>{this._parent=Y,this._connected=!0,this.emit("connected"),Y.on(Or(e.id),({type:V,payload:se})=>{var ye,Ee;pt("[user -> *host] ",V,se),(ye=this._pluginLocal)===null||ye===void 0||ye.emit(V,se||{}),(Ee=this._pluginLocal)===null||Ee===void 0||Ee.caller.emit(V,se||{})}),this._call=async(...V)=>{await Y.call(Or(e.id),{type:V[0],payload:Object.assign(V[1]||{},{$$pid:e.id})})},this._callUserModel=async(V,...se)=>{if(V.startsWith(sr))return await Y.get(V.replace(sr,""),...se);Y.call(V,se?.[0])},T(null)}).catch(Y=>{G(Y)}).finally(()=>{clearTimeout(E)})}).catch(T=>{throw pt("[iframe sandbox] error",T),T}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,r=this._shadow=new uo(e);try{this._status="pending",await r.load(),this._connected=!0,this.emit("connected"),this._call=async(n,i={},a)=>{var l;return a&&(i.actor=a),(l=this._pluginLocal)===null||l===void 0||l.emit(n,Object.assign(i,{$$pid:e.id})),a?.promise},this._callUserModel=async(...n)=>{var i;let a=n[0];(i=a)!==null&&i!==void 0&&i.startsWith(sr)&&(a=a.replace(sr,""));const l=n[1]||{},u=this._userModel[a];typeof u=="function"&&await u.call(null,l)}}catch(n){throw pt("[shadow sandbox] error",n),n}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let r=null;this._parent&&(r=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(r=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=r)===null||e===void 0||e.parentNode.removeChild(r)}}function mn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class yn{constructor(e,r){mn(this,"ctx",void 0),mn(this,"opts",void 0),this.ctx=e,this.opts=r}get ctxId(){return this.ctx.baseInfo.id}setItem(e,r){var n;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,r,(n=this.opts)===null||n===void 0?void 0:n.assets]})}getItem(e){var r;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(r=this.opts)===null||r===void 0?void 0:r.assets]})}removeItem(e){var r;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(r=this.opts)===null||r===void 0?void 0:r.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var r;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(r=this.opts)===null||r===void 0?void 0:r.assets]})}}class ho{constructor(e){var r,n,i;i=void 0,(n="ctx")in(r=this)?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...r){var n,i;const a=this.ensureHostScope();return e=(n=S(e))===null||n===void 0?void 0:n.toLowerCase(),(i=a.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(a,r)}async loadScripts(...e){(e=e.map(r=>r!=null&&r.startsWith("http")?r:this.ctx.resolveResourceFullUrl(r))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,r){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,r)}registerExtensionsEnhancer(e,r){const n=this.ensureHostScope();return e==="katex"&&n.katex&&r(n.katex).catch(console.error),n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,r)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function Lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const bn=t=>`task_callback_${t}`;class go{constructor(e,r,n={}){Lt(this,"_client",void 0),Lt(this,"_requestId",void 0),Lt(this,"_requestOptions",void 0),Lt(this,"_promise",void 0),Lt(this,"_aborted",!1),this._client=e,this._requestId=r,this._requestOptions=n,this._promise=new Promise((u,g)=>{if(!this._requestId)return g(null);this._client.once(bn(this._requestId),E=>{E&&E instanceof Error?g(E):u(E)})});const{success:i,fail:a,final:l}=this._requestOptions;this._promise.then(u=>{i?.(u)}).catch(u=>{a?.(u)}).finally(()=>{l?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Kr extends nr.EventEmitter{constructor(e){super(),Lt(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",r=>{const n=r?.requestId;n&&this.emit(bn(n),r?.payload)})}static createRequestTask(e,r,n){return new go(e,r,n)}async _request(e){const r=this.ctx.baseInfo.id,{success:n,fail:i,final:a,...l}=e,u=this.ctx.Experiments.invokeExperMethod("request",r,l),g=Kr.createRequestTask(this.ctx.Request,u,e);return l.abortable?g:g.promise}get ctx(){return this._ctx}}const mo=hr(Object.keys,Object);var yo=Object.prototype.hasOwnProperty;const bo=function(t){if(!Rt(t))return mo(t);var e=[];for(var r in Object(t))yo.call(t,r)&&r!="constructor"&&e.push(r);return e},Yr=function(t){return mt(t)?jt(t):bo(t)},vo=function(t,e){return t&&lr(t,e,Yr)},wo=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},_o=function(t){return this.__data__.has(t)};function jr(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Ne;++e<r;)this.add(t[e])}jr.prototype.add=jr.prototype.push=wo,jr.prototype.has=_o;const ko=jr,Co=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},So=function(t,e){return t.has(e)},vn=function(t,e,r,n,i,a){var l=1&r,u=t.length,g=e.length;if(u!=g&&!(l&&g>u))return!1;var E=a.get(t),L=a.get(e);if(E&&L)return E==e&&L==t;var T=-1,G=!0,Y=2&r?new ko:void 0;for(a.set(t,e),a.set(e,t);++T<u;){var V=t[T],se=e[T];if(n)var ye=l?n(se,V,T,e,t,a):n(V,se,T,t,e,a);if(ye!==void 0){if(ye)continue;G=!1;break}if(Y){if(!Co(e,function(Ee,Ye){if(!So(Y,Ye)&&(V===Ee||i(V,Ee,r,n,a)))return Y.push(Ye)})){G=!1;break}}else if(V!==se&&!i(V,se,r,n,a)){G=!1;break}}return a.delete(t),a.delete(e),G},xo=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r},Po=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r};var wn=c?c.prototype:void 0,Qr=wn?wn.valueOf:void 0;const Oo=function(t,e,r,n,i,a,l){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new it(t),new it(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return O(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=xo;case"[object Set]":var g=1&n;if(u||(u=Po),t.size!=e.size&&!g)return!1;var E=l.get(t);if(E)return E==e;n|=2,l.set(t,e);var L=vn(u(t),u(e),n,i,a,l);return l.delete(t),L;case"[object Symbol]":if(Qr)return Qr.call(t)==Qr.call(e)}return!1},jo=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},Ao=function(t,e,r){var n=e(t);return Te(t)?n:jo(n,r(t))},Io=function(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var l=t[r];e(l,r,t)&&(a[i++]=l)}return a},Eo=function(){return[]};var Lo=Object.prototype.propertyIsEnumerable,_n=Object.getOwnPropertySymbols;const To=_n?function(t){return t==null?[]:(t=Object(t),Io(_n(t),function(e){return Lo.call(t,e)}))}:Eo,kn=function(t){return Ao(t,Yr,To)};var Mo=Object.prototype.hasOwnProperty;const Fo=function(t,e,r,n,i,a){var l=1&r,u=kn(t),g=u.length;if(g!=kn(e).length&&!l)return!1;for(var E=g;E--;){var L=u[E];if(!(l?L in e:Mo.call(e,L)))return!1}var T=a.get(t),G=a.get(e);if(T&&G)return T==e&&G==t;var Y=!0;a.set(t,e),a.set(e,t);for(var V=l;++E<g;){var se=t[L=u[E]],ye=e[L];if(n)var Ee=l?n(ye,se,L,e,t,a):n(se,ye,L,t,e,a);if(!(Ee===void 0?se===ye||i(se,ye,r,n,a):Ee)){Y=!1;break}V||(V=L=="constructor")}if(Y&&!V){var Ye=t.constructor,Lr=e.constructor;Ye==Lr||!("constructor"in t)||!("constructor"in e)||typeof Ye=="function"&&Ye instanceof Ye&&typeof Lr=="function"&&Lr instanceof Lr||(Y=!1)}return a.delete(t),a.delete(e),Y},Xr=Ae(s,"DataView"),en=Ae(s,"Promise"),tn=Ae(s,"Set"),rn=Ae(s,"WeakMap");var Cn="[object Map]",Sn="[object Promise]",xn="[object Set]",Pn="[object WeakMap]",On="[object DataView]",No=K(Xr),$o=K(Le),Ro=K(en),Do=K(tn),Uo=K(rn),kt=ge;(Xr&&kt(new Xr(new ArrayBuffer(1)))!=On||Le&&kt(new Le)!=Cn||en&&kt(en.resolve())!=Sn||tn&&kt(new tn)!=xn||rn&&kt(new rn)!=Pn)&&(kt=function(t){var e=ge(t),r=e=="[object Object]"?t.constructor:void 0,n=r?K(r):"";if(n)switch(n){case No:return On;case $o:return Cn;case Ro:return Sn;case Do:return xn;case Uo:return Pn}return e});const jn=kt;var An="[object Arguments]",In="[object Array]",Ar="[object Object]",En=Object.prototype.hasOwnProperty;const qo=function(t,e,r,n,i,a){var l=Te(t),u=Te(e),g=l?In:jn(t),E=u?In:jn(e),L=(g=g==An?Ar:g)==Ar,T=(E=E==An?Ar:E)==Ar,G=g==E;if(G&&le(t)){if(!le(e))return!1;l=!0,L=!1}if(G&&!L)return a||(a=new Xe),l||tt(t)?vn(t,e,r,n,i,a):Oo(t,e,g,r,n,i,a);if(!(1&r)){var Y=L&&En.call(t,"__wrapped__"),V=T&&En.call(e,"__wrapped__");if(Y||V){var se=Y?t.value():t,ye=V?e.value():e;return a||(a=new Xe),i(se,ye,r,n,a)}}return!!G&&(a||(a=new Xe),Fo(t,e,r,n,i,a))},Ln=function t(e,r,n,i,a){return e===r||(e==null||r==null||!_e(e)&&!_e(r)?e!=e&&r!=r:qo(e,r,n,i,t,a))},zo=function(t,e,r,n){var i=r.length,a=i,l=!n;if(t==null)return!a;for(t=Object(t);i--;){var u=r[i];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var g=(u=r[i])[0],E=t[g],L=u[1];if(l&&u[2]){if(E===void 0&&!(g in t))return!1}else{var T=new Xe;if(n)var G=n(E,L,g,t,e,T);if(!(G===void 0?Ln(L,E,3,n,T):G))return!1}}return!0},Tn=function(t){return t==t&&!Me(t)},Ho=function(t){for(var e=Yr(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Tn(i)]}return e},Mn=function(t,e){return function(r){return r!=null&&r[t]===e&&(e!==void 0||t in Object(r))}},Bo=function(t){var e=Ho(t);return e.length==1&&e[0][2]?Mn(e[0][0],e[0][1]):function(r){return r===t||zo(r,t,e)}},nn=function(t){return typeof t=="symbol"||_e(t)&&ge(t)=="[object Symbol]"};var Go=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wo=/^\w*$/;const on=function(t,e){if(Te(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!nn(t))||Wo.test(t)||!Go.test(t)||e!=null&&t in Object(e)};function sn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var l=t.apply(this,n);return r.cache=a.set(i,l)||a,l};return r.cache=new(sn.Cache||Ne),r}sn.Cache=Ne;const Vo=sn;var Jo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zo=/\\(\\)?/g;const Ko=function(t){var e=Vo(t,function(n){return r.size===500&&r.clear(),n}),r=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Jo,function(r,n,i,a){e.push(i?a.replace(Zo,"$1"):n||r)}),e}),Yo=function(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i};var Fn=c?c.prototype:void 0,Nn=Fn?Fn.toString:void 0;const Qo=function t(e){if(typeof e=="string")return e;if(Te(e))return Yo(e,t)+"";if(nn(e))return Nn?Nn.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r},Xo=function(t){return t==null?"":Qo(t)},$n=function(t,e){return Te(t)?t:on(t,e)?[t]:Ko(Xo(t))},Ir=function(t){if(typeof t=="string"||nn(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},Rn=function(t,e){for(var r=0,n=(e=$n(e,t)).length;t!=null&&r<n;)t=t[Ir(e[r++])];return r&&r==n?t:void 0},ei=function(t,e,r){var n=t==null?void 0:Rn(t,e);return n===void 0?r:n},ti=function(t,e){return t!=null&&e in Object(t)},ri=function(t,e,r){for(var n=-1,i=(e=$n(e,t)).length,a=!1;++n<i;){var l=Ir(e[n]);if(!(a=t!=null&&r(t,l)))break;t=t[l]}return a||++n!=i?a:!!(i=t==null?0:t.length)&&qt(i)&&Ot(l,i)&&(Te(t)||xt(t))},ni=function(t,e){return t!=null&&ri(t,e,ti)},oi=function(t,e){return on(t)&&Tn(e)?Mn(Ir(t),e):function(r){var n=ei(r,t);return n===void 0&&n===e?ni(r,t):Ln(e,n,3)}},ii=function(t){return function(e){return e?.[t]}},si=function(t){return function(e){return Rn(e,t)}},ai=function(t){return on(t)?ii(Ir(t)):si(t)},ci=function(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?Te(t)?oi(t[0],t[1]):Bo(t):ai(t)},li=function(t,e){var r={};return e=ci(e),vo(t,function(n,i,a){St(r,e(n,i,a),n)}),r};function Dn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ui{constructor(e,r){Dn(this,"ctx",void 0),Dn(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=r,e._execCallableAPI("register-search-service",e.baseInfo.id,r.name,r.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:n=>(Te(n?.blocks)&&(n.blocks=n.blocks.map(i=>i&&li(i,(a,l)=>`block/${l}`))),n)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([n,i])=>{const a=(l=>`service:search:${l}:${r.name}`)(n);e.caller.on(a,async l=>{if(p(r?.[i.f])){let u=null;try{u=await r[i.f].apply(r,(i.args||[]).map(g=>{if(l){if(g===!0)return l;if(l.hasOwnProperty(g)){const E=l[g];return delete l[g],E}}})),i.transformOutput&&(u=i.transformOutput(u))}catch(g){console.error("[SearchService] ",g),u=g}finally{i.reply&&e.caller.call(`${a}:reply`,u)}}})})}}function He(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const pi=Symbol.for("proxy-continue"),di=ze()("LSPlugin:user"),Un=new ie("",{console:!0});function Tt(t,e,r){var n;if(typeof r!="function")return!1;const{key:i,label:a,desc:l,palette:u,keybinding:g,extras:E}=e,L=`SimpleCommandHook${i}${++Hn}`;this.Editor["on"+L](r),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:a,type:t,desc:l,keybinding:g,extras:E},["editor/hook",L]],u]})}function qn(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(Un.error(`#${t} is not a valid UUID string.`),!1);var e}let Er=null,zn=new Map;const fi={async getInfo(t){return Er||(Er=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?Er[t]:Er},registerCommand:Tt,registerSearchService(t){if(zn.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);zn.set(t.name,new ui(this,t))},registerCommandPalette(t,e){const{key:r,label:n,keybinding:i}=t;return Tt.call(this,"$palette$",{key:r,label:n,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){const{binding:r}=t,n="$shortcut$",i=n+S(r);return Tt.call(this,n,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var r;const n=this.baseInfo.id;(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-ui-item",args:[n,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id,n=t;Tt.call(this,"page-menu-item",{key:r,label:n},e)},onBlockRendererSlotted(t,e){if(!qn(t))return;const r=this.baseInfo.id,n=`hook:editor:${S(`slot:${t}`)}`;return this.caller.on(n,e),this.App._installPluginHook(r,n),()=>{this.caller.off(n,e),this.App._uninstallPluginHook(r,n)}},invokeExternalPlugin(t,...e){var r;if(!(t=(r=t)===null||r===void 0?void 0:r.trim()))return;let[n,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const a=t.replace(`${n}.${i}.`,"");if(!n||!i||!a)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",n,i.toLowerCase(),a,e)},setFullScreen(t){const e=(...r)=>this._callWin("setFullScreen",...r);t==="toggle"?this._callWin("isFullScreen").then(r=>{r?e():e(!0)}):t?e(!0):e()}};let Hn=0;const hi={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var r;di("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(n=>{const[i,...a]=n;if(i==="editor/hook"){let l=a[0],u=()=>{var E;(E=this.caller)===null||E===void 0||E.callUserModel(l)};typeof l=="function"&&(u=l);const g=`SlashCommandHook${i}${++Hn}`;n[1]=g,this.Editor["on"+g](u)}return n}),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id;Tt.call(this,"block-context-menu-item",{key:r,label:t},e)},registerHighlightContextMenuItem(t,e,r){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id;Tt.call(this,"highlight-context-menu-item",{key:n,label:t,extras:r},e)},scrollToBlockInPage(t,e,r){const n="block-content-"+e;r!=null&&r.replaceState?this.App.replaceState("page",{name:t},{anchor:n}):this.App.pushState("page",{name:t},{anchor:n})}},gi={onBlockChanged(t,e){if(!qn(t))return;const r=this.baseInfo.id,n=`hook:db:${S(`block:${t}`)}`,i=({block:a,txData:l,txMeta:u})=>{a.uuid===t&&e(a,l,u)};return this.caller.on(n,i),this.App._installPluginHook(r,n),()=>{this.caller.off(n,i),this.App._uninstallPluginHook(r,n)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(r=>typeof r=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},mi={},yi={},bi={makeSandboxStorage(){return new yn(this,{assets:!0})}};class an extends wt(){constructor(e,r){super(),He(this,"_baseInfo",void 0),He(this,"_caller",void 0),He(this,"_version","0.0.14"),He(this,"_debugTag",""),He(this,"_settingsSchema",void 0),He(this,"_connected",!1),He(this,"_ui",new Map),He(this,"_mFileStorage",void 0),He(this,"_mRequest",void 0),He(this,"_mExperiments",void 0),He(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=r,r.on("sys:ui:visible",n=>{n!=null&&n.toggle&&this.toggleMainUI()}),r.on("settings:changed",n=>{const i=Object.assign({},this.settings),a=Object.assign(this._baseInfo.settings,n);this.emit("settings:changed",{...a},i)}),r.on("beforeunload",async n=>{const{actor:i,...a}=n,l=this._beforeunloadCallback;try{l&&await l(a),i?.resolve(null)}catch(u){console.debug(`${r.debugTag} [beforeunload] `,u),i?.reject(u)}})}async ready(e,r){if(!this._connected)try{var n;typeof e=="function"&&(r=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=k(this._baseInfo,i),(n=i)!==null&&n!==void 0&&n.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(a,l){const u=(l||[]).reduce((g,E)=>("default"in E&&(g[E.key]=E.default),g),{});return Object.assign(u,a)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(a){console.warn(a)}r&&r.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const r="settings:changed";return this.on(r,e),()=>this.off(r,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const r={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}showMainUI(e){const r={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}toggleMainUI(){const r=this._ui.get(0);r&&r.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((r=e.baseInfo)===null||r===void 0?void 0:r.effect)||!((n=e.baseInfo)!==null&&n!==void 0&&n.iir));var e,r,n}get logger(){return Un}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),he(this._baseInfo.lsr,e)}_makeUserProxy(e,r){const n=this,i=this.caller;return new Proxy(e,{get(a,l,u){const g=a[l];return function(...E){if(g){const T=g.apply(n,E.concat(r));if(T!==pi)return T}if(r){const T=l.toString().match(/^(once|off|on)/i);if(T!=null){const G=T[0].toLowerCase(),Y=T.input.slice(G.length),V=G==="off",se=n.baseInfo.id,ye=`hook:${r}:${S(Y)}`,Ee=E[0];i[G](ye,Ee);const Ye=()=>{i.off(ye,Ee),i.listenerCount(ye)||n.App._uninstallPluginHook(se,ye)};return V?void Ye():(n.App._installPluginHook(se,ye),Ye)}}let L=l;return["git","ui","assets"].includes(r)&&(L=r+"_"+L),i.callAsync("api:call",{tag:r,method:L,args:E})}}})}_execCallableAPIAsync(e,...r){return this._caller.callAsync("api:call",{method:e,args:r})}_execCallableAPI(e,...r){this._caller.call("api:call",{method:e,args:r})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(fi,"app")}get Editor(){return this._makeUserProxy(hi,"editor")}get DB(){return this._makeUserProxy(gi,"db")}get Git(){return this._makeUserProxy(mi,"git")}get UI(){return this._makeUserProxy(yi,"ui")}get Assets(){return this._makeUserProxy(bi,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new yn(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new Kr(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new ho(this)),e}}function Bn(t,e){return new an(t,e)}if(window.__LSP__HOST__==null){const t=new fo(null);window.logseq=Bn({},t)}})(),ue})())})(vi,cn);const wi={title:"Awesome Props",icon:"./icon.png",id:"logseq-awesome-props"},fe=parent.document;fe.documentElement;const Re=fe.body,oe={pluginID:wi.id,pluginSVGIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" stroke="currentColor" fill="none" ><path d="M4.182 4h-.727A1.455 1.455 0 0 0 2 5.455V12a1.454 1.454 0 0 0 1.455 1.454H10A1.454 1.454 0 0 0 11.454 12v-.727"/><path d="m10.636 2.636 2.182 2.182m1.011-1.033a1.527 1.527 0 0 0-2.16-2.16L5.545 7.727V9.91h2.182l6.102-6.116v-.008Z"/></svg>',pluginConfig:null,isPluginEnabled:"is-awPr-enabled"},_i="1.10.0",ki=(d,y)=>Object.keys(d).filter(H=>d[H]!==y[H]),Ci=async()=>{const d=await fetch(`https://api.github.com/repos/yoyurec/${oe.pluginID}/releases/latest`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!d.ok){const A=`An error has occurred: ${d.status}`;throw new Error(A)}const y=await d.json();y&&y.tag_name.replace("v","").localeCompare(_i,void 0,{numeric:!0,sensitivity:"base"})==1&&logseq.UI.showMsg(`"${oe.pluginID}" new version is available! Please, update!`,"warning",{timeout:3e4})},Si=(d,y,A)=>{const H=fe.getElementById(d);H&&(xi(d,y),H.contentDocument?.head.insertAdjacentHTML("beforeend",`<style id='${y}'>
            ${A}
        </style>`))},xi=(d,y)=>{const A=fe.getElementById(d);A&&A.contentDocument?.getElementById(y)?.remove()},Pi=d=>d.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Oi=()=>{const d=fe.createElement("span");d.textContent="span",d.style.color="var(--ls-primary-text-color)",d.style.backgroundColor="var(--ls-primary-background-color)",Re.insertAdjacentElement("beforeend",d);const y=getComputedStyle(d).color.trim(),A=getComputedStyle(d).backgroundColor.trim();d.remove();const H=fe.createElement("a");H.style.border="1px solid var(--ls-border-color)",H.style.backgroundColor="var(--ls-a-chosen-bg)",Re.insertAdjacentElement("beforeend",H);const B=getComputedStyle(H).color.trim(),ue=getComputedStyle(H).backgroundColor.trim(),R=getComputedStyle(H).borderColor.trim();return H.remove(),`
        :root {
            --ls-primary-text-color:${y};
            --ls-primary-background-color:${A};
            --ls-link-text-color:${B};
            --ls-a-chosen-bg:${ue};
            --ls-border-color:${R};
        }
    `},ji="link,links,url,source",Ai="email,e-mail",Ii="tel,phone,call,mobile",Ei="tweet,twitter",Li="tag,tags",Ti="alias",Mi="title",Fi="related",Ni="parent",$i="child",Ri="sibling",Di="author,creator,user",Ui="owner,by,who,attendee,participant",qi="team,community,users",zi="type,page-type",Hi="area",Bi="category,subcategory,topic",Gi="project",Wi="theme",Vi="task",Ji="outcome",Zi="status",Ki="published,date,day,week,month,year,when",Yi="pace,time",Qi="duration",Xi="book,pdf",es="docs,documentation,article",ts="media",rs="image,cover,banner",ns="slide,slides,presentation",os="summary",is="note",ss="comment",as="info,desc,description",cs="repo,repository",ls="file,attach,attachment",us="template",ps="code",ds="library",fs="number,isbn",hs="publisher,print",gs="location,place,where",ms="rating,quality",ys="lang,language",bs="level",vs="size",ws="price",_s="paid",ks="certificate",Cs="health,activity,cardio",Ss="workout,exercise,yoga,body-part",xs="rest,sleep",Ps="equipment",Os="quantity,set,sets",js="reps,repeat",As="measure,measurement",Is="scale,weight",Es="chart,progress,metric",Ls="recipe",Ts="eat,food,nutrition",Ms="water",Fs="coffee",Ns="alcohol",$s="cigarette",Rs="formula,function",Ds="percent,percentage",Us="total,sum,amount",un={eb54:ji,eae5:Ai,eb09:Ii,ec27:Ei,ef86:Li,edef:Ti,f2b1:Mi,eade:Fi,eb77:Ni,ea17:$i,eb31:Ri,ef68:Di,ea2b:Ui,ebf2:qi,eaba:zi,eb9c:Hi,ec9f:Bi,ecef:Gi,eb35:Wi,eb6a:Vi,f1f8:Ji,f3b0:Zi,ea52:Ki,f319:Yi,f146:Qi,ea39:Xi,eafd:es,ece8:ts,eb0a:rs,eb70:ns,eb83:os,eb6d:is,eaee:ss,eac5:as,ef6f:cs,eb02:ls,eb39:us,ea77:ps,efc5:ds,f1fe:fs,eb0e:hs,eae8:gs,eb2e:ms,eaa6:ys,efee:bs,eef7:vs,ee1e:ws,eb25:_s,ed76:ks,ef92:Cs,f2db:Ss,eb5c:xs,eff0:Ps,f015:Os,eb72:js,f291:As,ef53:Is,ea5c:Es,f21d:Ls,eeff:Ts,efde:Ms,ef0e:Fs,eab7:Ns,ecc4:$s,eeb2:Rs,ecf4:Ds,eb73:Us},qs=`:root{--awPr-propEdit-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' stroke='%23888A' fill='none' %3e%3cpath d='M4.182 4h-.727A1.455 1.455 0 0 0 2 5.455V12a1.454 1.454 0 0 0 1.455 1.454H10A1.454 1.454 0 0 0 11.454 12v-.727'/%3e%3cpath d='m10.636 2.636 2.182 2.182m1.011-1.033a1.527 1.527 0 0 0-2.16-2.16L5.545 7.727V9.91h2.182l6.102-6.116v-.008Z'/%3e%3c/svg%3e")}body[data-awpr-page-props-icons] .block-properties.page-properties .page-property-key:before,body[data-awpr-block-props-icons] .block-properties:not(.page-properties) .page-property-key:before{content:"\\ea08";font-family:tabler-icons;color:#888a;font-size:1.13em;font-weight:400;margin-right:.3em}body[data-awpr-page-props-icons] .pre-block>.flex>.editor-wrapper>.editor-inner>textarea{padding:0 0 0 1.9em!important;border:4px solid transparent!important;background:var(--awPr-propEdit-icon) .45em 0 / 1.2em 1.5em repeat-y local,linear-gradient(transparent 0%,transparent 96%,#88888833 100%) 0 0 / 1px 1.5em repeat local!important;white-space:pre;overflow:auto}[data-macro-name=i]{display:inline-block;height:0}[data-awpr-icon]{width:1em;font-style:normal}[data-awpr-icon]:before{position:relative;top:1px;font-family:tabler-icons;font-size:1.13em}.page-property-key{min-width:unset!important;max-width:unset!important}.block-properties:before,.block-properties .inline.mr-1:before{display:none!important}.ls-block .page-reference:hover{filter:none}
`,Wn=()=>{oe.pluginConfig.blockPropsIcons?Re.dataset.awprBlockPropsIcons="":delete Re.dataset.awprBlockPropsIcons},Vn=()=>{oe.pluginConfig.pagePropsIcons?Re.dataset.awprPagePropsIcons="":delete Re.dataset.awprPagePropsIcons},zs=async()=>{Wn(),Vn(),Bs(),Ks()},Hs=()=>{Gs()},Bs=async()=>{logseq.provideStyle({key:"awPr-propsIcons-css",style:qs}),logseq.provideStyle({key:"awPr-predefinedIconsList-css",style:ln(un)}),logseq.provideStyle({key:"awPr-userPropsList-css",style:ln(pn())}),logseq.provideStyle({key:"awPr-userIconsList-css",style:Zn(await Yn())})},Gs=()=>{fe.head.querySelector('style[data-injected-style^="awPr-propsIcons-css"]')?.remove(),fe.head.querySelector('style[data-injected-style^="awPr-predefinedIconsList-css"]')?.remove(),fe.head.querySelector('style[data-injected-style^="awPr-userPropsList-css"]')?.remove(),fe.head.querySelector('style[data-injected-style^="awPr-userIconsList-css"]')?.remove()},Ws=()=>{fe.head.querySelector('style[data-injected-style^="awPr-userPropsList-css"]')?.remove(),logseq.provideStyle({key:"awPr-userPropsList-css",style:ln(pn())})},Jn=async()=>{fe.head.querySelector('style[data-injected-style^="awPr-userIconsList-css"]')?.remove(),logseq.provideStyle({key:"awPr-userIconsList-css",style:Zn(await Yn())})},ln=d=>{const y=Kn(d);return Object.keys(y).reduce((A,H)=>A+Vs(H,y[H]),"")},Zn=d=>Object.keys(d).reduce((y,A)=>y+Js(A,d[A]),""),pn=()=>Object.keys(oe.pluginConfig).filter(d=>d.startsWith("userIcon-")).reduce((d,y)=>{if(!oe.pluginConfig[y])return d;const H=y.replace("userIcon-","");return Object.assign(d,{[H]:oe.pluginConfig[y].replaceAll(" ","")})},{}),Kn=d=>Object.keys(d).reduce((y,A)=>{const H=d[A].split(",").reduce((B,ue)=>Object.assign(B,{[ue]:A}),{});return Object.assign(y,H)},{}),Yn=async()=>{const d=await logseq.Editor.getPage(oe.pluginConfig.iconsPropsPage.toLowerCase());if(d){const y=d.properties;if(y&&Object.keys(y).length!==0)return Object.keys(y).filter(A=>y[A].length==4&&(y[A].startsWith("e")||y[A].startsWith("f"))).reduce((A,H)=>Object.assign(A,{[Pi(H)]:y[H]}),{})}return{}},Vs=(d,y)=>`
    body[data-awpr-page-props-icons] .block-properties.page-properties .page-property-key[data-ref="${d}"]::before,
    .block-properties.page-properties[data-awpr-page-props-icons] .page-property-key[data-ref="${d}"]::before,
    body[data-awpr-block-props-icons] .block-properties:not(.page-properties) .page-property-key[data-ref="${d}"]::before,
    .block-properties:not(.page-properties)[data-awpr-page-props-icons] .page-property-key[data-ref="${d}"]::before {
        content: "\\${y}" !important;
    }
    [data-awpr-icon="${d}"]::before {
        content: "\\${y}";
    }
    .desc-item[data-key="userIcon-${y}"] .form-control::before {
        content: "\\${y}" !important;
    }
    `,Js=(d,y)=>`
    body[data-awpr-page-props-icons] .block-properties.page-properties .page-property-key[data-ref="${d}"]::before,
    .block-properties.page-properties[data-awpr-page-props-icons] .page-property-key[data-ref="${d}"]::before,
    body[data-awpr-block-props-icons] .block-properties:not(.page-properties) .page-property-key[data-ref="${d}"]::before,
    .block-properties:not(.page-properties)[data-awpr-page-props-icons] .page-property-key[data-ref="${d}"]::before {
        content: "\\${y}" !important;
    }
    [data-awpr-icon="${d}"]::before {
        content: "\\${y}";
    }
    `,Zs=async d=>{const y=un,A=pn(),H=d.dataset.blockUuid;Object.keys(A).forEach(R=>{y[R]=y[R]+","+A[R]});const B=Kn(y),ue=Object.keys(B).reduce((R,f)=>R+`  ${f}::  ${B[f]}
`,`  .awpr-layout-grid:: true
`);await logseq.Editor.insertBlock(H,ue)},Ks=async()=>{logseq.provideModel({insertPropsListBlock:Zs}),logseq.Editor.registerSlashCommand("AwesomeProps: insert list generator button",async()=>{await logseq.Editor.insertAtEditingCursor("{{renderer :awpr-props-list}}")}),logseq.App.onMacroRendererSlotted(({slot:d,payload:y})=>{const A="awpr-props-list",[H]=y.arguments;if(H?.startsWith(`:${A}`))return logseq.provideUI({key:A,slot:d,reset:!0,template:`<button class="button" style="display: flex; align-items: center; border: 1px solid var(--ls-border-color);" data-block-uuid="${y.uuid}" data-on-click="insertPropsListBlock"><i style="width: 1em;">${oe.pluginSVGIcon}</i> Insert props list from settings (predefined + your overrides)</button>`})})};let Qn,dn;const Ys=()=>{Qn={childList:!0,subtree:!0},dn=new MutationObserver(Qs)},Qs=async function(d){for(let y=0;y<d.length;y++){const H=d[y].addedNodes[0];if(H&&H.childNodes.length){const B=[...H.querySelectorAll(".block-properties .page-property-key")];if(B.length){ar(B);const ue=await logseq.Editor.getCurrentPage(),R=oe.pluginConfig.iconsPropsPage.toLowerCase();ue&&ue.name===R&&Jn()}}}},Gn=()=>{dn.observe(fe.getElementById("app-container"),Qn)},Xs=()=>{dn.disconnect()};const ea=async()=>{ar(),Ys(),Gn(),logseq.App.onRouteChanged(()=>{Xs(),setTimeout(()=>{ar(),Gn()},100)})},ta=()=>{Xn(),eo()},ra=()=>{oe.pluginConfig.hideDotProps?ar():Xn()},na=()=>{oe.pluginConfig.hideSetOfProps?ar():eo()},Xn=()=>{const d=fe.querySelectorAll(".awPr-hideDotProp");if(d.length)for(let y=0;y<d.length;y++)d[y].classList.remove("hidden","awPr-hideDotProp")},eo=()=>{const d=fe.querySelectorAll(".awPr-hideSetOfProps");if(d.length)for(let y=0;y<d.length;y++)d[y].classList.remove("hidden","awPr-hideSetOfProps")},ar=async d=>{if(!(!oe.pluginConfig.hideDotProps&&!oe.pluginConfig.hideSetOfProps)&&(d||(d=[...fe.querySelectorAll("#app-container .block-properties .page-property-key")]),d.length)){let y=[];oe.pluginConfig.hideSetOfProps&&(y=oe.pluginConfig.hideSetOfProps.trim().toLowerCase().replaceAll(" ","").split(","));for(let A=0;A<d.length;A++){const H=d[A].textContent,B=d[A].parentElement.parentElement;H&&B&&(oe.pluginConfig.hideDotProps&&H?.startsWith(".")?B.classList.add("hidden","awPr-hideDotProp"):oe.pluginConfig.hideSetOfProps&&y.includes(H)?B.classList.add("hidden","awPr-hideSetOfProps"):B.classList.remove("hidden","awPr-hideSetOfProps"))}}},oa=`.block-properties{overflow:hidden;position:relative;margin:0;padding:0 8px!important;border:4px solid var(--ls-block-properties-background-color)!important;background:var(--ls-block-properties-background-color)!important}.block-properties.page-properties{border-color:var(--ls-page-properties-background-color)!important;background-color:var(--ls-page-properties-background-color)!important}.block-properties>div>div{display:inline-flex!important;align-items:center}.page-property-key{display:inline-flex;flex-grow:1;line-height:1.2em}.block-properties span.page-property-key:hover{background:none}.block-properties .page-property-value{overflow:hidden;text-overflow:ellipsis}.block-properties .bracket{display:none}.block-properties .page-property-value .mr-1{margin-right:0}.block-properties>div>:is(div,span,a):first-child{line-height:2.7ex}[data-awpr-block-props-layout=grid] .block-properties:not(.page-properties),[data-awpr-page-props-layout=grid] .block-properties.page-properties,.ls-block.ls-block[data-refs-self*=".awpr-layout-grid"] .block-properties{display:grid!important;grid-template-columns:1fr 10fr}[data-awpr-block-props-layout=flat] .block-properties:not(.page-properties),[data-awpr-page-props-layout=flat] .block-properties.page-properties,.ls-block.ls-block[data-refs-self*=".awpr-layout-flat"] .block-properties{display:block!important}.ls-block.ls-block[data-collapsed^="{"]>div>div>div>div>.block-content>.block-properties{display:none!important}[data-awpr-block-props-layout=grid] .ls-block:not([data-collapsed^="{"])>div>div>div>div>.block-content>.block-properties:not(.page-properties),.ls-block.ls-block.ls-block:not([data-collapsed^="{"])[data-refs-self*=".awpr-layout-grid"]>div>div>div>div>.block-content>.block-properties{display:grid!important}[data-awpr-block-props-layout=flat] .ls-block:not([data-collapsed^="{"])>div>div>div>div>.block-content>.block-properties:not(.page-properties),.ls-block.ls-block.ls-block:not([data-collapsed^="{"])[data-refs-self*=".awpr-layout-flat"]>div>div>div>div>.block-content>.block-properties{display:block!important}[data-awpr-block-props-layout=grid] .block-properties:not(.page-properties)>div,[data-awpr-page-props-layout=grid] .block-properties.page-properties>div,.ls-block.ls-block[data-refs-self*=".awpr-layout-grid"] .block-properties>div{display:contents!important}[data-awpr-block-props-layout=flat] .block-properties:not(.page-properties)>div,[data-awpr-page-props-layout=flat] .block-properties.page-properties>div,.ls-block.ls-block[data-refs-self*=".awpr-layout-flat"] .block-properties>div{display:inline-flex!important}[data-awpr-block-props-layout=flat] .block-properties:not(.page-properties)>div:after,[data-awpr-page-props-layout=flat] .block-properties.page-properties>div:after,.ls-block.ls-block[data-refs-self*=".awpr-layout-flat"] .block-properties>div:after{content:",";display:block;margin-right:.5em;opacity:.7}[data-awpr-block-props-layout=grid] .block-properties:not(.page-properties)>div:after,[data-awpr-page-props-layout=grid] .block-properties.page-properties>div:after,.ls-block.ls-block[data-refs-self*=".awpr-layout-grid"] .block-properties>div:after{display:none}.block-properties>div:last-child:after{display:none!important}[data-awpr-block-props-layout=grid] .block-properties:not(.page-properties)>div>span.mr-1,[data-awpr-page-props-layout=grid] .block-properties.page-properties>div>span.mr-1,.ls-block.ls-block[data-refs-self*=".awpr-layout-grid"] .block-properties>div>span.mr-1{display:none}[data-awpr-block-props-layout=flat] .block-properties:not(.page-properties)>div>span.mr-1,[data-awpr-page-props-layout=flat] .block-properties.page-properties>div>span.mr-1,.ls-block.ls-block[data-refs-self*=".awpr-layout-flat"] .block-properties>div>span.mr-1{display:inline;margin-right:.4em}[data-awpr-block-props-layout=grid] .block-properties:not(.page-properties)>div>:is(div,span,a):first-child:after,[data-awpr-page-props-layout=grid] .block-properties.page-properties>div>:is(div,span,a):first-child:after,.ls-block.ls-block[data-refs-self*=".awpr-layout-grid"] .block-properties>div>:is(div,span,a):first-child:after{content:"\\25cf";display:block;margin:2px 1em 0 1.6em;color:var(--ls-primary-text-color);opacity:.2;font-family:Inter;font-size:.6em;line-height:2.2em}[data-awpr-block-props-layout=flat] .block-properties:not(.page-properties)>div>:is(div,span,a):first-child:after,[data-awpr-page-props-layout=flat] .block-properties.page-properties>div>:is(div,span,a):first-child:after,.ls-block.ls-block[data-refs-self*=".awpr-layout-flat"] .block-properties>div>:is(div,span,a):first-child:after{display:none}
`,to=()=>{switch(oe.pluginConfig.blockPropsLayout){case"Grid":Re.dataset.awprBlockPropsLayout="grid";break;case"Flat":Re.dataset.awprBlockPropsLayout="flat";break}},ro=()=>{switch(oe.pluginConfig.pagePropsLayout){case"Grid":Re.dataset.awprPagePropsLayout="grid";break;case"Flat":Re.dataset.awprPagePropsLayout="flat";break}},ia=async()=>{sa(),ro(),to()},sa=()=>{fe.head.querySelector('style[data-injected-style^="awPr-propsLayout-css"]')||logseq.provideStyle({key:"awPr-propsLayout-css",style:oa})},aa=()=>{fe.head.querySelector('style[data-injected-style^="awPr-propsLayout-css"]')?.remove()},ca=()=>{aa()},la=()=>{ua()},ua=()=>{Si("logseq-awesome-props_iframe","awPr-vars",Oi()),pa(),logseq.showMainUI()},fn=async()=>{logseq.hideMainUI()},pa=()=>{const d=fe.getElementById("awPr-toggle-button");if(d){const y=d.getBoundingClientRect(),A=document.getElementById("app-inner");Object.assign(A.style,{top:`${y.top+40}px`,left:`${y.left-100}px`})}},da=()=>{document.getElementById("app").addEventListener("click",fa),document.getElementById("app-settings-btn").addEventListener("click",ha),document.getElementById("settings-page-link").addEventListener("click",ga)},fa=d=>{d.target.closest("#app-inner")||fn()},ha=()=>{fn(),logseq.showSettingsUI()},ga=async()=>{fn();const d=await logseq.App.getCurrentGraph();d&&(window.location.href=`logseq://graph/${d.name}?page=${oe.pluginConfig.iconsPropsPage}`)};const ma=()=>{Re.classList.add(oe.isPluginEnabled),ba(),wa(),setTimeout(()=>{logseq.beforeunload(async()=>{ya()})},2e3),oe.pluginConfig.pluginUpdateNotify&&setTimeout(()=>{Ci()},8e3)},ya=()=>{Re.classList.remove(oe.isPluginEnabled),va(),_a()},ba=async()=>{logseq.provideModel({togglePluginPopup:la}),logseq.App.registerUIItem("toolbar",{key:"AwesomeProps",template:`
                <button
                class="button" id="awPr-toggle-button"
                data-on-click="togglePluginPopup" data-rect>
                    <span id="awPr-toggle-icon">
                        ${oe.pluginSVGIcon}
                    </span>
                </button>
            `}),setTimeout(()=>{fe.head&&fe.head.querySelector('link[href="./css/style.css"]').insertAdjacentHTML("afterend",`<link rel="stylesheet" id="css-awesomeProps" href="lsp://logseq.io/${oe.pluginID}/dist/assets/awesomeProps.css">`)},100),da()},va=()=>{fe.getElementById("css-awesomeProps")?.remove()},wa=async()=>{setTimeout(()=>{zs(),ia()},2e3),setTimeout(()=>{ea()},3e3)},_a=()=>{ca(),Hs(),ta()};const Mr=[{key:"hideHeading",title:"Properties visibility",description:"",type:"heading",default:null},{key:"hideDotProps",title:"",description:"Hide (in view mode) props started with dot (.propName)?",type:"boolean",default:!0},{key:"hideSetOfProps",title:"",description:"Hide own specific page props (comma separated). Delete to disable",type:"string",default:"propToHide,propAnother,color,hidetitle,banner"},{key:"pagePropsHeading",title:"Page properties style",description:"",type:"heading",default:null},{key:"pagePropsLayout",title:"",description:"Page props style",type:"enum",enumPicker:"radio",enumChoices:["Grid","Flat"],default:"Grid"},{key:"pagePropsIcons",title:"",description:"Enable page props icons?",type:"boolean",default:!0},{key:"blocksPropsHeading",title:"Block properties style",description:"",type:"heading",default:null},{key:"blockPropsLayout",title:"",description:"Block props style",type:"enum",enumPicker:"radio",enumChoices:["Grid","Flat"],default:"Grid"},{key:"blockPropsIcons",title:"",description:"Enable block props icons?",type:"boolean",default:!0},{key:"iconsHeading",title:"Properties icons",description:"Wanna suggest yours icons? Welcome to https://bit.ly/dicsocrdPropsThread OR create an issue on GitHub https://bit.ly/newPropIconRequest",type:"heading",default:null},{key:"iconsListHeading",title:"Predefined icons",description:"Translate properties names to yours or assign own props to existing icons (comma separated, no spaces)",type:"heading",default:null},{key:"usersIconsHeading",title:"User icons",description:'Get Tabler icon codes via  "Tabler picker" plugin https://github.com/yoyurec/logseq-tabler-picker',type:"heading",default:null},{key:"iconsPropsPage",title:"Page name with your custom icons config",description:"How to add config? Open page, add page props block with `propName:: iconCode`",type:"string",default:"awesome-props-icons"},{key:"otherHeading",title:"Other",description:"",type:"heading",default:null},{key:"pluginUpdateNotify",title:"",description:"Enable new version notifier on app load?",type:"boolean",default:!0}],ka=()=>{let d=0;for(let A=0;A<Mr.length;++A)Mr[A].key==="iconsListHeading"&&(d=A+1);const y=Ca();Mr.splice(d,0,...y),logseq.useSettingsSchema(Mr),oe.pluginConfig=logseq.settings,logseq.onSettingsChanged((A,H)=>{xa(A,H)})},Ca=()=>{const d=[];return Object.entries(un).forEach(y=>{const[A,H]=y,B={key:`userIcon-${A}`,title:"",description:`${H}`,type:"string",default:""};d.push(B)}),d},Sa=()=>{fe.getElementById("iconsPropsPageLink")?.remove();const d=fe.querySelector('.desc-item[data-key="iconsPropsPage"'),y=`<a id="iconsPropsPageLink" href="#/page/${oe.pluginConfig.iconsPropsPage}">Open page</s>`;d?.insertAdjacentHTML("beforeend",y)},xa=(d,y)=>{oe.pluginConfig={...d};const A=ki({...y},oe.pluginConfig);A.length&&(A.some(H=>H.startsWith("userIcon-"))&&Ws(),A.includes("userIconsList")&&Jn(),A.includes("blockPropsLayout")&&to(),A.includes("blockPropsIcons")&&Wn(),A.includes("pagePropsLayout")&&ro(),A.includes("pagePropsIcons")&&Vn(),A.includes("hideDotProps")&&ra(),A.includes("hideSetOfProps")&&na(),A.includes("iconsPropsPage")&&Sa())};const Pa=async()=>{console.log("AwesomeProps: plugin loaded"),ka(),ma()};logseq.ready(Pa).catch(null);
//# sourceMappingURL=awesomeProps.js.map
