(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))N(I);new MutationObserver(I=>{for(const H of I)if(H.type==="childList")for(const j of H.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&N(j)}).observe(document,{childList:!0,subtree:!0});function E(I){const H={};return I.integrity&&(H.integrity=I.integrity),I.referrerPolicy&&(H.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?H.credentials="include":I.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function N(I){if(I.ep)return;I.ep=!0;const H=E(I);fetch(I.href,H)}})();var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fo(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Dn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */Dn.exports;(function(s,l){(function(E,N){s.exports=N()})(self,()=>(()=>{var E={227:(j,u,m)=>{var b=m(155);u.formatArgs=function(x){if(x[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+x[0]+(this.useColors?"%c ":" ")+"+"+j.exports.humanize(this.diff),!this.useColors)return;const W="color: "+this.color;x.splice(1,0,W,"color: inherit");let _=0,h=0;x[0].replace(/%[a-zA-Z%]/g,C=>{C!=="%%"&&(_++,C==="%c"&&(h=_))}),x.splice(h,0,W)},u.save=function(x){try{x?u.storage.setItem("debug",x):u.storage.removeItem("debug")}catch{}},u.load=function(){let x;try{x=u.storage.getItem("debug")}catch{}return!x&&b!==void 0&&"env"in b&&(x=b.env.DEBUG),x},u.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},u.storage=function(){try{return localStorage}catch{}}(),u.destroy=(()=>{let x=!1;return()=>{x||(x=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],u.log=console.debug||console.log||(()=>{}),j.exports=m(447)(u);const{formatters:v}=j.exports;v.j=function(x){try{return JSON.stringify(x)}catch(W){return"[UnexpectedJSONParseError]: "+W.message}}},447:(j,u,m)=>{j.exports=function(b){function v(_){let h,C,g,z=null;function P(...F){if(!P.enabled)return;const Y=P,L=Number(new Date),q=L-(h||L);Y.diff=q,Y.prev=h,Y.curr=L,h=L,F[0]=v.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let a=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(f,S)=>{if(f==="%%")return"%";a++;const M=v.formatters[S];if(typeof M=="function"){const K=F[a];f=M.call(Y,K),F.splice(a,1),a--}return f}),v.formatArgs.call(Y,F),(Y.log||v.log).apply(Y,F)}return P.namespace=_,P.useColors=v.useColors(),P.color=v.selectColor(_),P.extend=x,P.destroy=v.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>z!==null?z:(C!==v.namespaces&&(C=v.namespaces,g=v.enabled(_)),g),set:F=>{z=F}}),typeof v.init=="function"&&v.init(P),P}function x(_,h){const C=v(this.namespace+(h===void 0?":":h)+_);return C.log=this.log,C}function W(_){return _.toString().substring(2,_.toString().length-2).replace(/\.\*\?$/,"*")}return v.debug=v,v.default=v,v.coerce=function(_){return _ instanceof Error?_.stack||_.message:_},v.disable=function(){const _=[...v.names.map(W),...v.skips.map(W).map(h=>"-"+h)].join(",");return v.enable(""),_},v.enable=function(_){let h;v.save(_),v.namespaces=_,v.names=[],v.skips=[];const C=(typeof _=="string"?_:"").split(/[\s,]+/),g=C.length;for(h=0;h<g;h++)C[h]&&((_=C[h].replace(/\*/g,".*?"))[0]==="-"?v.skips.push(new RegExp("^"+_.slice(1)+"$")):v.names.push(new RegExp("^"+_+"$")))},v.enabled=function(_){if(_[_.length-1]==="*")return!0;let h,C;for(h=0,C=v.skips.length;h<C;h++)if(v.skips[h].test(_))return!1;for(h=0,C=v.names.length;h<C;h++)if(v.names[h].test(_))return!0;return!1},v.humanize=m(824),v.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(_=>{v[_]=b[_]}),v.names=[],v.skips=[],v.formatters={},v.selectColor=function(_){let h=0;for(let C=0;C<_.length;C++)h=(h<<5)-h+_.charCodeAt(C),h|=0;return v.colors[Math.abs(h)%v.colors.length]},v.enable(v.load()),v}},856:function(j){j.exports=function(){function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},u(A)}function m(A,U){return m=Object.setPrototypeOf||function(V,ee){return V.__proto__=ee,V},m(A,U)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(A,U,V){return v=b()?Reflect.construct:function(ee,ce,Ne){var Ke=[null];Ke.push.apply(Ke,ce);var Pe=new(Function.bind.apply(ee,Ke));return Ne&&m(Pe,Ne.prototype),Pe},v.apply(null,arguments)}function x(A){return W(A)||_(A)||h(A)||g()}function W(A){if(Array.isArray(A))return C(A)}function _(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function h(A,U){if(A){if(typeof A=="string")return C(A,U);var V=Object.prototype.toString.call(A).slice(8,-1);return V==="Object"&&A.constructor&&(V=A.constructor.name),V==="Map"||V==="Set"?Array.from(A):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?C(A,U):void 0}}function C(A,U){(U==null||U>A.length)&&(U=A.length);for(var V=0,ee=new Array(U);V<U;V++)ee[V]=A[V];return ee}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var z=Object.hasOwnProperty,P=Object.setPrototypeOf,F=Object.isFrozen,Y=Object.getPrototypeOf,L=Object.getOwnPropertyDescriptor,q=Object.freeze,a=Object.seal,f=Object.create,S=typeof Reflect<"u"&&Reflect,M=S.apply,K=S.construct;M||(M=function(A,U,V){return A.apply(U,V)}),q||(q=function(A){return A}),a||(a=function(A){return A}),K||(K=function(A,U){return v(A,x(U))});var ne=oe(Array.prototype.forEach),ae=oe(Array.prototype.pop),me=oe(Array.prototype.push),xe=oe(String.prototype.toLowerCase),Ce=oe(String.prototype.match),he=oe(String.prototype.replace),Fe=oe(String.prototype.indexOf),y=oe(String.prototype.trim),k=oe(RegExp.prototype.test),B=Ee(TypeError);function oe(A){return function(U){for(var V=arguments.length,ee=new Array(V>1?V-1:0),ce=1;ce<V;ce++)ee[ce-1]=arguments[ce];return M(A,U,ee)}}function Ee(A){return function(){for(var U=arguments.length,V=new Array(U),ee=0;ee<U;ee++)V[ee]=arguments[ee];return K(A,V)}}function G(A,U){P&&P(A,null);for(var V=U.length;V--;){var ee=U[V];if(typeof ee=="string"){var ce=xe(ee);ce!==ee&&(F(U)||(U[V]=ce),ee=ce)}A[ee]=!0}return A}function X(A){var U,V=f(null);for(U in A)M(z,A,[U])&&(V[U]=A[U]);return V}function ue(A,U){for(;A!==null;){var V=L(A,U);if(V){if(V.get)return oe(V.get);if(typeof V.value=="function")return oe(V.value)}A=Y(A)}function ee(ce){return console.warn("fallback value for",ce),null}return ee}var je=q(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ke=q(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qe=q(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nt=q(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pe=q(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),fe=q(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oe=q(["#text"]),Ae=q(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ie=q(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Le=q(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ue=q(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Nt=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ct=a(/<%[\w\W]*|[\w\W]*%>/gm),zn=a(/^data-[\-\w.\u00B7-\uFFFF]/),qn=a(/^aria-[\-\w]+$/),Hn=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Bn=a(/^(?:\w+script|data):/i),rt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dn=a(/^html$/i),Gn=function(){return typeof window>"u"?null:window},Wn=function(A,U){if(u(A)!=="object"||typeof A.createPolicy!="function")return null;var V=null,ee="data-tt-policy-suffix";U.currentScript&&U.currentScript.hasAttribute(ee)&&(V=U.currentScript.getAttribute(ee));var ce="dompurify"+(V?"#"+V:"");try{return A.createPolicy(ce,{createHTML:function(Ne){return Ne}})}catch{return console.warn("TrustedTypes policy "+ce+" could not be created."),null}};function dt(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gn(),U=function(o){return dt(o)};if(U.version="2.3.8",U.removed=[],!A||!A.document||A.document.nodeType!==9)return U.isSupported=!1,U;var V=A.document,ee=A.document,ce=A.DocumentFragment,Ne=A.HTMLTemplateElement,Ke=A.Node,Pe=A.Element,Xe=A.NodeFilter,ht=A.NamedNodeMap,St=ht===void 0?A.NamedNodeMap||A.MozNamedAttrMap:ht,Pt=A.HTMLFormElement,hn=A.DOMParser,pn=A.trustedTypes,pt=Pe.prototype,gn=ue(pt,"cloneNode"),mn=ue(pt,"nextSibling"),Jn=ue(pt,"childNodes"),ot=ue(pt,"parentNode");if(typeof Ne=="function"){var Ut=ee.createElement("template");Ut.content&&Ut.content.ownerDocument&&(ee=Ut.content.ownerDocument)}var He=Wn(pn,V),vn=He?He.createHTML(""):"",gt=ee,$t=gt.implementation,yn=gt.createNodeIterator,bn=gt.createDocumentFragment,Vn=gt.getElementsByTagName,Rt=V.importNode,_n={};try{_n=X(ee).documentMode?ee.documentMode:{}}catch{}var be={};U.isSupported=typeof ot=="function"&&$t&&$t.createHTMLDocument!==void 0&&_n!==9;var it,Be,Dt=Nt,zt=Ct,Et=zn,Me=qn,qt=Bn,mt=rt,Ht=Hn,ve=null,Bt=G({},[].concat(x(je),x(ke),x(qe),x(pe),x(Oe))),ye=null,Gt=G({},[].concat(x(Ae),x(Ie),x(Le),x(Ue))),le=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,Wt=null,Jt=!0,Vt=!0,wn=!1,st=!1,re=!1,Yt=!1,Zt=!1,Qe=!1,Ge=!1,at=!1,Kt=!0,kt=!0,et=!1,We={},ct=null,xn=G({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Cn=null,Sn=G({},["audio","video","img","source","image","track"]),Xt=null,Ot=G({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",At="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml",jt=Je,En=!1,kn=["application/xhtml+xml","text/html"],Yn="text/html",lt=null,Zn=ee.createElement("form"),Tt=function(o){return o instanceof RegExp||o instanceof Function},en=function(o){lt&&lt===o||(o&&u(o)==="object"||(o={}),o=X(o),ve="ALLOWED_TAGS"in o?G({},o.ALLOWED_TAGS):Bt,ye="ALLOWED_ATTR"in o?G({},o.ALLOWED_ATTR):Gt,Xt="ADD_URI_SAFE_ATTR"in o?G(X(Ot),o.ADD_URI_SAFE_ATTR):Ot,Cn="ADD_DATA_URI_TAGS"in o?G(X(Sn),o.ADD_DATA_URI_TAGS):Sn,ct="FORBID_CONTENTS"in o?G({},o.FORBID_CONTENTS):xn,vt="FORBID_TAGS"in o?G({},o.FORBID_TAGS):{},Wt="FORBID_ATTR"in o?G({},o.FORBID_ATTR):{},We="USE_PROFILES"in o&&o.USE_PROFILES,Jt=o.ALLOW_ARIA_ATTR!==!1,Vt=o.ALLOW_DATA_ATTR!==!1,wn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,st=o.SAFE_FOR_TEMPLATES||!1,re=o.WHOLE_DOCUMENT||!1,Qe=o.RETURN_DOM||!1,Ge=o.RETURN_DOM_FRAGMENT||!1,at=o.RETURN_TRUSTED_TYPE||!1,Zt=o.FORCE_BODY||!1,Kt=o.SANITIZE_DOM!==!1,kt=o.KEEP_CONTENT!==!1,et=o.IN_PLACE||!1,Ht=o.ALLOWED_URI_REGEXP||Ht,jt=o.NAMESPACE||Je,o.CUSTOM_ELEMENT_HANDLING&&Tt(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&Tt(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),it=it=kn.indexOf(o.PARSER_MEDIA_TYPE)===-1?Yn:o.PARSER_MEDIA_TYPE,Be=it==="application/xhtml+xml"?function(T){return T}:xe,st&&(Vt=!1),Ge&&(Qe=!0),We&&(ve=G({},x(Oe)),ye=[],We.html===!0&&(G(ve,je),G(ye,Ae)),We.svg===!0&&(G(ve,ke),G(ye,Ie),G(ye,Ue)),We.svgFilters===!0&&(G(ve,qe),G(ye,Ie),G(ye,Ue)),We.mathMl===!0&&(G(ve,pe),G(ye,Le),G(ye,Ue))),o.ADD_TAGS&&(ve===Bt&&(ve=X(ve)),G(ve,o.ADD_TAGS)),o.ADD_ATTR&&(ye===Gt&&(ye=X(ye)),G(ye,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&G(Xt,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(ct===xn&&(ct=X(ct)),G(ct,o.FORBID_CONTENTS)),kt&&(ve["#text"]=!0),re&&G(ve,["html","head","body"]),ve.table&&(G(ve,["tbody"]),delete vt.tbody),q&&q(o),lt=o)},tn=G({},["mi","mo","mn","ms","mtext"]),On=G({},["foreignobject","desc","title","annotation-xml"]),Kn=G({},["title","style","font","a","script"]),It=G({},ke);G(It,qe),G(It,nt);var nn=G({},pe);G(nn,fe);var Xn=function(o){var T=ot(o);T&&T.tagName||(T={namespaceURI:Je,tagName:"template"});var O=xe(o.tagName),ie=xe(T.tagName);return o.namespaceURI===At?T.namespaceURI===Je?O==="svg":T.namespaceURI===Qt?O==="svg"&&(ie==="annotation-xml"||tn[ie]):!!It[O]:o.namespaceURI===Qt?T.namespaceURI===Je?O==="math":T.namespaceURI===At?O==="math"&&On[ie]:!!nn[O]:o.namespaceURI===Je&&!(T.namespaceURI===At&&!On[ie])&&!(T.namespaceURI===Qt&&!tn[ie])&&!nn[O]&&(Kn[O]||!It[O])},$e=function(o){me(U.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=vn}catch{o.remove()}}},An=function(o,T){try{me(U.removed,{attribute:T.getAttributeNode(o),from:T})}catch{me(U.removed,{attribute:null,from:T})}if(T.removeAttribute(o),o==="is"&&!ye[o])if(Qe||Ge)try{$e(T)}catch{}else try{T.setAttribute(o,"")}catch{}},jn=function(o){var T,O;if(Zt)o="<remove></remove>"+o;else{var ie=Ce(o,/^[\r\n\t ]+/);O=ie&&ie[0]}it==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var de=He?He.createHTML(o):o;if(jt===Je)try{T=new hn().parseFromString(de,it)}catch{}if(!T||!T.documentElement){T=$t.createDocument(jt,"template",null);try{T.documentElement.innerHTML=En?"":de}catch{}}var _e=T.body||T.documentElement;return o&&O&&_e.insertBefore(ee.createTextNode(O),_e.childNodes[0]||null),jt===Je?Vn.call(T,re?"html":"body")[0]:re?T.documentElement:_e},yt=function(o){return yn.call(o.ownerDocument||o,o,Xe.SHOW_ELEMENT|Xe.SHOW_COMMENT|Xe.SHOW_TEXT,null,!1)},Qn=function(o){return o instanceof Pt&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof St)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},bt=function(o){return u(Ke)==="object"?o instanceof Ke:o&&u(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Re=function(o,T,O){be[o]&&ne(be[o],function(ie){ie.call(U,T,O,lt)})},rn=function(o){var T;if(Re("beforeSanitizeElements",o,null),Qn(o)||k(/[\u0080-\uFFFF]/,o.nodeName))return $e(o),!0;var O=Be(o.nodeName);if(Re("uponSanitizeElement",o,{tagName:O,allowedTags:ve}),o.hasChildNodes()&&!bt(o.firstElementChild)&&(!bt(o.content)||!bt(o.content.firstElementChild))&&k(/<[/\w]/g,o.innerHTML)&&k(/<[/\w]/g,o.textContent)||O==="select"&&k(/<template/i,o.innerHTML))return $e(o),!0;if(!ve[O]||vt[O]){if(!vt[O]&&on(O)&&(le.tagNameCheck instanceof RegExp&&k(le.tagNameCheck,O)||le.tagNameCheck instanceof Function&&le.tagNameCheck(O)))return!1;if(kt&&!ct[O]){var ie=ot(o)||o.parentNode,de=Jn(o)||o.childNodes;if(de&&ie)for(var _e=de.length-1;_e>=0;--_e)ie.insertBefore(gn(de[_e],!0),mn(o))}return $e(o),!0}return o instanceof Pe&&!Xn(o)?($e(o),!0):O!=="noscript"&&O!=="noembed"||!k(/<\/no(script|embed)/i,o.innerHTML)?(st&&o.nodeType===3&&(T=o.textContent,T=he(T,Dt," "),T=he(T,zt," "),o.textContent!==T&&(me(U.removed,{element:o.cloneNode()}),o.textContent=T)),Re("afterSanitizeElements",o,null),!1):($e(o),!0)},Tn=function(o,T,O){if(Kt&&(T==="id"||T==="name")&&(O in ee||O in Zn))return!1;if(!(Vt&&!Wt[T]&&k(Et,T))){if(!(Jt&&k(Me,T))){if(!ye[T]||Wt[T]){if(!(on(o)&&(le.tagNameCheck instanceof RegExp&&k(le.tagNameCheck,o)||le.tagNameCheck instanceof Function&&le.tagNameCheck(o))&&(le.attributeNameCheck instanceof RegExp&&k(le.attributeNameCheck,T)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(T))||T==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&k(le.tagNameCheck,O)||le.tagNameCheck instanceof Function&&le.tagNameCheck(O))))return!1}else if(!Xt[T]){if(!k(Ht,he(O,mt,""))){if((T!=="src"&&T!=="xlink:href"&&T!=="href"||o==="script"||Fe(O,"data:")!==0||!Cn[o])&&!(wn&&!k(qt,he(O,mt,"")))){if(O)return!1}}}}}return!0},on=function(o){return o.indexOf("-")>0},_t=function(o){var T,O,ie,de;Re("beforeSanitizeAttributes",o,null);var _e=o.attributes;if(_e){var we={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(de=_e.length;de--;){var wt=T=_e[de],De=wt.name,te=wt.namespaceURI;if(O=De==="value"?T.value:y(T.value),ie=Be(De),we.attrName=ie,we.attrValue=O,we.keepAttr=!0,we.forceKeepAttr=void 0,Re("uponSanitizeAttribute",o,we),O=we.attrValue,!we.forceKeepAttr&&(An(De,o),we.keepAttr))if(k(/\/>/i,O))An(De,o);else{st&&(O=he(O,Dt," "),O=he(O,zt," "));var tt=Be(o.nodeName);if(Tn(tt,ie,O))try{te?o.setAttributeNS(te,De,O):o.setAttribute(De,O),ae(U.removed)}catch{}}}Re("afterSanitizeAttributes",o,null)}},sn=function o(T){var O,ie=yt(T);for(Re("beforeSanitizeShadowDOM",T,null);O=ie.nextNode();)Re("uponSanitizeShadowNode",O,null),rn(O)||(O.content instanceof ce&&o(O.content),_t(O));Re("afterSanitizeShadowDOM",T,null)};return U.sanitize=function(o,T){var O,ie,de,_e,we;if((En=!o)&&(o="<!-->"),typeof o!="string"&&!bt(o)){if(typeof o.toString!="function")throw B("toString is not a function");if(typeof(o=o.toString())!="string")throw B("dirty is not a string, aborting")}if(!U.isSupported){if(u(A.toStaticHTML)==="object"||typeof A.toStaticHTML=="function"){if(typeof o=="string")return A.toStaticHTML(o);if(bt(o))return A.toStaticHTML(o.outerHTML)}return o}if(Yt||en(T),U.removed=[],typeof o=="string"&&(et=!1),et){if(o.nodeName){var wt=Be(o.nodeName);if(!ve[wt]||vt[wt])throw B("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof Ke)(ie=(O=jn("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&ie.nodeName==="BODY"||ie.nodeName==="HTML"?O=ie:O.appendChild(ie);else{if(!Qe&&!st&&!re&&o.indexOf("<")===-1)return He&&at?He.createHTML(o):o;if(!(O=jn(o)))return Qe?null:at?vn:""}O&&Zt&&$e(O.firstChild);for(var De=yt(et?o:O);de=De.nextNode();)de.nodeType===3&&de===_e||rn(de)||(de.content instanceof ce&&sn(de.content),_t(de),_e=de);if(_e=null,et)return o;if(Qe){if(Ge)for(we=bn.call(O.ownerDocument);O.firstChild;)we.appendChild(O.firstChild);else we=O;return ye.shadowroot&&(we=Rt.call(V,we,!0)),we}var te=re?O.outerHTML:O.innerHTML;return re&&ve["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&k(dn,O.ownerDocument.doctype.name)&&(te="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+te),st&&(te=he(te,Dt," "),te=he(te,zt," ")),He&&at?He.createHTML(te):te},U.setConfig=function(o){en(o),Yt=!0},U.clearConfig=function(){lt=null,Yt=!1},U.isValidAttribute=function(o,T,O){lt||en({});var ie=Be(o),de=Be(T);return Tn(ie,de,O)},U.addHook=function(o,T){typeof T=="function"&&(be[o]=be[o]||[],me(be[o],T))},U.removeHook=function(o){if(be[o])return ae(be[o])},U.removeHooks=function(o){be[o]&&(be[o]=[])},U.removeAllHooks=function(){be={}},U}return dt()}()},729:j=>{var u=Object.prototype.hasOwnProperty,m="~";function b(){}function v(h,C,g){this.fn=h,this.context=C,this.once=g||!1}function x(h,C,g,z,P){if(typeof g!="function")throw new TypeError("The listener must be a function");var F=new v(g,z||h,P),Y=m?m+C:C;return h._events[Y]?h._events[Y].fn?h._events[Y]=[h._events[Y],F]:h._events[Y].push(F):(h._events[Y]=F,h._eventsCount++),h}function W(h,C){--h._eventsCount==0?h._events=new b:delete h._events[C]}function _(){this._events=new b,this._eventsCount=0}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(m=!1)),_.prototype.eventNames=function(){var h,C,g=[];if(this._eventsCount===0)return g;for(C in h=this._events)u.call(h,C)&&g.push(m?C.slice(1):C);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(h)):g},_.prototype.listeners=function(h){var C=m?m+h:h,g=this._events[C];if(!g)return[];if(g.fn)return[g.fn];for(var z=0,P=g.length,F=new Array(P);z<P;z++)F[z]=g[z].fn;return F},_.prototype.listenerCount=function(h){var C=m?m+h:h,g=this._events[C];return g?g.fn?1:g.length:0},_.prototype.emit=function(h,C,g,z,P,F){var Y=m?m+h:h;if(!this._events[Y])return!1;var L,q,a=this._events[Y],f=arguments.length;if(a.fn){switch(a.once&&this.removeListener(h,a.fn,void 0,!0),f){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,C),!0;case 3:return a.fn.call(a.context,C,g),!0;case 4:return a.fn.call(a.context,C,g,z),!0;case 5:return a.fn.call(a.context,C,g,z,P),!0;case 6:return a.fn.call(a.context,C,g,z,P,F),!0}for(q=1,L=new Array(f-1);q<f;q++)L[q-1]=arguments[q];a.fn.apply(a.context,L)}else{var S,M=a.length;for(q=0;q<M;q++)switch(a[q].once&&this.removeListener(h,a[q].fn,void 0,!0),f){case 1:a[q].fn.call(a[q].context);break;case 2:a[q].fn.call(a[q].context,C);break;case 3:a[q].fn.call(a[q].context,C,g);break;case 4:a[q].fn.call(a[q].context,C,g,z);break;default:if(!L)for(S=1,L=new Array(f-1);S<f;S++)L[S-1]=arguments[S];a[q].fn.apply(a[q].context,L)}}return!0},_.prototype.on=function(h,C,g){return x(this,h,C,g,!1)},_.prototype.once=function(h,C,g){return x(this,h,C,g,!0)},_.prototype.removeListener=function(h,C,g,z){var P=m?m+h:h;if(!this._events[P])return this;if(!C)return W(this,P),this;var F=this._events[P];if(F.fn)F.fn!==C||z&&!F.once||g&&F.context!==g||W(this,P);else{for(var Y=0,L=[],q=F.length;Y<q;Y++)(F[Y].fn!==C||z&&!F[Y].once||g&&F[Y].context!==g)&&L.push(F[Y]);L.length?this._events[P]=L.length===1?L[0]:L:W(this,P)}return this},_.prototype.removeAllListeners=function(h){var C;return h?(C=m?m+h:h,this._events[C]&&W(this,C)):(this._events=new b,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=m,_.EventEmitter=_,j.exports=_},717:j=>{typeof Object.create=="function"?j.exports=function(u,m){u.super_=m,u.prototype=Object.create(m.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})}:j.exports=function(u,m){u.super_=m;var b=function(){};b.prototype=m.prototype,u.prototype=new b,u.prototype.constructor=u}},824:j=>{var u=1e3,m=60*u,b=60*m,v=24*b,x=7*v,W=365.25*v;function _(h,C,g,z){var P=C>=1.5*g;return Math.round(h/g)+" "+z+(P?"s":"")}j.exports=function(h,C){C=C||{};var g=typeof h;if(g==="string"&&h.length>0)return function(z){if(!((z=String(z)).length>100)){var P=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(z);if(P){var F=parseFloat(P[1]);switch((P[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return F*W;case"weeks":case"week":case"w":return F*x;case"days":case"day":case"d":return F*v;case"hours":case"hour":case"hrs":case"hr":case"h":return F*b;case"minutes":case"minute":case"mins":case"min":case"m":return F*m;case"seconds":case"second":case"secs":case"sec":case"s":return F*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return F;default:return}}}}(h);if(g==="number"&&isFinite(h))return C.long?function(z){var P=Math.abs(z);return P>=v?_(z,P,v,"day"):P>=b?_(z,P,b,"hour"):P>=m?_(z,P,m,"minute"):P>=u?_(z,P,u,"second"):z+" ms"}(h):function(z){var P=Math.abs(z);return P>=v?Math.round(z/v)+"d":P>=b?Math.round(z/b)+"h":P>=m?Math.round(z/m)+"m":P>=u?Math.round(z/u)+"s":z+"ms"}(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},520:(j,u,m)=>{var b=m(155),v=b.platform==="win32",x=m(539);function W(a,f){for(var S=[],M=0;M<a.length;M++){var K=a[M];K&&K!=="."&&(K===".."?S.length&&S[S.length-1]!==".."?S.pop():f&&S.push(".."):S.push(K))}return S}function _(a){for(var f=a.length-1,S=0;S<=f&&!a[S];S++);for(var M=f;M>=0&&!a[M];M--);return S===0&&M===f?a:S>M?[]:a.slice(S,M+1)}var h=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,C=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,g={};function z(a){var f=h.exec(a),S=(f[1]||"")+(f[2]||""),M=f[3]||"",K=C.exec(M);return[S,K[1],K[2],K[3]]}function P(a){var f=h.exec(a),S=f[1]||"",M=!!S&&S[1]!==":";return{device:S,isUnc:M,isAbsolute:M||!!f[2],tail:f[3]}}function F(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}g.resolve=function(){for(var a="",f="",S=!1,M=arguments.length-1;M>=-1;M--){var K;if(M>=0?K=arguments[M]:a?(K=b.env["="+a])&&K.substr(0,3).toLowerCase()===a.toLowerCase()+"\\"||(K=a+"\\"):K=b.cwd(),!x.isString(K))throw new TypeError("Arguments to path.resolve must be strings");if(K){var ne=P(K),ae=ne.device,me=ne.isUnc,xe=ne.isAbsolute,Ce=ne.tail;if((!ae||!a||ae.toLowerCase()===a.toLowerCase())&&(a||(a=ae),S||(f=Ce+"\\"+f,S=xe),a&&S))break}}return me&&(a=F(a)),a+(S?"\\":"")+(f=W(f.split(/[\\\/]+/),!S).join("\\"))||"."},g.normalize=function(a){var f=P(a),S=f.device,M=f.isUnc,K=f.isAbsolute,ne=f.tail,ae=/[\\\/]$/.test(ne);return(ne=W(ne.split(/[\\\/]+/),!K).join("\\"))||K||(ne="."),ne&&ae&&(ne+="\\"),M&&(S=F(S)),S+(K?"\\":"")+ne},g.isAbsolute=function(a){return P(a).isAbsolute},g.join=function(){for(var a=[],f=0;f<arguments.length;f++){var S=arguments[f];if(!x.isString(S))throw new TypeError("Arguments to path.join must be strings");S&&a.push(S)}var M=a.join("\\");return/^[\\\/]{2}[^\\\/]/.test(a[0])||(M=M.replace(/^[\\\/]{2,}/,"\\")),g.normalize(M)},g.relative=function(a,f){a=g.resolve(a),f=g.resolve(f);for(var S=a.toLowerCase(),M=f.toLowerCase(),K=_(f.split("\\")),ne=_(S.split("\\")),ae=_(M.split("\\")),me=Math.min(ne.length,ae.length),xe=me,Ce=0;Ce<me;Ce++)if(ne[Ce]!==ae[Ce]){xe=Ce;break}if(xe==0)return f;var he=[];for(Ce=xe;Ce<ne.length;Ce++)he.push("..");return(he=he.concat(K.slice(xe))).join("\\")},g._makeLong=function(a){if(!x.isString(a))return a;if(!a)return"";var f=g.resolve(a);return/^[a-zA-Z]\:\\/.test(f)?"\\\\?\\"+f:/^\\\\[^?.]/.test(f)?"\\\\?\\UNC\\"+f.substring(2):a},g.dirname=function(a){var f=z(a),S=f[0],M=f[1];return S||M?(M&&(M=M.substr(0,M.length-1)),S+M):"."},g.basename=function(a,f){var S=z(a)[2];return f&&S.substr(-1*f.length)===f&&(S=S.substr(0,S.length-f.length)),S},g.extname=function(a){return z(a)[3]},g.format=function(a){if(!x.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var f=a.root||"";if(!x.isString(f))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var S=a.dir,M=a.base||"";return S?S[S.length-1]===g.sep?S+M:S+g.sep+M:M},g.parse=function(a){if(!x.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var f=z(a);if(!f||f.length!==4)throw new TypeError("Invalid path '"+a+"'");return{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},g.sep="\\",g.delimiter=";";var Y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,L={};function q(a){return Y.exec(a).slice(1)}L.resolve=function(){for(var a="",f=!1,S=arguments.length-1;S>=-1&&!f;S--){var M=S>=0?arguments[S]:b.cwd();if(!x.isString(M))throw new TypeError("Arguments to path.resolve must be strings");M&&(a=M+"/"+a,f=M[0]==="/")}return(f?"/":"")+(a=W(a.split("/"),!f).join("/"))||"."},L.normalize=function(a){var f=L.isAbsolute(a),S=a&&a[a.length-1]==="/";return(a=W(a.split("/"),!f).join("/"))||f||(a="."),a&&S&&(a+="/"),(f?"/":"")+a},L.isAbsolute=function(a){return a.charAt(0)==="/"},L.join=function(){for(var a="",f=0;f<arguments.length;f++){var S=arguments[f];if(!x.isString(S))throw new TypeError("Arguments to path.join must be strings");S&&(a+=a?"/"+S:S)}return L.normalize(a)},L.relative=function(a,f){a=L.resolve(a).substr(1),f=L.resolve(f).substr(1);for(var S=_(a.split("/")),M=_(f.split("/")),K=Math.min(S.length,M.length),ne=K,ae=0;ae<K;ae++)if(S[ae]!==M[ae]){ne=ae;break}var me=[];for(ae=ne;ae<S.length;ae++)me.push("..");return(me=me.concat(M.slice(ne))).join("/")},L._makeLong=function(a){return a},L.dirname=function(a){var f=q(a),S=f[0],M=f[1];return S||M?(M&&(M=M.substr(0,M.length-1)),S+M):"."},L.basename=function(a,f){var S=q(a)[2];return f&&S.substr(-1*f.length)===f&&(S=S.substr(0,S.length-f.length)),S},L.extname=function(a){return q(a)[3]},L.format=function(a){if(!x.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var f=a.root||"";if(!x.isString(f))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+L.sep:"")+(a.base||"")},L.parse=function(a){if(!x.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var f=q(a);if(!f||f.length!==4)throw new TypeError("Invalid path '"+a+"'");return f[1]=f[1]||"",f[2]=f[2]||"",f[3]=f[3]||"",{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},L.sep="/",L.delimiter=":",j.exports=v?g:L,j.exports.posix=L,j.exports.win32=g},155:j=>{var u,m,b=j.exports={};function v(){throw new Error("setTimeout has not been defined")}function x(){throw new Error("clearTimeout has not been defined")}function W(L){if(u===setTimeout)return setTimeout(L,0);if((u===v||!u)&&setTimeout)return u=setTimeout,setTimeout(L,0);try{return u(L,0)}catch{try{return u.call(null,L,0)}catch{return u.call(this,L,0)}}}(function(){try{u=typeof setTimeout=="function"?setTimeout:v}catch{u=v}try{m=typeof clearTimeout=="function"?clearTimeout:x}catch{m=x}})();var _,h=[],C=!1,g=-1;function z(){C&&_&&(C=!1,_.length?h=_.concat(h):g=-1,h.length&&P())}function P(){if(!C){var L=W(z);C=!0;for(var q=h.length;q;){for(_=h,h=[];++g<q;)_&&_[g].run();g=-1,q=h.length}_=null,C=!1,function(a){if(m===clearTimeout)return clearTimeout(a);if((m===x||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{m(a)}catch{try{return m.call(null,a)}catch{return m.call(this,a)}}}(L)}}function F(L,q){this.fun=L,this.array=q}function Y(){}b.nextTick=function(L){var q=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)q[a-1]=arguments[a];h.push(new F(L,q)),h.length!==1||C||W(P)},F.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=Y,b.addListener=Y,b.once=Y,b.off=Y,b.removeListener=Y,b.removeAllListeners=Y,b.emit=Y,b.prependListener=Y,b.prependOnceListener=Y,b.listeners=function(L){return[]},b.binding=function(L){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(L){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},384:j=>{j.exports=function(u){return u&&typeof u=="object"&&typeof u.copy=="function"&&typeof u.fill=="function"&&typeof u.readUInt8=="function"}},539:(j,u,m)=>{var b=m(155),v=/%[sdj%]/g;u.format=function(y){if(!a(y)){for(var k=[],B=0;B<arguments.length;B++)k.push(_(arguments[B]));return k.join(" ")}B=1;for(var oe=arguments,Ee=oe.length,G=String(y).replace(v,function(ue){if(ue==="%%")return"%";if(B>=Ee)return ue;switch(ue){case"%s":return String(oe[B++]);case"%d":return Number(oe[B++]);case"%j":try{return JSON.stringify(oe[B++])}catch{return"[Circular]"}default:return ue}}),X=oe[B];B<Ee;X=oe[++B])L(X)||!M(X)?G+=" "+X:G+=" "+_(X);return G},u.deprecate=function(y,k){if(f(m.g.process))return function(){return u.deprecate(y,k).apply(this,arguments)};if(b.noDeprecation===!0)return y;var B=!1;return function(){if(!B){if(b.throwDeprecation)throw new Error(k);b.traceDeprecation?console.trace(k):console.error(k),B=!0}return y.apply(this,arguments)}};var x,W={};function _(y,k){var B={seen:[],stylize:C};return arguments.length>=3&&(B.depth=arguments[2]),arguments.length>=4&&(B.colors=arguments[3]),Y(k)?B.showHidden=k:k&&u._extend(B,k),f(B.showHidden)&&(B.showHidden=!1),f(B.depth)&&(B.depth=2),f(B.colors)&&(B.colors=!1),f(B.customInspect)&&(B.customInspect=!0),B.colors&&(B.stylize=h),g(B,y,B.depth)}function h(y,k){var B=_.styles[k];return B?"\x1B["+_.colors[B][0]+"m"+y+"\x1B["+_.colors[B][1]+"m":y}function C(y,k){return y}function g(y,k,B){if(y.customInspect&&k&&ae(k.inspect)&&k.inspect!==u.inspect&&(!k.constructor||k.constructor.prototype!==k)){var oe=k.inspect(B,y);return a(oe)||(oe=g(y,oe,B)),oe}var Ee=function(pe,fe){if(f(fe))return pe.stylize("undefined","undefined");if(a(fe)){var Oe="'"+JSON.stringify(fe).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return pe.stylize(Oe,"string")}if(q(fe))return pe.stylize(""+fe,"number");if(Y(fe))return pe.stylize(""+fe,"boolean");if(L(fe))return pe.stylize("null","null")}(y,k);if(Ee)return Ee;var G=Object.keys(k),X=function(pe){var fe={};return pe.forEach(function(Oe,Ae){fe[Oe]=!0}),fe}(G);if(y.showHidden&&(G=Object.getOwnPropertyNames(k)),ne(k)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return z(k);if(G.length===0){if(ae(k)){var ue=k.name?": "+k.name:"";return y.stylize("[Function"+ue+"]","special")}if(S(k))return y.stylize(RegExp.prototype.toString.call(k),"regexp");if(K(k))return y.stylize(Date.prototype.toString.call(k),"date");if(ne(k))return z(k)}var je,ke="",qe=!1,nt=["{","}"];return F(k)&&(qe=!0,nt=["[","]"]),ae(k)&&(ke=" [Function"+(k.name?": "+k.name:"")+"]"),S(k)&&(ke=" "+RegExp.prototype.toString.call(k)),K(k)&&(ke=" "+Date.prototype.toUTCString.call(k)),ne(k)&&(ke=" "+z(k)),G.length!==0||qe&&k.length!=0?B<0?S(k)?y.stylize(RegExp.prototype.toString.call(k),"regexp"):y.stylize("[Object]","special"):(y.seen.push(k),je=qe?function(pe,fe,Oe,Ae,Ie){for(var Le=[],Ue=0,Nt=fe.length;Ue<Nt;++Ue)Fe(fe,String(Ue))?Le.push(P(pe,fe,Oe,Ae,String(Ue),!0)):Le.push("");return Ie.forEach(function(Ct){Ct.match(/^\d+$/)||Le.push(P(pe,fe,Oe,Ae,Ct,!0))}),Le}(y,k,B,X,G):G.map(function(pe){return P(y,k,B,X,pe,qe)}),y.seen.pop(),function(pe,fe,Oe){return pe.reduce(function(Ae,Ie){return Ie.indexOf(`
`)>=0,Ae+Ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Oe[0]+(fe===""?"":fe+`
 `)+" "+pe.join(`,
  `)+" "+Oe[1]:Oe[0]+fe+" "+pe.join(", ")+" "+Oe[1]}(je,ke,nt)):nt[0]+ke+nt[1]}function z(y){return"["+Error.prototype.toString.call(y)+"]"}function P(y,k,B,oe,Ee,G){var X,ue,je;if((je=Object.getOwnPropertyDescriptor(k,Ee)||{value:k[Ee]}).get?ue=je.set?y.stylize("[Getter/Setter]","special"):y.stylize("[Getter]","special"):je.set&&(ue=y.stylize("[Setter]","special")),Fe(oe,Ee)||(X="["+Ee+"]"),ue||(y.seen.indexOf(je.value)<0?(ue=L(B)?g(y,je.value,null):g(y,je.value,B-1)).indexOf(`
`)>-1&&(ue=G?ue.split(`
`).map(function(ke){return"  "+ke}).join(`
`).substr(2):`
`+ue.split(`
`).map(function(ke){return"   "+ke}).join(`
`)):ue=y.stylize("[Circular]","special")),f(X)){if(G&&Ee.match(/^\d+$/))return ue;(X=JSON.stringify(""+Ee)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(X=X.substr(1,X.length-2),X=y.stylize(X,"name")):(X=X.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),X=y.stylize(X,"string"))}return X+": "+ue}function F(y){return Array.isArray(y)}function Y(y){return typeof y=="boolean"}function L(y){return y===null}function q(y){return typeof y=="number"}function a(y){return typeof y=="string"}function f(y){return y===void 0}function S(y){return M(y)&&me(y)==="[object RegExp]"}function M(y){return typeof y=="object"&&y!==null}function K(y){return M(y)&&me(y)==="[object Date]"}function ne(y){return M(y)&&(me(y)==="[object Error]"||y instanceof Error)}function ae(y){return typeof y=="function"}function me(y){return Object.prototype.toString.call(y)}function xe(y){return y<10?"0"+y.toString(10):y.toString(10)}u.debuglog=function(y){if(f(x)&&(x=b.env.NODE_DEBUG||""),y=y.toUpperCase(),!W[y])if(new RegExp("\\b"+y+"\\b","i").test(x)){var k=b.pid;W[y]=function(){var B=u.format.apply(u,arguments);console.error("%s %d: %s",y,k,B)}}else W[y]=function(){};return W[y]},u.inspect=_,_.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},u.isArray=F,u.isBoolean=Y,u.isNull=L,u.isNullOrUndefined=function(y){return y==null},u.isNumber=q,u.isString=a,u.isSymbol=function(y){return typeof y=="symbol"},u.isUndefined=f,u.isRegExp=S,u.isObject=M,u.isDate=K,u.isError=ne,u.isFunction=ae,u.isPrimitive=function(y){return y===null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||typeof y=="symbol"||y===void 0},u.isBuffer=m(384);var Ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function he(){var y=new Date,k=[xe(y.getHours()),xe(y.getMinutes()),xe(y.getSeconds())].join(":");return[y.getDate(),Ce[y.getMonth()],k].join(" ")}function Fe(y,k){return Object.prototype.hasOwnProperty.call(y,k)}u.log=function(){console.log("%s - %s",he(),u.format.apply(u,arguments))},u.inherits=m(717),u._extend=function(y,k){if(!k||!M(k))return y;for(var B=Object.keys(k),oe=B.length;oe--;)y[B[oe]]=k[B[oe]];return y}}},N={};function I(j){var u=N[j];if(u!==void 0)return u.exports;var m=N[j]={exports:{}};return E[j].call(m.exports,m,m.exports,I),m.exports}I.n=j=>{var u=j&&j.__esModule?()=>j.default:()=>j;return I.d(u,{a:u}),u},I.d=(j,u)=>{for(var m in u)I.o(u,m)&&!I.o(j,m)&&Object.defineProperty(j,m,{enumerable:!0,get:u[m]})},I.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),I.o=(j,u)=>Object.prototype.hasOwnProperty.call(j,u),I.r=j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var H={};return(()=>{I.r(H),I.d(H,{LSPluginUser:()=>dr,setupPluginUserInstance:()=>Yr});var j=I(520);I(856);const u=function(){this.__data__=[],this.size=0},m=function(t,e){return t===e||t!=t&&e!=e},b=function(t,e){for(var n=t.length;n--;)if(m(t[n][0],e))return n;return-1};var v=Array.prototype.splice;const x=function(t){var e=this.__data__,n=b(e,t);return!(n<0)&&(n==e.length-1?e.pop():v.call(e,n,1),--this.size,!0)},W=function(t){var e=this.__data__,n=b(e,t);return n<0?void 0:e[n][1]},_=function(t){return b(this.__data__,t)>-1},h=function(t,e){var n=this.__data__,r=b(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function C(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}C.prototype.clear=u,C.prototype.delete=x,C.prototype.get=W,C.prototype.has=_,C.prototype.set=h;const g=C,z=function(){this.__data__=new g,this.size=0},P=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},F=function(t){return this.__data__.get(t)},Y=function(t){return this.__data__.has(t)},L=typeof ft=="object"&&ft&&ft.Object===Object&&ft;var q=typeof self=="object"&&self&&self.Object===Object&&self;const a=L||q||Function("return this")(),f=a.Symbol;var S=Object.prototype,M=S.hasOwnProperty,K=S.toString,ne=f?f.toStringTag:void 0;const ae=function(t){var e=M.call(t,ne),n=t[ne];try{t[ne]=void 0;var r=!0}catch{}var i=K.call(t);return r&&(e?t[ne]=n:delete t[ne]),i};var me=Object.prototype.toString;const xe=function(t){return me.call(t)};var Ce=f?f.toStringTag:void 0;const he=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Ce&&Ce in Object(t)?ae(t):xe(t)},Fe=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},y=function(t){if(!Fe(t))return!1;var e=he(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},k=a["__core-js_shared__"];var B,oe=(B=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";const Ee=function(t){return!!oe&&oe in t};var G=Function.prototype.toString;const X=function(t){if(t!=null){try{return G.call(t)}catch{}try{return t+""}catch{}}return""};var ue=/^\[object .+?Constructor\]$/,je=Function.prototype,ke=Object.prototype,qe=je.toString,nt=ke.hasOwnProperty,pe=RegExp("^"+qe.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const fe=function(t){return!(!Fe(t)||Ee(t))&&(y(t)?pe:ue).test(X(t))},Oe=function(t,e){return t?.[e]},Ae=function(t,e){var n=Oe(t,e);return fe(n)?n:void 0},Ie=Ae(a,"Map"),Le=Ae(Object,"create"),Ue=function(){this.__data__=Le?Le(null):{},this.size=0},Nt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Ct=Object.prototype.hasOwnProperty;const zn=function(t){var e=this.__data__;if(Le){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return Ct.call(e,t)?e[t]:void 0};var qn=Object.prototype.hasOwnProperty;const Hn=function(t){var e=this.__data__;return Le?e[t]!==void 0:qn.call(e,t)},Bn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Le&&e===void 0?"__lodash_hash_undefined__":e,this};function rt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rt.prototype.clear=Ue,rt.prototype.delete=Nt,rt.prototype.get=zn,rt.prototype.has=Hn,rt.prototype.set=Bn;const dn=rt,Gn=function(){this.size=0,this.__data__={hash:new dn,map:new(Ie||g),string:new dn}},Wn=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},dt=function(t,e){var n=t.__data__;return Wn(e)?n[typeof e=="string"?"string":"hash"]:n.map},A=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},U=function(t){return dt(this,t).get(t)},V=function(t){return dt(this,t).has(t)},ee=function(t,e){var n=dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ce(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ce.prototype.clear=Gn,ce.prototype.delete=A,ce.prototype.get=U,ce.prototype.has=V,ce.prototype.set=ee;const Ne=ce,Ke=function(t,e){var n=this.__data__;if(n instanceof g){var r=n.__data__;if(!Ie||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ne(r)}return n.set(t,e),this.size=n.size,this};function Pe(t){var e=this.__data__=new g(t);this.size=e.size}Pe.prototype.clear=z,Pe.prototype.delete=P,Pe.prototype.get=F,Pe.prototype.has=Y,Pe.prototype.set=Ke;const Xe=Pe,ht=function(){try{var t=Ae(Object,"defineProperty");return t({},"",{}),t}catch{}}(),St=function(t,e,n){e=="__proto__"&&ht?ht(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Pt=function(t,e,n){(n!==void 0&&!m(t[e],n)||n===void 0&&!(e in t))&&St(t,e,n)},hn=function(t){return function(e,n,r){for(var i=-1,c=Object(e),d=r(e),p=d.length;p--;){var w=d[t?p:++i];if(n(c[w],w,c)===!1)break}return e}}();var pn=l&&!l.nodeType&&l,pt=pn&&!0&&s&&!s.nodeType&&s,gn=pt&&pt.exports===pn?a.Buffer:void 0,mn=gn?gn.allocUnsafe:void 0;const Jn=function(t,e){if(e)return t.slice();var n=t.length,r=mn?mn(n):new t.constructor(n);return t.copy(r),r},ot=a.Uint8Array,Ut=function(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e},He=function(t,e){var n=e?Ut(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},vn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var gt=Object.create;const $t=function(){function t(){}return function(e){if(!Fe(e))return{};if(gt)return gt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),yn=function(t,e){return function(n){return t(e(n))}},bn=yn(Object.getPrototypeOf,Object);var Vn=Object.prototype;const Rt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Vn)},_n=function(t){return typeof t.constructor!="function"||Rt(t)?{}:$t(bn(t))},be=function(t){return t!=null&&typeof t=="object"},it=function(t){return be(t)&&he(t)=="[object Arguments]"};var Be=Object.prototype,Dt=Be.hasOwnProperty,zt=Be.propertyIsEnumerable;const Et=it(function(){return arguments}())?it:function(t){return be(t)&&Dt.call(t,"callee")&&!zt.call(t,"callee")},Me=Array.isArray,qt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},mt=function(t){return t!=null&&qt(t.length)&&!y(t)},Ht=function(t){return be(t)&&mt(t)},ve=function(){return!1};var Bt=l&&!l.nodeType&&l,ye=Bt&&!0&&s&&!s.nodeType&&s,Gt=ye&&ye.exports===Bt?a.Buffer:void 0;const le=(Gt?Gt.isBuffer:void 0)||ve;var vt=Function.prototype,Wt=Object.prototype,Jt=vt.toString,Vt=Wt.hasOwnProperty,wn=Jt.call(Object);const st=function(t){if(!be(t)||he(t)!="[object Object]")return!1;var e=bn(t);if(e===null)return!0;var n=Vt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Jt.call(n)==wn};var re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Arguments]"]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;const Yt=function(t){return be(t)&&qt(t.length)&&!!re[he(t)]},Zt=function(t){return function(e){return t(e)}};var Qe=l&&!l.nodeType&&l,Ge=Qe&&!0&&s&&!s.nodeType&&s,at=Ge&&Ge.exports===Qe&&L.process,Kt=function(){try{var t=Ge&&Ge.require&&Ge.require("util").types;return t||at&&at.binding&&at.binding("util")}catch{}}(),kt=Kt&&Kt.isTypedArray;const et=kt?Zt(kt):Yt,We=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var ct=Object.prototype.hasOwnProperty;const xn=function(t,e,n){var r=t[e];ct.call(t,e)&&m(r,n)&&(n!==void 0||e in t)||St(t,e,n)},Cn=function(t,e,n,r){var i=!n;n||(n={});for(var c=-1,d=e.length;++c<d;){var p=e[c],w=r?r(n[p],t[p],p,n,t):void 0;w===void 0&&(w=t[p]),i?St(n,p,w):xn(n,p,w)}return n},Sn=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Xt=/^(?:0|[1-9]\d*)$/;const Ot=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&Xt.test(t))&&t>-1&&t%1==0&&t<e};var Qt=Object.prototype.hasOwnProperty;const At=function(t,e){var n=Me(t),r=!n&&Et(t),i=!n&&!r&&le(t),c=!n&&!r&&!i&&et(t),d=n||r||i||c,p=d?Sn(t.length,String):[],w=p.length;for(var $ in t)!e&&!Qt.call(t,$)||d&&($=="length"||i&&($=="offset"||$=="parent")||c&&($=="buffer"||$=="byteLength"||$=="byteOffset")||Ot($,w))||p.push($);return p},Je=function(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e};var jt=Object.prototype.hasOwnProperty;const En=function(t){if(!Fe(t))return Je(t);var e=Rt(t),n=[];for(var r in t)(r!="constructor"||!e&&jt.call(t,r))&&n.push(r);return n},kn=function(t){return mt(t)?At(t,!0):En(t)},Yn=function(t){return Cn(t,kn(t))},lt=function(t,e,n,r,i,c,d){var p=We(t,n),w=We(e,n),$=d.get(w);if($)Pt(t,n,$);else{var R=c?c(p,w,n+"",t,e,d):void 0,D=R===void 0;if(D){var J=Me(w),Q=!J&&le(w),Z=!J&&!Q&&et(w);R=w,J||Q||Z?Me(p)?R=p:Ht(p)?R=vn(p):Q?(D=!1,R=Jn(w,!0)):Z?(D=!1,R=He(w,!0)):R=[]:st(w)||Et(w)?(R=p,Et(p)?R=Yn(p):Fe(p)&&!y(p)||(R=_n(w))):D=!1}D&&(d.set(w,R),i(R,w,r,c,d),d.delete(w)),Pt(t,n,R)}},Zn=function t(e,n,r,i,c){e!==n&&hn(n,function(d,p){if(c||(c=new Xe),Fe(d))lt(e,n,p,r,t,i,c);else{var w=i?i(We(e,p),d,p+"",e,n,c):void 0;w===void 0&&(w=d),Pt(e,p,w)}},kn)},Tt=function(t){return t},en=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var tn=Math.max;const On=function(t,e,n){return e=tn(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,c=tn(r.length-e,0),d=Array(c);++i<c;)d[i]=r[e+i];i=-1;for(var p=Array(e+1);++i<e;)p[i]=r[i];return p[e]=n(d),en(t,this,p)}},Kn=function(t){return function(){return t}},It=ht?function(t,e){return ht(t,"toString",{configurable:!0,enumerable:!1,value:Kn(e),writable:!0})}:Tt;var nn=Date.now;const Xn=function(t){var e=0,n=0;return function(){var r=nn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(It),$e=function(t,e){return Xn(On(t,e,Tt),t+"")},An=function(t,e,n){if(!Fe(n))return!1;var r=typeof e;return!!(r=="number"?mt(n)&&Ot(e,n.length):r=="string"&&e in n)&&m(n[e],t)},jn=function(t){return $e(function(e,n){var r=-1,i=n.length,c=i>1?n[i-1]:void 0,d=i>2?n[2]:void 0;for(c=t.length>3&&typeof c=="function"?(i--,c):void 0,d&&An(n[0],n[1],d)&&(c=i<3?void 0:c,i=1),e=Object(e);++r<i;){var p=n[r];p&&t(e,p,r,c)}return e})}(function(t,e,n){Zn(t,e,n)});var yt=function(){return yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},yt.apply(this,arguments)};function Qn(t){return t.toLowerCase()}var bt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Re=/[^A-Z0-9]+/gi;function rn(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function Tn(t,e){return e===void 0&&(e={}),function(n,r){r===void 0&&(r={});for(var i=r.splitRegexp,c=i===void 0?bt:i,d=r.stripRegexp,p=d===void 0?Re:d,w=r.transform,$=w===void 0?Qn:w,R=r.delimiter,D=R===void 0?" ":R,J=rn(rn(n,c,"$1\0$2"),p,"\0"),Q=0,Z=J.length;J.charAt(Q)==="\0";)Q++;for(;J.charAt(Z-1)==="\0";)Z--;return J.slice(Q,Z).split("\0").map($).join(D)}(t,yt({delimiter:"."},e))}var on=I(729),_t=I.n(on);function sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o=navigator.platform.toLowerCase()==="win32"?j.win32:j.posix,T=function(t,e){return e===void 0&&(e={}),Tn(t,yt({delimiter:"_"},e))},O=jn;class ie extends _t(){constructor(e,n){super(),sn(this,"_tag",void 0),sn(this,"_opts",void 0),sn(this,"_logs",[]),this._tag=e,this._opts=n}write(e,n,r){var i;n!=null&&n.length&&n[n.length-1]===!0&&(r=!0,n.pop());const c=n.reduce((p,w)=>(w&&w instanceof Error?p+=`${w.message} ${w.stack}`:p+=w.toString(),p),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var d;this._logs.push([e,c]),(r||(i=this._opts)!==null&&i!==void 0&&i.console)&&((d=console)===null||d===void 0||d[e==="ERROR"?"error":"debug"](`${e}: ${c}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function de(t,...e){try{const n=new URL(t);if(!n.origin)throw new Error(null);const r=o.join(t.substr(n.origin.length),...e);return n.origin+r}catch{return o.join(t,...e)}}function _e(t,e){let n,r,i=!1;const c=p=>w=>{t&&clearTimeout(t),p(w),i=!0},d=new Promise((p,w)=>{n=c(p),r=c(w),t&&(t=setTimeout(()=>r(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:p=>e=p,resolve:n,reject:r,promise:d,get settled(){return i}}}const we=new Map;window.__injectedUIEffects=we;var wt=I(227),De=I.n(wt);function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tt="application/x-postmate-v1+json";let br=0;const wo={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},er=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===tt&&!!wo[t.data.postmate];class xo{constructor(e){te(this,"parent",void 0),te(this,"frame",void 0),te(this,"child",void 0),te(this,"events",{}),te(this,"childOrigin",void 0),te(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!er(n,this.childOrigin))return!1;const{data:r,name:i}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(c=>{c.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...n){return new Promise(r=>{const i=++br,c=d=>{d.data.uid===i&&d.data.postmate==="reply"&&(this.parent.removeEventListener("message",c,!1),r(d.data.value))};this.parent.addEventListener("message",c,!1),this.child.postMessage({postmate:"request",type:tt,property:e,args:n,uid:i},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:tt,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Co{constructor(e){te(this,"model",void 0),te(this,"parent",void 0),te(this,"parentOrigin",void 0),te(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!er(n,this.parentOrigin))return;const{property:r,uid:i,data:c,args:d}=n.data;n.data.postmate!=="call"?((p,w,$)=>{const R=typeof p[w]=="function"?p[w].apply(null,$):p[w];return Promise.resolve(R)})(this.model,r,d).then(p=>{n.source.postMessage({property:r,postmate:"reply",type:tt,uid:i,value:p},n.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](c)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:tt,value:{name:e,data:n}},this.parentOrigin)}}class tr{constructor(e){te(this,"container",void 0),te(this,"parent",void 0),te(this,"frame",void 0),te(this,"child",void 0),te(this,"childOrigin",void 0),te(this,"url",void 0),te(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(c=>{const d=document.createElement("a");d.href=c;const p=d.protocol.length>4?d.protocol:window.location.protocol,w=d.host.length?d.port==="80"||d.port==="443"?d.hostname:d.host:window.location.host;return d.origin||`${p}//${w}`})(e=e||this.url);let r,i=0;return new Promise((c,d)=>{const p=$=>!!er($,n)&&($.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",p,!1),this.childOrigin=$.origin,c(new xo(this))):d("Failed handshake"));this.parent.addEventListener("message",p,!1);const w=()=>{i++,this.child.postMessage({postmate:"handshake",type:tt,model:this.model},n),i===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{w(),r=setInterval(w,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}te(tr,"debug",!1),te(tr,"Model",void 0);class So{constructor(e){te(this,"child",void 0),te(this,"model",void 0),te(this,"parent",void 0),te(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const r=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),i.source.postMessage({postmate:"handshake-reply",type:tt},i.origin),this.parentOrigin=i.origin;const c=i.data.model;return c&&Object.keys(c).forEach(d=>{this.model[d]=c[d]}),e(new Co(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function an(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{importHTML:Eo,createSandboxContainer:ko}=window.QSandbox||{};function Oo(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,r)=>{try{const i=await window.apis.doAction(["readFile",t]);n({text:()=>i})}catch(i){console.error(i),r(i)}}))}class Ao extends _t(){constructor(e){super(),an(this,"_pluginLocal",void 0),an(this,"_frame",void 0),an(this,"_root",void 0),an(this,"_loaded",!1),an(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:r,execScripts:i}=await Eo(n,{fetch:Oo});this._mount(r,document.body);const c=ko(e,{elementGetter:()=>{var p;return(p=this._root)===null||p===void 0?void 0:p.firstChild}}).instance.proxy;c.__shadow_mode__=!0,c.LSPluginLocal=this._pluginLocal,c.LSPluginShadow=this,c.LSPluginUser=c.logseq=new dr(this._pluginLocal.toJSON(),this._pluginLocal.caller);const d=await i(c,!0);this._unmountFns.push(d.unmount),this._loaded=!0}_mount(e,n){const r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(r),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){var e,n;(e=this.frame)===null||e===void 0||(n=e.parentNode)===null||n===void 0||n.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function Ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ut=De()("LSPlugin:caller"),cn="#await#response#",jo="#lspmsg#",_r="#lspmsg#error#",In=t=>`#lspmsg#${t}`;class To extends _t(){constructor(e){super(),Ve(this,"_pluginLocal",void 0),Ve(this,"_connected",!1),Ve(this,"_parent",void 0),Ve(this,"_child",void 0),Ve(this,"_shadow",void 0),Ve(this,"_status",void 0),Ve(this,"_userModel",{}),Ve(this,"_call",void 0),Ve(this,"_callUserModel",void 0),Ve(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,r=this._pluginLocal!=null;let i=0;const c=new Map,d=_e(6e4),p=this._extendUserModel({"#lspmsg#ready#":async R=>{p[In(R?.pid)]=({type:D,payload:J})=>{ut(`[host (_call) -> *user] ${this._debugTag}`,D,J),n.emit(D,J)},await d.resolve()},"#lspmsg#beforeunload#":async R=>{const D=_e(1e4);n.emit("beforeunload",Object.assign({actor:D},R)),await D.promise},"#lspmsg#settings#":async({type:R,payload:D})=>{n.emit("settings:changed",D)},[jo]:async({ns:R,type:D,payload:J})=>{ut(`[host (async) -> *user] ${this._debugTag} ns=${R} type=${D}`,J),R&&R.startsWith("hook")?n.emit(`${R}:${D}`,J):n.emit(D,J)},"#lspmsg#reply#":({_sync:R,result:D})=>{if(ut(`[sync host -> *user] #${R}`,D),c.has(R)){const J=c.get(R);J&&(D!=null&&D.hasOwnProperty(_r)?J.reject(D[_r]):J.resolve(D),c.delete(R))}},...e});var w;if(r)return await d.promise,JSON.parse(JSON.stringify((w=this._pluginLocal)===null||w===void 0?void 0:w.toJSON()));const $=new So(p).sendHandshakeReply();return this._status="pending",await $.then(R=>{this._child=R,this._connected=!0,this._call=async(D,J={},Q)=>{if(Q){const Z=++i;c.set(Z,Q),J._sync=Z,Q.setTag(`async call #${Z}`),ut(`async call #${Z}`)}return R.emit(In(p.baseInfo.id),{type:D,payload:J}),Q?.promise},this._callUserModel=async(D,J)=>{try{p[D](J)}catch{ut(`[model method] #${D} not existed`)}},setInterval(()=>{if(c.size>100)for(const[D,J]of c)J.settled&&c.delete(D)},18e5)}).finally(()=>{this._status=void 0}),await d.promise,p.baseInfo}async call(e,n={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n)}async callAsync(e,n={}){var r;const i=_e(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n,i)}async callUserModel(e,...n){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async callUserModelAsync(e,...n){var r;return e=`${cn}${e}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,r=`${n}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);const c=document.querySelector(`#${r}`);c&&c.parentElement.removeChild(c);const d=document.createElement("div");d.classList.add("lsp-iframe-sandbox-container"),d.id=r,d.dataset.pid=n;try{var p;const D=(p=await this._pluginLocal._loadLayoutsData())===null||p===void 0?void 0:p.$$0;if(D){d.dataset.inited_layout="true";let{width:J,height:Q,left:Z,top:se,vw:ge,vh:Te}=D;Z=Math.max(Z,0),Z=typeof ge=="number"?`${Math.min(100*Z/ge,99)}%`:`${Z}px`,se=Math.max(se,45),se=typeof Te=="number"?`${Math.min(100*se/Te,99)}%`:`${se}px`,Object.assign(d.style,{width:J+"px",height:Q+"px",left:Z,top:se})}}catch(D){console.error("[Restore Layout Error]",D)}document.body.appendChild(d);const w=new tr({id:n+"_iframe",container:d,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let $,R=w.sendHandshake();return this._status="pending",new Promise((D,J)=>{$=setTimeout(()=>{J(new Error("handshake Timeout")),w.destroy()},4e3),R.then(Q=>{this._parent=Q,this._connected=!0,this.emit("connected"),Q.on(In(e.id),({type:Z,payload:se})=>{var ge,Te;ut("[user -> *host] ",Z,se),(ge=this._pluginLocal)===null||ge===void 0||ge.emit(Z,se||{}),(Te=this._pluginLocal)===null||Te===void 0||Te.caller.emit(Z,se||{})}),this._call=async(...Z)=>{await Q.call(In(e.id),{type:Z[0],payload:Object.assign(Z[1]||{},{$$pid:e.id})})},this._callUserModel=async(Z,...se)=>{if(Z.startsWith(cn))return await Q.get(Z.replace(cn,""),...se);Q.call(Z,se?.[0])},D(null)}).catch(Q=>{J(Q)}).finally(()=>{clearTimeout($)})}).catch(D=>{throw ut("[iframe sandbox] error",D),D}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new Ao(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(r,i={},c)=>{var d;return c&&(i.actor=c),(d=this._pluginLocal)===null||d===void 0||d.emit(r,Object.assign(i,{$$pid:e.id})),c?.promise},this._callUserModel=async(...r)=>{var i;let c=r[0];(i=c)!==null&&i!==void 0&&i.startsWith(cn)&&(c=c.replace(cn,""));const d=r[1]||{},p=this._userModel[c];typeof p=="function"&&await p.call(null,d)}}catch(r){throw ut("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let n=null;this._parent&&(n=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(n=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=n)===null||e===void 0||e.parentNode.removeChild(n)}}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class xr{constructor(e,n){wr(this,"ctx",void 0),wr(this,"opts",void 0),this.ctx=e,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}removeItem(e){var n;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}}class Io{constructor(e){var n,r,i;i=void 0,(r="ctx")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){var r,i;const c=this.ensureHostScope();return e=(r=T(e))===null||r===void 0?void 0:r.toLowerCase(),(i=c.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(c,n)}async loadScripts(...e){(e=e.map(n=>n!=null&&n.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const r=this.ensureHostScope();return e==="katex"&&r.katex&&n(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function Mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Cr=t=>`task_callback_${t}`;class Mo{constructor(e,n,r={}){Mt(this,"_client",void 0),Mt(this,"_requestId",void 0),Mt(this,"_requestOptions",void 0),Mt(this,"_promise",void 0),Mt(this,"_aborted",!1),this._client=e,this._requestId=n,this._requestOptions=r,this._promise=new Promise((p,w)=>{if(!this._requestId)return w(null);this._client.once(Cr(this._requestId),$=>{$&&$ instanceof Error?w($):p($)})});const{success:i,fail:c,final:d}=this._requestOptions;this._promise.then(p=>{i?.(p)}).catch(p=>{c?.(p)}).finally(()=>{d?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class nr extends on.EventEmitter{constructor(e){super(),Mt(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const r=n?.requestId;r&&this.emit(Cr(r),n?.payload)})}static createRequestTask(e,n,r){return new Mo(e,n,r)}async _request(e){const n=this.ctx.baseInfo.id,{success:r,fail:i,final:c,...d}=e,p=this.ctx.Experiments.invokeExperMethod("request",n,d),w=nr.createRequestTask(this.ctx.Request,p,e);return d.abortable?w:w.promise}get ctx(){return this._ctx}}const Fo=yn(Object.keys,Object);var Lo=Object.prototype.hasOwnProperty;const No=function(t){if(!Rt(t))return Fo(t);var e=[];for(var n in Object(t))Lo.call(t,n)&&n!="constructor"&&e.push(n);return e},rr=function(t){return mt(t)?At(t):No(t)},Po=function(t,e){return t&&hn(t,e,rr)},Uo=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},$o=function(t){return this.__data__.has(t)};function Mn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ne;++e<n;)this.add(t[e])}Mn.prototype.add=Mn.prototype.push=Uo,Mn.prototype.has=$o;const Ro=Mn,Do=function(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},zo=function(t,e){return t.has(e)},Sr=function(t,e,n,r,i,c){var d=1&n,p=t.length,w=e.length;if(p!=w&&!(d&&w>p))return!1;var $=c.get(t),R=c.get(e);if($&&R)return $==e&&R==t;var D=-1,J=!0,Q=2&n?new Ro:void 0;for(c.set(t,e),c.set(e,t);++D<p;){var Z=t[D],se=e[D];if(r)var ge=d?r(se,Z,D,e,t,c):r(Z,se,D,t,e,c);if(ge!==void 0){if(ge)continue;J=!1;break}if(Q){if(!Do(e,function(Te,Ye){if(!zo(Q,Ye)&&(Z===Te||i(Z,Te,n,r,c)))return Q.push(Ye)})){J=!1;break}}else if(Z!==se&&!i(Z,se,n,r,c)){J=!1;break}}return c.delete(t),c.delete(e),J},qo=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n},Ho=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n};var Er=f?f.prototype:void 0,or=Er?Er.valueOf:void 0;const Bo=function(t,e,n,r,i,c,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!c(new ot(t),new ot(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=qo;case"[object Set]":var w=1&r;if(p||(p=Ho),t.size!=e.size&&!w)return!1;var $=d.get(t);if($)return $==e;r|=2,d.set(t,e);var R=Sr(p(t),p(e),r,i,c,d);return d.delete(t),R;case"[object Symbol]":if(or)return or.call(t)==or.call(e)}return!1},Go=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Wo=function(t,e,n){var r=e(t);return Me(t)?r:Go(r,n(t))},Jo=function(t,e){for(var n=-1,r=t==null?0:t.length,i=0,c=[];++n<r;){var d=t[n];e(d,n,t)&&(c[i++]=d)}return c},Vo=function(){return[]};var Yo=Object.prototype.propertyIsEnumerable,kr=Object.getOwnPropertySymbols;const Zo=kr?function(t){return t==null?[]:(t=Object(t),Jo(kr(t),function(e){return Yo.call(t,e)}))}:Vo,Or=function(t){return Wo(t,rr,Zo)};var Ko=Object.prototype.hasOwnProperty;const Xo=function(t,e,n,r,i,c){var d=1&n,p=Or(t),w=p.length;if(w!=Or(e).length&&!d)return!1;for(var $=w;$--;){var R=p[$];if(!(d?R in e:Ko.call(e,R)))return!1}var D=c.get(t),J=c.get(e);if(D&&J)return D==e&&J==t;var Q=!0;c.set(t,e),c.set(e,t);for(var Z=d;++$<w;){var se=t[R=p[$]],ge=e[R];if(r)var Te=d?r(ge,se,R,e,t,c):r(se,ge,R,t,e,c);if(!(Te===void 0?se===ge||i(se,ge,n,r,c):Te)){Q=!1;break}Z||(Z=R=="constructor")}if(Q&&!Z){var Ye=t.constructor,Pn=e.constructor;Ye==Pn||!("constructor"in t)||!("constructor"in e)||typeof Ye=="function"&&Ye instanceof Ye&&typeof Pn=="function"&&Pn instanceof Pn||(Q=!1)}return c.delete(t),c.delete(e),Q},ir=Ae(a,"DataView"),sr=Ae(a,"Promise"),ar=Ae(a,"Set"),cr=Ae(a,"WeakMap");var Ar="[object Map]",jr="[object Promise]",Tr="[object Set]",Ir="[object WeakMap]",Mr="[object DataView]",Qo=X(ir),ei=X(Ie),ti=X(sr),ni=X(ar),ri=X(cr),xt=he;(ir&&xt(new ir(new ArrayBuffer(1)))!=Mr||Ie&&xt(new Ie)!=Ar||sr&&xt(sr.resolve())!=jr||ar&&xt(new ar)!=Tr||cr&&xt(new cr)!=Ir)&&(xt=function(t){var e=he(t),n=e=="[object Object]"?t.constructor:void 0,r=n?X(n):"";if(r)switch(r){case Qo:return Mr;case ei:return Ar;case ti:return jr;case ni:return Tr;case ri:return Ir}return e});const Fr=xt;var Lr="[object Arguments]",Nr="[object Array]",Fn="[object Object]",Pr=Object.prototype.hasOwnProperty;const oi=function(t,e,n,r,i,c){var d=Me(t),p=Me(e),w=d?Nr:Fr(t),$=p?Nr:Fr(e),R=(w=w==Lr?Fn:w)==Fn,D=($=$==Lr?Fn:$)==Fn,J=w==$;if(J&&le(t)){if(!le(e))return!1;d=!0,R=!1}if(J&&!R)return c||(c=new Xe),d||et(t)?Sr(t,e,n,r,i,c):Bo(t,e,w,n,r,i,c);if(!(1&n)){var Q=R&&Pr.call(t,"__wrapped__"),Z=D&&Pr.call(e,"__wrapped__");if(Q||Z){var se=Q?t.value():t,ge=Z?e.value():e;return c||(c=new Xe),i(se,ge,n,r,c)}}return!!J&&(c||(c=new Xe),Xo(t,e,n,r,i,c))},Ur=function t(e,n,r,i,c){return e===n||(e==null||n==null||!be(e)&&!be(n)?e!=e&&n!=n:oi(e,n,r,i,t,c))},ii=function(t,e,n,r){var i=n.length,c=i,d=!r;if(t==null)return!c;for(t=Object(t);i--;){var p=n[i];if(d&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++i<c;){var w=(p=n[i])[0],$=t[w],R=p[1];if(d&&p[2]){if($===void 0&&!(w in t))return!1}else{var D=new Xe;if(r)var J=r($,R,w,t,e,D);if(!(J===void 0?Ur(R,$,3,r,D):J))return!1}}return!0},$r=function(t){return t==t&&!Fe(t)},si=function(t){for(var e=rr(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$r(i)]}return e},Rr=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},ai=function(t){var e=si(t);return e.length==1&&e[0][2]?Rr(e[0][0],e[0][1]):function(n){return n===t||ii(n,t,e)}},lr=function(t){return typeof t=="symbol"||be(t)&&he(t)=="[object Symbol]"};var ci=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,li=/^\w*$/;const ur=function(t,e){if(Me(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!lr(t))||li.test(t)||!ci.test(t)||e!=null&&t in Object(e)};function fr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],c=n.cache;if(c.has(i))return c.get(i);var d=t.apply(this,r);return n.cache=c.set(i,d)||c,d};return n.cache=new(fr.Cache||Ne),n}fr.Cache=Ne;const ui=fr;var fi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,di=/\\(\\)?/g;const hi=function(t){var e=ui(t,function(r){return n.size===500&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(fi,function(n,r,i,c){e.push(i?c.replace(di,"$1"):r||n)}),e}),pi=function(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Dr=f?f.prototype:void 0,zr=Dr?Dr.toString:void 0;const gi=function t(e){if(typeof e=="string")return e;if(Me(e))return pi(e,t)+"";if(lr(e))return zr?zr.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n},mi=function(t){return t==null?"":gi(t)},qr=function(t,e){return Me(t)?t:ur(t,e)?[t]:hi(mi(t))},Ln=function(t){if(typeof t=="string"||lr(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},Hr=function(t,e){for(var n=0,r=(e=qr(e,t)).length;t!=null&&n<r;)t=t[Ln(e[n++])];return n&&n==r?t:void 0},vi=function(t,e,n){var r=t==null?void 0:Hr(t,e);return r===void 0?n:r},yi=function(t,e){return t!=null&&e in Object(t)},bi=function(t,e,n){for(var r=-1,i=(e=qr(e,t)).length,c=!1;++r<i;){var d=Ln(e[r]);if(!(c=t!=null&&n(t,d)))break;t=t[d]}return c||++r!=i?c:!!(i=t==null?0:t.length)&&qt(i)&&Ot(d,i)&&(Me(t)||Et(t))},_i=function(t,e){return t!=null&&bi(t,e,yi)},wi=function(t,e){return ur(t)&&$r(e)?Rr(Ln(t),e):function(n){var r=vi(n,t);return r===void 0&&r===e?_i(n,t):Ur(e,r,3)}},xi=function(t){return function(e){return e?.[t]}},Ci=function(t){return function(e){return Hr(e,t)}},Si=function(t){return ur(t)?xi(Ln(t)):Ci(t)},Ei=function(t){return typeof t=="function"?t:t==null?Tt:typeof t=="object"?Me(t)?wi(t[0],t[1]):ai(t):Si(t)},ki=function(t,e){var n={};return e=Ei(e),Po(t,function(r,i,c){St(n,e(r,i,c),r)}),n};function Br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Oi{constructor(e,n){Br(this,"ctx",void 0),Br(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=n,e._execCallableAPI("register-search-service",e.baseInfo.id,n.name,n.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(Me(r?.blocks)&&(r.blocks=r.blocks.map(i=>i&&ki(i,(c,d)=>`block/${d}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,i])=>{const c=(d=>`service:search:${d}:${n.name}`)(r);e.caller.on(c,async d=>{if(y(n?.[i.f])){let p=null;try{p=await n[i.f].apply(n,(i.args||[]).map(w=>{if(d){if(w===!0)return d;if(d.hasOwnProperty(w)){const $=d[w];return delete d[w],$}}})),i.transformOutput&&(p=i.transformOutput(p))}catch(w){console.error("[SearchService] ",w),p=w}finally{i.reply&&e.caller.call(`${c}:reply`,p)}}})})}}function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ai=Symbol.for("proxy-continue"),ji=De()("LSPlugin:user"),Gr=new ie("",{console:!0});function Ft(t,e,n){var r;if(typeof n!="function")return!1;const{key:i,label:c,desc:d,palette:p,keybinding:w,extras:$}=e,R=`SimpleCommandHook${i}${++Vr}`;this.Editor["on"+R](n),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:c,type:t,desc:d,keybinding:w,extras:$},["editor/hook",R]],p]})}function Wr(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(Gr.error(`#${t} is not a valid UUID string.`),!1);var e}let Nn=null,Jr=new Map;const Ti={async getInfo(t){return Nn||(Nn=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?Nn[t]:Nn},registerCommand:Ft,registerSearchService(t){if(Jr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);Jr.set(t.name,new Oi(this,t))},registerCommandPalette(t,e){const{key:n,label:r,keybinding:i}=t;return Ft.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){const{binding:n}=t,r="$shortcut$",i=r+T(n);return Ft.call(this,r,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;const r=this.baseInfo.id;(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,r=t;Ft.call(this,"page-menu-item",{key:n,label:r},e)},onBlockRendererSlotted(t,e){if(!Wr(t))return;const n=this.baseInfo.id,r=`hook:editor:${T(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(t,...e){var n;if(!(t=(n=t)===null||n===void 0?void 0:n.trim()))return;let[r,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const c=t.replace(`${r}.${i}.`,"");if(!r||!i||!c)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,i.toLowerCase(),c,e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let Vr=0;const Ii={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var n;ji("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(r=>{const[i,...c]=r;if(i==="editor/hook"){let d=c[0],p=()=>{var $;($=this.caller)===null||$===void 0||$.callUserModel(d)};typeof d=="function"&&(p=d);const w=`SlashCommandHook${i}${++Vr}`;r[1]=w,this.Editor["on"+w](p)}return r}),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id;Ft.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id;Ft.call(this,"highlight-context-menu-item",{key:r,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){const r="block-content-"+e;n!=null&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},Mi={onBlockChanged(t,e){if(!Wr(t))return;const n=this.baseInfo.id,r=`hook:db:${T(`block:${t}`)}`,i=({block:c,txData:d,txMeta:p})=>{c.uuid===t&&e(c,d,p)};return this.caller.on(r,i),this.App._installPluginHook(n,r),()=>{this.caller.off(r,i),this.App._uninstallPluginHook(n,r)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(n=>typeof n=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},Fi={},Li={},Ni={makeSandboxStorage(){return new xr(this,{assets:!0})}};class dr extends _t(){constructor(e,n){super(),ze(this,"_baseInfo",void 0),ze(this,"_caller",void 0),ze(this,"_version","0.0.14"),ze(this,"_debugTag",""),ze(this,"_settingsSchema",void 0),ze(this,"_connected",!1),ze(this,"_ui",new Map),ze(this,"_mFileStorage",void 0),ze(this,"_mRequest",void 0),ze(this,"_mExperiments",void 0),ze(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),n.on("settings:changed",r=>{const i=Object.assign({},this.settings),c=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...c},i)}),n.on("beforeunload",async r=>{const{actor:i,...c}=r,d=this._beforeunloadCallback;try{d&&await d(c),i?.resolve(null)}catch(p){console.debug(`${n.debugTag} [beforeunload] `,p),i?.reject(p)}})}async ready(e,n){if(!this._connected)try{var r;typeof e=="function"&&(n=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=O(this._baseInfo,i),(r=i)!==null&&r!==void 0&&r.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(c,d){const p=(d||[]).reduce((w,$)=>("default"in $&&(w[$.key]=$.default),w),{});return Object.assign(p,c)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(c){console.warn(c)}n&&n.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const n=this._ui.get(0);n&&n.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((n=e.baseInfo)===null||n===void 0?void 0:n.effect)||!((r=e.baseInfo)!==null&&r!==void 0&&r.iir));var e,n,r}get logger(){return Gr}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),de(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const r=this,i=this.caller;return new Proxy(e,{get(c,d,p){const w=c[d];return function(...$){if(w){const D=w.apply(r,$.concat(n));if(D!==Ai)return D}if(n){const D=d.toString().match(/^(once|off|on)/i);if(D!=null){const J=D[0].toLowerCase(),Q=D.input.slice(J.length),Z=J==="off",se=r.baseInfo.id,ge=`hook:${n}:${T(Q)}`,Te=$[0];i[J](ge,Te);const Ye=()=>{i.off(ge,Te),i.listenerCount(ge)||r.App._uninstallPluginHook(se,ge)};return Z?void Ye():(r.App._installPluginHook(se,ge),Ye)}}let R=d;return["git","ui","assets"].includes(n)&&(R=n+"_"+R),i.callAsync("api:call",{tag:n,method:R,args:$})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Ti,"app")}get Editor(){return this._makeUserProxy(Ii,"editor")}get DB(){return this._makeUserProxy(Mi,"db")}get Git(){return this._makeUserProxy(Fi,"git")}get UI(){return this._makeUserProxy(Li,"ui")}get Assets(){return this._makeUserProxy(Ni,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new xr(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new nr(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Io(this)),e}}function Yr(t,e){return new dr(t,e)}if(window.__LSP__HOST__==null){const t=new To(null);window.logseq=Yr({},t)}})(),H})())})(Dn,Dn.exports);Dn.exports;const Pi=typeof atob=="function",Ui=typeof btoa=="function",Lt=typeof Buffer=="function",Zr=typeof TextDecoder=="function"?new TextDecoder:void 0,Kr=typeof TextEncoder=="function"?new TextEncoder:void 0,$i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",un=Array.prototype.slice.call($i),Un=(s=>{let l={};return s.forEach((E,N)=>l[E]=N),l})(un),Ri=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Se=String.fromCharCode.bind(String),Xr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):s=>new Uint8Array(Array.prototype.slice.call(s,0)),Di=s=>s.replace(/=/g,"").replace(/[+\/]/g,l=>l=="+"?"-":"_"),ho=s=>s.replace(/[^A-Za-z0-9\+\/]/g,""),zi=s=>{let l,E,N,I,H="";const j=s.length%3;for(let u=0;u<s.length;){if((E=s.charCodeAt(u++))>255||(N=s.charCodeAt(u++))>255||(I=s.charCodeAt(u++))>255)throw new TypeError("invalid character found");l=E<<16|N<<8|I,H+=un[l>>18&63]+un[l>>12&63]+un[l>>6&63]+un[l&63]}return j?H.slice(0,j-3)+"===".substring(j):H},po=Ui?s=>btoa(s):Lt?s=>Buffer.from(s,"binary").toString("base64"):zi,qi=Lt?s=>Buffer.from(s).toString("base64"):s=>{let E=[];for(let N=0,I=s.length;N<I;N+=4096)E.push(Se.apply(null,s.subarray(N,N+4096)));return po(E.join(""))},Hi=s=>{if(s.length<2){var l=s.charCodeAt(0);return l<128?s:l<2048?Se(192|l>>>6)+Se(128|l&63):Se(224|l>>>12&15)+Se(128|l>>>6&63)+Se(128|l&63)}else{var l=65536+(s.charCodeAt(0)-55296)*1024+(s.charCodeAt(1)-56320);return Se(240|l>>>18&7)+Se(128|l>>>12&63)+Se(128|l>>>6&63)+Se(128|l&63)}},Bi=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Gi=s=>s.replace(Bi,Hi),Qr=Lt?s=>Buffer.from(s,"utf8").toString("base64"):Kr?s=>qi(Kr.encode(s)):s=>po(Gi(s)),go=(s,l=!1)=>l?Di(Qr(s)):Qr(s),Wi=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ji=s=>{switch(s.length){case 4:var l=(7&s.charCodeAt(0))<<18|(63&s.charCodeAt(1))<<12|(63&s.charCodeAt(2))<<6|63&s.charCodeAt(3),E=l-65536;return Se((E>>>10)+55296)+Se((E&1023)+56320);case 3:return Se((15&s.charCodeAt(0))<<12|(63&s.charCodeAt(1))<<6|63&s.charCodeAt(2));default:return Se((31&s.charCodeAt(0))<<6|63&s.charCodeAt(1))}},Vi=s=>s.replace(Wi,Ji),Yi=s=>{if(s=s.replace(/\s+/g,""),!Ri.test(s))throw new TypeError("malformed base64.");s+="==".slice(2-(s.length&3));let l,E="",N,I;for(let H=0;H<s.length;)l=Un[s.charAt(H++)]<<18|Un[s.charAt(H++)]<<12|(N=Un[s.charAt(H++)])<<6|(I=Un[s.charAt(H++)]),E+=N===64?Se(l>>16&255):I===64?Se(l>>16&255,l>>8&255):Se(l>>16&255,l>>8&255,l&255);return E},mo=Pi?s=>atob(ho(s)):Lt?s=>Buffer.from(s,"base64").toString("binary"):Yi,Zi=Lt?s=>Xr(Buffer.from(s,"base64")):s=>Xr(mo(s).split("").map(l=>l.charCodeAt(0))),Ki=Lt?s=>Buffer.from(s,"base64").toString("utf8"):Zr?s=>Zr.decode(Zi(s)):s=>Vi(mo(s)),Xi=s=>ho(s.replace(/[-_]/g,l=>l=="-"?"+":"/")),Qi=s=>Ki(Xi(s));const eo=`.drawio-plugin__preview{position:relative;display:flex;justify-content:center;align-items:center;min-width:200px;max-width:100%;cursor:default}.drawio-plugin__preview>svg{max-width:100%}.drawio-plugin__preview>.overlay{display:none;position:absolute;inset:0;background-image:linear-gradient(var(--ls-primary-background-color),transparent)}.drawio-plugin__preview:hover>.overlay{display:block}.drawio-plugin__toolbar{display:none;position:absolute;top:0;left:0;right:0}.drawio-plugin__preview:hover .drawio-plugin__toolbar{display:flex;flex-direction:row;justify-content:space-between;align-content:center}.drawio-plugin__toolbar-actions{display:flex;flex-direction:row;align-content:center}.drawio-plugin__toolbar-actions button{display:inline-flex;cursor:pointer;width:18px;height:18px;margin-left:.25rem;margin-right:.25rem}.drawio-plugin__toolbar-actions button>svg{width:100%;height:100%}
`;var vo={exports:{}};(function(s){var l=Object.prototype.hasOwnProperty,E="~";function N(){}Object.create&&(N.prototype=Object.create(null),new N().__proto__||(E=!1));function I(m,b,v){this.fn=m,this.context=b,this.once=v||!1}function H(m,b,v,x,W){if(typeof v!="function")throw new TypeError("The listener must be a function");var _=new I(v,x||m,W),h=E?E+b:b;return m._events[h]?m._events[h].fn?m._events[h]=[m._events[h],_]:m._events[h].push(_):(m._events[h]=_,m._eventsCount++),m}function j(m,b){--m._eventsCount===0?m._events=new N:delete m._events[b]}function u(){this._events=new N,this._eventsCount=0}u.prototype.eventNames=function(){var b=[],v,x;if(this._eventsCount===0)return b;for(x in v=this._events)l.call(v,x)&&b.push(E?x.slice(1):x);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(v)):b},u.prototype.listeners=function(b){var v=E?E+b:b,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var W=0,_=x.length,h=new Array(_);W<_;W++)h[W]=x[W].fn;return h},u.prototype.listenerCount=function(b){var v=E?E+b:b,x=this._events[v];return x?x.fn?1:x.length:0},u.prototype.emit=function(b,v,x,W,_,h){var C=E?E+b:b;if(!this._events[C])return!1;var g=this._events[C],z=arguments.length,P,F;if(g.fn){switch(g.once&&this.removeListener(b,g.fn,void 0,!0),z){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,v),!0;case 3:return g.fn.call(g.context,v,x),!0;case 4:return g.fn.call(g.context,v,x,W),!0;case 5:return g.fn.call(g.context,v,x,W,_),!0;case 6:return g.fn.call(g.context,v,x,W,_,h),!0}for(F=1,P=new Array(z-1);F<z;F++)P[F-1]=arguments[F];g.fn.apply(g.context,P)}else{var Y=g.length,L;for(F=0;F<Y;F++)switch(g[F].once&&this.removeListener(b,g[F].fn,void 0,!0),z){case 1:g[F].fn.call(g[F].context);break;case 2:g[F].fn.call(g[F].context,v);break;case 3:g[F].fn.call(g[F].context,v,x);break;case 4:g[F].fn.call(g[F].context,v,x,W);break;default:if(!P)for(L=1,P=new Array(z-1);L<z;L++)P[L-1]=arguments[L];g[F].fn.apply(g[F].context,P)}}return!0},u.prototype.on=function(b,v,x){return H(this,b,v,x,!1)},u.prototype.once=function(b,v,x){return H(this,b,v,x,!0)},u.prototype.removeListener=function(b,v,x,W){var _=E?E+b:b;if(!this._events[_])return this;if(!v)return j(this,_),this;var h=this._events[_];if(h.fn)h.fn===v&&(!W||h.once)&&(!x||h.context===x)&&j(this,_);else{for(var C=0,g=[],z=h.length;C<z;C++)(h[C].fn!==v||W&&!h[C].once||x&&h[C].context!==x)&&g.push(h[C]);g.length?this._events[_]=g.length===1?g[0]:g:j(this,_)}return this},u.prototype.removeAllListeners=function(b){var v;return b?(v=E?E+b:b,this._events[v]&&j(this,v)):(this._events=new N,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=E,u.EventEmitter=u,s.exports=u})(vo);var es=vo.exports;const hr=fo(es);var pr=(s=>(s.Kennedy="kennedy",s.Min="min",s.Sketch="sketch",s.Simple="simple",s))(pr||{}),gr=(s=>(s.Off="off",s.On="on",s.Auto="auto",s))(gr||{}),Ze=(s=>(s.Save="save",s.Exit="exit",s))(Ze||{});class to{ui;dark;embed="1";proto="json";spin="1";libraries="1";constructor(){this.ui=logseq.settings?.ui??"kennedy";const l=logseq.settings?.darkMode??"auto";this.dark=l==="on"?"1":l==="off"?"0":"auto"}}class ts{constructor(l){this.baseUrl=l}urlConfig=new to;async getUrl(){this.urlConfig=new to;const{preferredThemeMode:l}=await logseq.App.getUserConfigs();this.urlConfig.dark=this.urlConfig.dark==="auto"?l==="light"?"0":"1":this.urlConfig.dark;const E=new URLSearchParams(this.urlConfig);return`${this.baseUrl}?${E.toString()}`}}class ns extends hr{configManager;iframeEl;ready=!1;messageEventEmitter=new hr;handleMessageEvent=l=>{if(typeof l.data!="string")return;let E;try{if(E=JSON.parse(l.data),!E.event)return}catch{}this.messageEventEmitter.emit(E.event,E)};handleSave=async()=>{this.sendAction({action:"export",format:"xmlsvg",background:"transparent"});const l=await this.waitFor("export"),E=l.data.indexOf(","),N=l.data.slice(E+1);this.emit("save",Qi(N))};handleExit=async()=>{this.emit("exit"),this.hideFrame(),this.ready=!1};constructor(l,E){super(),this.configManager=E??new ts(l),window.addEventListener("message",this.handleMessageEvent),this.messageEventEmitter.on("init",()=>this.ready=!0),this.messageEventEmitter.on("save",this.handleSave),this.messageEventEmitter.on("exit",this.handleExit)}async waitFor(l){return new Promise(E=>{this.messageEventEmitter.once(l,N=>E(N))})}sendAction(l){this.ready&&this.iframeEl?.contentWindow?.postMessage(JSON.stringify(l),"*")}createFrame(){this.iframeEl=document.createElement("iframe"),document.getElementById("iframe-inner").appendChild(this.iframeEl)}hideFrame(){document.getElementById("iframe-wrap")?.style.setProperty("display","none"),this.iframeEl?.setAttribute("style","display: none;"),this.iframeEl?.removeAttribute("src")}async showFrame(){this.iframeEl||this.createFrame();const l=document.getElementById("iframe-wrap");l?.style.setProperty("display","block"),this.iframeEl?.removeAttribute("style"),this.iframeEl?.setAttribute("src",await this.configManager.getUrl()),this.configManager.urlConfig.dark==="1"?l?.classList.add("dark"):l?.classList.remove("dark")}async open(l){await this.showFrame(),await this.waitFor("init"),this.sendAction({action:"load",xml:l??""})}showTemplate(){this.sendAction({action:"template"})}}const rs={id:"logseq-drawio-plugin",icon:"./logo.png"},os="preview",is="svg-container",ss="close";class fn extends hr{rootEl;svgContentEl;closeButton;isShow=!1;_scale=1;_moveX=0;_moveY=0;handleScroll=l=>{l.deltaY<0?this.scale+=.1:l.deltaY>0&&(this.scale-=.1)};handleClose=()=>this.hide();handleKeyUp=l=>{this.isShow&&l.key==="Escape"&&this.hide()};handleMouseMove=l=>{const{movementX:E,movementY:N}=l;this.moveX=this.moveX+E/this.scale,this.moveY=this.moveY+N/this.scale};handleSvgMouseDown=()=>{window.addEventListener("mousemove",this.handleMouseMove)};handleMouseUp=()=>{window.removeEventListener("mousemove",this.handleMouseMove)};constructor(l=os){super(),this.rootEl=document.getElementById(l),this.svgContentEl=this.rootEl.querySelector(`#${is}`),this.closeButton=this.rootEl.querySelector(`#${ss}`),this.scale=1.2,window.addEventListener("keyup",this.handleKeyUp),this.svgContentEl.addEventListener("wheel",this.handleScroll),this.svgContentEl.addEventListener("mousedown",this.handleSvgMouseDown),window.addEventListener("mouseup",this.handleMouseUp),this.closeButton.addEventListener("click",this.handleClose)}set scale(l){this._scale=l,this.svgContentEl.style.setProperty("--preview-scale",`${l}`)}get scale(){return this._scale}set moveX(l){this._moveX=l,this.svgContentEl.style.setProperty("--preview-move-x",`${l}px`)}get moveX(){return this._moveX}set moveY(l){this._moveY=l,this.svgContentEl.style.setProperty("--preview-move-y",`${l}px`)}get moveY(){return this._moveY}show(l){this.rootEl.style.display="block",l&&(this.svgContentEl.innerHTML=l),this.isShow=!0,this.emit(fn.ShowEventName)}hide(){this.rootEl.style.removeProperty("display"),this.svgContentEl.innerHTML="",this.scale=1.2,this.moveX=0,this.moveY=0,this.isShow=!1,this.emit(fn.HideEventName)}static HideEventName="hide";static ShowEventName="show"}var as=typeof ft=="object"&&ft&&ft.Object===Object&&ft,cs=as,ls=cs,us=typeof self=="object"&&self&&self.Object===Object&&self,fs=ls||us||Function("return this")(),ds=fs,hs=ds,ps=hs.Symbol,mr=ps;function gs(s,l){for(var E=-1,N=s==null?0:s.length,I=Array(N);++E<N;)I[E]=l(s[E],E,s);return I}var ms=gs,vs=Array.isArray,ys=vs,no=mr,yo=Object.prototype,bs=yo.hasOwnProperty,_s=yo.toString,ln=no?no.toStringTag:void 0;function ws(s){var l=bs.call(s,ln),E=s[ln];try{s[ln]=void 0;var N=!0}catch{}var I=_s.call(s);return N&&(l?s[ln]=E:delete s[ln]),I}var xs=ws,Cs=Object.prototype,Ss=Cs.toString;function Es(s){return Ss.call(s)}var ks=Es,ro=mr,Os=xs,As=ks,js="[object Null]",Ts="[object Undefined]",oo=ro?ro.toStringTag:void 0;function Is(s){return s==null?s===void 0?Ts:js:oo&&oo in Object(s)?Os(s):As(s)}var Ms=Is;function Fs(s){return s!=null&&typeof s=="object"}var Ls=Fs,Ns=Ms,Ps=Ls,Us="[object Symbol]";function $s(s){return typeof s=="symbol"||Ps(s)&&Ns(s)==Us}var Rs=$s,io=mr,Ds=ms,zs=ys,qs=Rs,Hs=1/0,so=io?io.prototype:void 0,ao=so?so.toString:void 0;function bo(s){if(typeof s=="string")return s;if(zs(s))return Ds(s,bo)+"";if(qs(s))return ao?ao.call(s):"";var l=s+"";return l=="0"&&1/s==-Hs?"-0":l}var Bs=bo,Gs=Bs;function Ws(s){return s==null?"":Gs(s)}var Js=Ws;function Vs(s){return function(l){return s?.[l]}}var Ys=Vs,Zs=Ys,Ks={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xs=Zs(Ks),Qs=Xs,ea=Js,ta=Qs,_o=/&(?:amp|lt|gt|quot|#39);/g,na=RegExp(_o.source);function ra(s){return s=ea(s),s&&na.test(s)?s.replace(_o,ta):s}var oa=ra;const ia=fo(oa),sa=s=>new RegExp(`\\{\\{renderer\\s*:drawio,\\s*${s}\\}\\}`,"i");function aa(s){return/\.(drawio|svg)/i.test(s)}function vr(){logseq.UI.showMsg("file saved")}function yr(s){return`{{renderer :drawio, ${s}}}`}const ca=async(s,l,E)=>{const N=logseq.Assets.makeSandboxStorage(),I=document.createElement("input");I.type="file";const H=await new Promise((m,b)=>{I.addEventListener("change",async()=>{const v=I.files?.[0];if(!v||!aa(v.name)){b();return}const x=v.name;if(await N.hasItem(x)){logseq.UI.showMsg("file name already exists!"),b();return}const _=await v.text();m(_)}),I.click()});let j="";const u=async m=>{j||(j=`${Date.now()}.svg`,await logseq.Editor.editBlock(s,{pos:0}),await logseq.Editor.insertAtEditingCursor(yr(j))),await N.setItem(j,m),vr()};l.on(Ze.Save,u),l.once(Ze.Exit,()=>{console.log("off save event"),l.off(Ze.Save,u),logseq.hideMainUI()}),logseq.showMainUI(),E.show();try{await l.open(H)}catch(m){console.log("create file failed",m),logseq.hideMainUI()}finally{E.hide()}},la=async(s,l,E)=>{const N=logseq.Assets.makeSandboxStorage();let I="";const H=async j=>{I||(I=`${Date.now()}.svg`,await logseq.Editor.editBlock(s,{pos:0}),await logseq.Editor.insertAtEditingCursor(yr(I))),await N.setItem(I,j),vr()};l.on(Ze.Save,H),l.once(Ze.Exit,()=>{console.log("off save event"),l.off(Ze.Save,H),logseq.hideMainUI()}),logseq.showMainUI(),E.show();try{await l.open()}catch(j){console.log("create file failed",j),logseq.hideMainUI()}finally{E.hide()}l.showTemplate()},ua=async(s,l,E)=>{const N=logseq.Assets.makeSandboxStorage(),I=s.dataset.fileName,H=s.dataset.uuid,j=await N.getItem(I);E.show(),logseq.showMainUI();try{await l.open(j)}catch(m){console.error("open drawio failed",m),logseq.hideMainUI();return}finally{E.hide()}const u=m=>{N.setItem(I,m),vr()};l.on(Ze.Save,u),l.once(Ze.Exit,()=>{l.off(Ze.Save,u),logseq.hideMainUI(),logseq.Editor.editBlock(H)})},fa=async s=>{const l=logseq.Assets.makeSandboxStorage(),E=s.dataset.fileName,N=s.dataset.uuid;let I=!0;try{(await logseq.DB.datascriptQuery(`[:find (pull ?b [*]) :where [?b :block/content ?content] [(clojure.string/includes? ?content "${yr(E)}")]]`)).length>1&&(I=!1)}catch(u){logseq.UI.showMsg(`Failed(${String(u)}) to query block!`,"error");return}I&&(console.log("remove file",E),await l.removeItem(E));const H=await logseq.Editor.getBlock(N);if(!H)return;const j=H.content.replace(sa(E),"");logseq.Editor.updateBlock(N,j)},da=async(s,l)=>{const E=logseq.Assets.makeSandboxStorage(),N=s.dataset.fileName,I=await E.getItem(N);if(!I){logseq.UI.showMsg(`file(${N}) is not found!`,"error");return}logseq.showMainUI(),l.show(I),l.once(fn.HideEventName,()=>{logseq.hideMainUI()})},co=async(s,l)=>{const E=logseq.Assets.makeSandboxStorage(),N=s.dataset.fileName,I=await E.getItem(N);if(!I){logseq.UI.showMsg(`file(${N}) is not found!`,"error");return}let H;if(l==="svg")H=new Blob([I]);else{const b=I.match(/content="(.*?)"/);if(!b){logseq.UI.showMsg("original drawio file can't be extracted from logseq file asset.","error");return}H=new Blob([ia(b[1])])}const j=l==="svg"?N:N.replace(/\.svg$/,".drawio"),u=URL.createObjectURL(H),m=document.createElement("a");m.href=u,m.download=j,m.click(),setTimeout(()=>{URL.revokeObjectURL(u),m.href=""})},ha=async s=>{const l=logseq.Assets.makeSandboxStorage(),E=s.dataset.fileName,N=await l.getItem(E);if(!N){logseq.UI.showMsg(`file(${E}) is not found!`,"error");return}const I=go(N??""),H=document.createElement("img"),{width:j,height:u}=await new Promise(W=>{H.onload=()=>{const _=H.naturalWidth,h=H.naturalHeight;W({width:_,height:h})},H.src=`data:image/svg+xml;base64,${I}`}),m=document.createElement("canvas");m.width=j,m.height=u;const b=m.getContext("2d");if(!b)return;b.fillStyle="#FFFFFF",b.fillRect(0,0,j,u),b.drawImage(H,0,0);const v="image/png",x=await new Promise(W=>m.toBlob(W,v));if(x){await logseq.showMainUI({autoFocus:!0});try{await navigator.clipboard.write([new ClipboardItem({[v]:x})]),logseq.UI.showMsg("Copied to clipboard!","success")}catch(W){logseq.UI.showMsg(`Failed(${String(W)}) to copy to clipboard!`,"error")}finally{logseq.hideMainUI()}}},pa="spinner";class ga{rootEl;constructor(l=pa){this.rootEl=document.getElementById(l)}hide(){this.rootEl.style.removeProperty("display")}show(){this.rootEl.style.display="block"}}const ma=[{key:"ui",title:"UI",default:pr.Kennedy,description:"draw.io ui",type:"enum",enumChoices:Object.values(pr),enumPicker:"radio"},{key:"darkMode",title:"Dark Mode",default:gr.Auto,description:"draw.io dark mode",type:"enum",enumChoices:Object.values(gr),enumPicker:"radio"}],va=rs.id;let $n,lo,Rn;function uo(){console.info(`#${va}: MAIN`),$n=new ns("drawio/index.html"),lo=new fn,Rn=new ga;const s=logseq.Assets.makeSandboxStorage();if({}.VITE_IS_MOCK){const l=document.createElement("style");l.innerHTML=eo,document.head.appendChild(l)}else{const l=()=>({edit:E=>ua(E,$n,Rn),remove:fa,preview:E=>da(E,lo),download:E=>co(E,"origin"),"download-svg":E=>co(E,"svg"),"copy-image":ha});logseq.provideModel(l()),logseq.setMainUIInlineStyle({zIndex:100}),logseq.provideStyle(eo),logseq.Editor.registerSlashCommand("import drawio file",({uuid:E})=>ca(E,$n,Rn)),logseq.Editor.registerSlashCommand("create drawio file",({uuid:E})=>la(E,$n,Rn)),logseq.App.onMacroRendererSlotted(async({slot:E,payload:N})=>{const[I,H]=N.arguments;if(I!==":drawio")return;const u=(await s.getItem(H))?.replace(/content=".*?"/,""),b=`<img style="background-color: white;" src="data:image/svg+xml;base64,${go(u??"")}">`;return logseq.provideUI({key:H,slot:E,reset:!0,template:`
<div class="drawio-plugin__preview">
  ${b}
  <div class="overlay"></div>
  <div class="drawio-plugin__toolbar">
    <div class="drawio-plugin__toolbar-title"></div>
    <div class="drawio-plugin__toolbar-actions">
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="edit" title="edit file">
        <svg stroke="currentColor" viewBox="0 0 24 24" fill="none"><path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path></svg>
      </button>
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="download" title="download drawio file">
        <svg viewBox="0 0 1024 1024" stroke-width="2" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M810.666667 938.666667H213.333333c-72.533333 0-128-55.466667-128-128v-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667v170.666667c0 25.6 17.066667 42.666667 42.666666 42.666666h597.333334c25.6 0 42.666667-17.066667 42.666666-42.666666v-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667v170.666667c0 72.533333-55.466667 128-128 128z"></path><path d="M512 682.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333334c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l183.466667 183.466667 183.466667-183.466667c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333334c-8.533333 8.533333-17.066667 12.8-29.866667 12.8z"></path><path d="M512 682.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667V128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667v512c0 25.6-17.066667 42.666667-42.666667 42.666667z"></path></svg>
      </button>
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="download-svg" title="download svg file with drawio file embeded">
        <svg class="icon" data-spm-anchor-id="a313x.search_index.0.i3.310d3a81tEjUar" viewBox="0 0 1024 1024"><path fill="#333" d="M220 865V159h338v184c0 17 14 31 31 31h184v148h62V312h-1c1-9-3-18-9-24L643 106c-6-6-16-9-25-8H220c-34 0-61 27-61 61v706c0 34 27 62 61 62h368v-62H220zm400-691 139 138H620V174z" data-spm-anchor-id="a313x.search_index.0.i4.310d3a81tEjUar"/><path fill="#333" d="m803 904 121-121-41-40-91 92V575h-58v260l-92-92-41 41 121 121 41 41 40-42zM408 482c-5-3-17-7-33-12l-20-7c-5-3-7-6-7-10s2-7 6-9c3-2 9-3 16-3 8 0 14 1 18 4s7 8 8 15l1 2h26v-4c-1-14-7-25-16-32-9-6-21-9-36-9-14 0-25 3-34 9-11 7-16 16-16 29 0 12 6 21 16 27l29 11c18 5 22 7 23 8 7 3 10 7 10 12 0 2-1 6-6 9s-12 4-20 4c-9 0-16-1-20-4-5-4-8-10-9-18v-3h-27l1 4c0 16 7 29 18 36 9 7 21 10 37 10s29-4 38-10c10-7 15-17 15-29 0-13-6-23-18-30zm107-63-31 93-32-93h-29l46 129h29l46-129zm89 81h32v20a51 51 0 0 1-26 6c-14 0-24-4-30-11s-9-17-9-31 3-25 10-33c6-7 14-10 24-10 9 0 16 2 21 5 5 4 8 9 10 16v3h27l-1-4c-2-15-8-26-17-33-10-8-23-11-40-11-19 0-34 6-45 20a71 71 0 0 0-16 47c0 19 5 35 16 47 11 13 27 20 48 20 11 0 21-2 30-5s17-7 24-12l1-1v-57h-59v24z"/></svg>
      </button>
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="copy-image" title="copy png image to clipboard">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg>
      </button>
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="remove">
        <svg viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="4" y1="7" x2="20" y2="7"></line><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>
      </button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="max">
      <button data-file-name="${H}" data-uuid="${N.uuid}" data-on-click="preview">
        <svg viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 8v-2a2 2 0 0 1 2 -2h2"></path><path d="M4 16v2a2 2 0 0 0 2 2h2"></path><path d="M16 4h2a2 2 0 0 1 2 2v2"></path><path d="M16 20h2a2 2 0 0 0 2 -2v-2"></path></svg>
      </button>
    </div>
  </div>
</div>
`})})}}({}).VITE_IS_MOCK?uo():logseq.useSettingsSchema(ma).ready(uo).catch(console.error);
